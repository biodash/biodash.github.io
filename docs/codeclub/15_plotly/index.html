<!DOCTYPE html><html lang="en-us" >

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  
  
  
    <meta name="generator" content="Wowchemy 5.0.0-beta.3 for Hugo" />
  

  

  
  

  
  
  
  
  
    
    
    
  
  

  <meta name="author" content="Jelmer Poelstra" />

  
  
  
    
  
  <meta name="description" content="During this fifteenth session of Code Club, we will learn to make interactive plots using ggplotly." />

  
  <link rel="alternate" hreflang="en-us" href="https://biodash.github.io/codeclub/15_plotly/" />

  







  




  
  
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  

  
  
  
    <meta name="theme-color" content="#3f51b5" />
  

  
  
    
    <script src="/js/mathjax-config.js"></script>
  

  
  
  
  
    
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha256-FMvZuGapsJLjouA6k7Eo2lusoAX9i0ShlWFG6qt7SLc=" crossorigin="anonymous">

    
    

    
    
    
      
    
    
      
      
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/styles/github.min.css" crossorigin="anonymous" title="hl-light" media="print" onload="this.media='all'">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/styles/github.min.css" crossorigin="anonymous" title="hl-dark" media="print" onload="this.media='all'" disabled>
      
    

    
    
    

    

    
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js" integrity="" crossorigin="anonymous" async></script>
      
    
      
      

      
      

      
    
      
      

      
      

      
    
  

  
  
  
    
      
      <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap">
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap" media="print" onload="this.media='all'">
    
  

  
  
  
  
  
  <link rel="stylesheet" href="/css/wowchemy.80f9a276c6100914c616a06e45ba8d09.css" />

  




<script async src="https://www.googletagmanager.com/gtag/js?id=G-9F9CQ7P0DX"></script>
<script>
  window.dataLayer = window.dataLayer || [];

  function gtag() {
      dataLayer.push(arguments);
  }

  function trackOutboundLink(url, target) {
    gtag('event', 'click', {
         'event_category': 'outbound',
         'event_label': url,
         'transport_type': 'beacon',
         'event_callback': function () {
           if (target !== '_blank') {
             document.location = url;
           }
         }
    });
    console.debug("Outbound link clicked: " + url);
  }

  function onClickCallback(event) {
    if ((event.target.tagName !== 'A') || (event.target.host === window.location.host)) {
      return;
    }
    trackOutboundLink(event.target, event.target.getAttribute('target'));  
  }

  gtag('js', new Date());
  gtag('config', 'G-9F9CQ7P0DX', {});
  gtag('set', {'cookie_flags': 'SameSite=None;Secure'});

  
  document.addEventListener('click', onClickCallback, false);
</script>


  

  

  




  
  
  

  

  
    <link rel="manifest" href="/index.webmanifest" />
  

  <link rel="icon" type="image/png" href="/media/icon_hucc2cf774636a7e386557c89fa75ff618_191491_32x32_fill_lanczos_center_2.png" />
  <link rel="apple-touch-icon" type="image/png" href="/media/icon_hucc2cf774636a7e386557c89fa75ff618_191491_180x180_fill_lanczos_center_2.png" />

  <link rel="canonical" href="https://biodash.github.io/codeclub/15_plotly/" />

  
  
  
  
  
  
  
  
    
    
  
  
  <meta property="twitter:card" content="summary" />
  
  <meta property="og:site_name" content="BioDASH" />
  <meta property="og:url" content="https://biodash.github.io/codeclub/15_plotly/" />
  <meta property="og:title" content="Session 15: Plotly | BioDASH" />
  <meta property="og:description" content="During this fifteenth session of Code Club, we will learn to make interactive plots using ggplotly." /><meta property="og:image" content="https://biodash.github.io/media/logo_hu6407506e646a281542ecb299640680ce_37988_300x300_fit_lanczos_2.png" />
    <meta property="twitter:image" content="https://biodash.github.io/media/logo_hu6407506e646a281542ecb299640680ce_37988_300x300_fit_lanczos_2.png" /><meta property="og:locale" content="en-us" />
  
    
      <meta
        property="article:published_time"
        content="2021-03-24T00:00:00&#43;00:00"
      />
    
    <meta property="article:modified_time" content="2021-03-26T13:39:35-04:00">
  

  



  

  

  <link rel='stylesheet' href='/css/highlight-light.css' title='hl-light'>
<link rel='stylesheet' href='/css/highlight-dark.css' title='hl-dark' disabled>



  <title>Session 15: Plotly | BioDASH</title>
</head>


<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" class="page-wrapper   " data-wc-page-id="ce6d61c1afe64ebae9067e14090c8573" >

  
  
  
  
  
  
  
  
  <script src="/js/wowchemy-init.min.7a224883d792570fd34d30c7134eace3.js"></script>

  


<aside class="search-modal" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#" aria-label="Close"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="Search..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search" class="form-control"
        aria-label="Search...">
        
      </div>

      
      

      

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>



  <div class="page-header">
    











  


<nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
  <div class="container-xl">

    
    <div class="d-none d-lg-inline-flex">
      <a class="navbar-brand" href="/"><img src="/media/logo_hu6407506e646a281542ecb299640680ce_37988_0x70_resize_lanczos_2.png" alt="BioDASH"></a>
    </div>
    

    
    <button type="button" class="navbar-toggler" data-toggle="collapse"
            data-target="#navbar-content" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
    <span><i class="fas fa-bars"></i></span>
    </button>
    

    
    <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
      <a class="navbar-brand" href="/"><img src="/media/logo_hu6407506e646a281542ecb299640680ce_37988_0x70_resize_lanczos_2.png" alt="BioDASH"></a>
    </div>
    

    
    
    <div class="navbar-collapse main-menu-item collapse justify-content-start" id="navbar-content">

      
      <ul class="navbar-nav d-md-inline-flex">
        

        
        <li class="nav-item dropdown">
          <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true"><span>Code Club</span><span class="caret"></span>
          </a>
          <div class="dropdown-menu">
            
              <a class="dropdown-item" href="/codeclub-schedule/"><span>- <b>Schedule</b></span></a>
            
              <a class="dropdown-item" href="/codeclub/"><span>- Past Sessions</span></a>
            
              <a class="dropdown-item" href="/codeclub-setup/"><span>- Computer Setup</span></a>
            
              <a class="dropdown-item" href="/"><span>------------------------</span></a>
            
              <a class="dropdown-item" href="/codeclub-suggest/"><span>- Suggest a Topic</span></a>
            
              <a class="dropdown-item" href="/codeclub-present/"><span>- Info for Presenters</span></a>
            
              <a class="dropdown-item" href="/"><span>-----------------------</span></a>
            
              <a class="dropdown-item" href="/codeclub-about/"><span>- <b>About Code Club & Join Us!</b></span></a>
            
          </div>
        </li>

        
        

        
        <li class="nav-item dropdown">
          <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true"><span>Tutorials & Resources</span><span class="caret"></span>
          </a>
          <div class="dropdown-menu">
            
              <a class="dropdown-item" href="/events/"><span>Events</span></a>
            
              <a class="dropdown-item" href="/"><span>---------------------</span></a>
            
              <a class="dropdown-item" href="/tutorials/r-resources-tips/"><span>- R Resources and Tips</span></a>
            
              <a class="dropdown-item" href="/"><span>--------------------</span></a>
            
              <a class="dropdown-item" href="https://mcic-osu.github.io/2020-12-microbiomics-workshop/"><span>- Metabarcoding workshop (Fall '20)</span></a>
            
              <a class="dropdown-item" href="/tutorials/2021-01_rnaseq/"><span>- RNA-seq intro meetings (Spring '21)</span></a>
            
              <a class="dropdown-item" href="https://mcic-osu.github.io/pracs-sp21/"><span>- Computing Course (Spring '21)</span></a>
            
          </div>
        </li>

        
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/support/"><span>Bioinformatics Support</span></a>
        </li>

        
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/about/"><span>About</span></a>
        </li>

        
        

        

        
        
        
          
            
          
        

        

        
        
        
        

        
          
            
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="https://github.com/biodash/biodash.github.io" target="_blank" rel="noopener"><i class='fab fa-github'></i><span></span></a>
        </li>

        
        

        

        
        
        
          
            
          
        

        

        
        
        
        

        
          
            
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/index.xml" target="_blank" rel="noopener"><i class='fas fa-rss'></i><span></span></a>
        </li>

        
        

      

        
      </ul>
    </div>

    <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">

      
      
        
      
        
      
        
      
        
      

      
      
      <li class="nav-item">
        <a class="nav-link js-search" href="#" aria-label="Search"><i class="fas fa-search" aria-hidden="true"></i></a>
      </li>
      

      
      
      <li class="nav-item dropdown theme-dropdown">
        <a href="#" class="nav-link" data-toggle="dropdown" aria-haspopup="true" aria-label="Display preferences">
          <i class="fas fa-moon" aria-hidden="true"></i>
        </a>
        <div class="dropdown-menu">
          <a href="#" class="dropdown-item js-set-theme-light">
            <span>Light</span>
          </a>
          <a href="#" class="dropdown-item js-set-theme-dark">
            <span>Dark</span>
          </a>
          <a href="#" class="dropdown-item js-set-theme-auto">
            <span>Automatic</span>
          </a>
        </div>
      </li>
      

      
      

    </ul>

  </div>
</nav>


  </div>

  <div class="page-body">
    
<div class="container-fluid docs">
    <div class="row flex-xl-nowrap">
        <div class="d-none d-xl-block col-xl-2 docs-toc">
            <ul class="nav toc-top">
                <li><a href="#" id="back_to_top" class="docs-toc-title">Contents</a></li>
            </ul>
            <nav id="TableOfContents">
  <ul>
    <li><a href="#prep-homework">Prep homework</a>
      <ul>
        <li><a href="#basic-computer-setup">Basic computer setup</a></li>
        <li><a href="#new-to-ggplot">New to ggplot?</a></li>
      </ul>
    </li>
    <li><a href="#getting-started">Getting Started</a>
      <ul>
        <li><a href="#rmarkdown-for-todays-session">RMarkdown for today&rsquo;s session</a></li>
      </ul>
    </li>
    <li><a href="#1---what-is-plotly">1 - What is plotly?</a></li>
    <li><a href="#2---load-libraries-get-data">2 - Load libraries, get data</a></li>
    <li><a href="#3---create-base-ggplot-object">3 - Create base ggplot object</a></li>
    <li><a href="#4---make-it-interactive-with-ggplotly">4 - Make it interactive with <code>ggplotly()</code></a></li>
    <li><a href="#5---using-tooltip">5 - Using tooltip</a></li>
    <li><a href="#6---hover-label-aesthetics">6 - Hover label aesthetics</a></li>
    <li><a href="#7---dynamic-ticks">7 - Dynamic ticks</a></li>
    <li><a href="#8---animating">8 - Animating</a></li>
    <li><a href="#9---everything-you-know-about-ggplot-still-applies">9 - Everything you know about <em>ggplot</em> still applies!</a></li>
    <li><a href="#10---saving-your-plots">10 - Saving your plots</a></li>
    <li><a href="#breakout-rooms">Breakout rooms</a>
      <ul>
        <li><a href="#exercise-1">Exercise 1</a></li>
        <li><a href="#exercise-2">Exercise 2</a></li>
        <li><a href="#exercise-3">Exercise 3</a></li>
        <li><a href="#exercise-4">Exercise 4</a></li>
      </ul>
    </li>
    <li><a href="#bonus">Bonus</a>
      <ul>
        <li><a href="#bonus-1">Bonus 1</a></li>
      </ul>
    </li>
  </ul>
</nav>
        </div>
        <main class="col-12 col-md-0 col-xl-10 py-md-3 pl-md-5 docs-content" role="main">
            

            <article class="article">

                












  

  
  
  
<div class="article-container pt-3">
  <h1>Session 15: Plotly</h1>

  
  <p class="page-subtitle">Making our plots interactive</p>
  

  
    



<div class="article-metadata">

  
  
  
  
  <div>
    

  <span >
      <a href="/authors/jessica-cooperstone/">Jessica Cooperstone</a></span>
  </div>
  
  

  
  <span class="article-date">
    
    
    Mar 26, 2021
  </span>
  

  

  

  
  
  
  
  

  
  

</div>

    





  
</div>



                <div class="article-container">
                    <div class="article-style">
                        <hr>
<h2 id="prep-homework">Prep homework</h2>
<h3 id="basic-computer-setup">Basic computer setup</h3>
<ul>
<li>
<p>If you didn&rsquo;t already do this, please follow the <a href="/codeclub-setup/04_ggplot2/">Code Club Computer Setup</a> instructions, which also has pointers for if you&rsquo;re new to R or RStudio.</p>
</li>
<li>
<p>If you&rsquo;re able to do so, please open RStudio a bit before Code Club starts &ndash; and in case you run into issues, please join the Zoom call early and we&rsquo;ll help you troubleshoot.</p>
</li>
</ul>
<h3 id="new-to-ggplot">New to ggplot?</h3>
<p>Check out the three Code Club pages for <a href="/codeclub/04_ggplot2/">Session 4</a>, <a href="/codeclub/05_ggplot-round-2/">Session 5</a> and <a href="/codeclub/10_faceting-animating/">Session 10</a> which are all about <code>ggplot2</code>.</p>
<p>If you&rsquo;ve never used <code>ggplot2</code> before (or even if you have), you may find <a href="https://github.com/rstudio/cheatsheets/blob/master/data-visualization-2.1.pdf" target="_blank" rel="noopener">this cheat sheet</a> useful.</p>
<br>
<h2 id="getting-started">Getting Started</h2>
<h3 id="rmarkdown-for-todays-session">RMarkdown for today&rsquo;s session</h3>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='c'># directory for Code Club Session 15:</span>
<span class='nf'><a href='https://rdrr.io/r/base/files2.html'>dir.create</a></span><span class='o'>(</span><span class='s'>"S15"</span><span class='o'>)</span>

<span class='c'># directory for our RMarkdown</span>
<span class='c'># ("recursive" to create two levels at once.)</span>
<span class='nf'><a href='https://rdrr.io/r/base/files2.html'>dir.create</a></span><span class='o'>(</span><span class='s'>"S15/Rmd/"</span><span class='o'>)</span>

<span class='c'># save the url location for today's script</span>
<span class='nv'>todays_Rmd</span> <span class='o'>&lt;-</span> 
  <span class='s'>'https://raw.githubusercontent.com/biodash/biodash.github.io/master/content/codeclub/15_plotly/Plotly-withOUT-answers.Rmd'</span>

<span class='c'># indicate the name of the new Rmd</span>
<span class='nv'>Session15_Rmd</span> <span class='o'>&lt;-</span> <span class='s'>"S15/Rmd/Session15_plotly.Rmd"</span>

<span class='c'># go get that file! </span>
<span class='nf'><a href='https://rdrr.io/r/utils/download.file.html'>download.file</a></span><span class='o'>(</span>url <span class='o'>=</span> <span class='nv'>todays_Rmd</span>,
              destfile <span class='o'>=</span> <span class='nv'>Session15_Rmd</span><span class='o'>)</span>
</code></pre>
</div>
<br>
<hr>
<h2 id="1---what-is-plotly">1 - What is plotly?</h2>
<p>Today we are going to talk about making interactive plots using <a href="https://plotly.com/" target="_blank" rel="noopener">Plotly</a>. Plotly exists in a variety of programming languages, but today we will be just talking about using it in <a href="https://plotly.com/r/" target="_blank" rel="noopener">R</a>. All of the plotly documentation can be found <a href="https://cran.r-project.org/web/packages/plotly/plotly.pdf" target="_blank" rel="noopener">here</a>.</p>
<p>If you have never used <code>plotly</code> before, install it with the code below.</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='nf'><a href='https://rdrr.io/r/utils/install.packages.html'>install.packages</a></span><span class='o'>(</span><span class='s'>"plotly"</span><span class='o'>)</span>
</code></pre>
</div>
<p>Here are some useful links to find info about using <code>ggplotly</code>.</p>
<ul>
<li><a href="https://plotly.com/ggplot2/#layout-options" target="_blank" rel="noopener">Basic ggplot2 charts</a></li>
<li><a href="https://plotly.com/r/plotly-fundamentals/" target="_blank" rel="noopener">Plotly R library fundamentals</a></li>
<li><a href="https://plotly-r.com/overview.html#intro-ggplotly" target="_blank" rel="noopener">Intro to <code>ggplotly()</code></a></li>
<li><a href="https://plotly.com/r/reference/layout/#" target="_blank" rel="noopener">Using <code>layout()</code></a></li>
<li><a href="https://plotly-r.com/controlling-tooltips.html#tooltip-text-ggplotly" target="_blank" rel="noopener"><code>ggplotly()</code> tooltips</a></li>
</ul>
<p>Before we start, there are two basic ways to use plot in R using plotly:</p>
<ul>
<li>Using <a href="https://www.rdocumentation.org/packages/plotly/versions/4.9.3/topics/ggplotly" target="_blank" rel="noopener"><code>ggplotly()</code></a> - this is what we will go over today because it has the same syntax as <code>ggplot()</code> which we have already learned</li>
<li>Using <a href="https://www.rdocumentation.org/packages/plotly/versions/4.9.3/topics/plot_ly" target="_blank" rel="noopener"><code>plot_ly()</code></a> - there is slightly more functionality in this function, but the syntax is all new, so I&rsquo;d suggest if you can do what you want with <a href="https://docs.ropensci.org/plotly/reference/ggplotly.html" target="_blank" rel="noopener"><code>ggplotly()</code></a>, do that. The syntax is not particularly hard so don&rsquo;t be scared to use it if interactive plots are something you&rsquo;re very interested in.</li>
</ul>
<p>When you are googling about using plotly, you will find a combination of <a href="https://docs.ropensci.org/plotly/reference/ggplotly.html" target="_blank" rel="noopener"><code>ggplotly()</code></a> and <a href="https://docs.ropensci.org/plotly/reference/plot_ly.html" target="_blank" rel="noopener"><code>plot_ly()</code></a> approaches, and some parts of the code are interchangable. The easiesy way to see which parts are, is to try.</p>
<p>Also note, Google gets a bit confused when googling &ldquo;ggplotly&rdquo; and often returns information about just ggplot, so read extra carefully when problem solving.</p>
<p>This is an example of work from my group where we have found plotly to be particularly useful.</p>
<p><code>

<div id="chart-657981432" class="chart"></div>
<script>
  (function() {
    let a = setInterval( function() {
      if ( typeof window.Plotly === 'undefined' ) {
        return;
      }
      clearInterval( a );

      Plotly.d3.json("./apples.json", function(chart) {
        Plotly.plot('chart-657981432', chart.data, chart.layout, {responsive: true});
      });
    }, 500 );
  })();
</script></code> Data from <a href="https://www.biorxiv.org/content/10.1101/2021.02.18.431481v1" target="_blank" rel="noopener">Bilbrey et al., bioRxiv 2021</a></p>
<br>
<hr>
<h2 id="2---load-libraries-get-data">2 - Load libraries, get data</h2>
<p>Lets load the libraries we are using for today.</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='kr'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='o'>(</span><span class='nv'><a href='http://tidyverse.tidyverse.org'>tidyverse</a></span><span class='o'>)</span>
<span class='kr'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='o'>(</span><span class='nv'><a href='https://plotly-r.com'>plotly</a></span><span class='o'>)</span> <span class='c'># for making interactive plots</span>
<span class='kr'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='o'>(</span><span class='nv'><a href='https://github.com/ramnathv/htmlwidgets'>htmlwidgets</a></span><span class='o'>)</span> <span class='c'># for saving html files</span>
<span class='kr'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='o'>(</span><span class='nv'><a href='https://allisonhorst.github.io/palmerpenguins/'>palmerpenguins</a></span><span class='o'>)</span> <span class='c'># for our penguins data</span>
</code></pre>
</div>
<p>Let&rsquo;s look at <code>penguins_raw</code> this time, a df that has a bit more data than the <code>penguins</code> df.</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='nf'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='o'>(</span><span class='nv'>penguins_raw</span><span class='o'>)</span>

<span class='c'>#&gt; <span style='color: #555555;'># A tibble: 6 x 17</span></span>
<span class='c'>#&gt;   studyName `Sample Number` Species Region Island Stage `Individual ID`</span>
<span class='c'>#&gt;   <span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>               </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>   </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>  </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>  </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>          </span></span>
<span class='c'>#&gt; <span style='color: #555555;'>1</span><span> PAL0708                 1 Adelie… Anvers Torge… Adul… N1A1           </span></span>
<span class='c'>#&gt; <span style='color: #555555;'>2</span><span> PAL0708                 2 Adelie… Anvers Torge… Adul… N1A2           </span></span>
<span class='c'>#&gt; <span style='color: #555555;'>3</span><span> PAL0708                 3 Adelie… Anvers Torge… Adul… N2A1           </span></span>
<span class='c'>#&gt; <span style='color: #555555;'>4</span><span> PAL0708                 4 Adelie… Anvers Torge… Adul… N2A2           </span></span>
<span class='c'>#&gt; <span style='color: #555555;'>5</span><span> PAL0708                 5 Adelie… Anvers Torge… Adul… N3A1           </span></span>
<span class='c'>#&gt; <span style='color: #555555;'>6</span><span> PAL0708                 6 Adelie… Anvers Torge… Adul… N3A2           </span></span>
<span class='c'>#&gt; <span style='color: #555555;'># … with 10 more variables: `Clutch Completion` </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span style='color: #555555;'>, `Date Egg` </span><span style='color: #555555;font-style: italic;'>&lt;date&gt;</span><span style='color: #555555;'>,</span></span>
<span class='c'>#&gt; <span style='color: #555555;'>#   `Culmen Length (mm)` </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span style='color: #555555;'>, `Culmen Depth (mm)` </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span style='color: #555555;'>, `Flipper Length</span></span>
<span class='c'>#&gt; <span style='color: #555555;'>#   (mm)` </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span style='color: #555555;'>, `Body Mass (g)` </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span style='color: #555555;'>, Sex </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span style='color: #555555;'>, `Delta 15 N (o/oo)` </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span style='color: #555555;'>,</span></span>
<span class='c'>#&gt; <span style='color: #555555;'>#   `Delta 13 C (o/oo)` </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span style='color: #555555;'>, Comments </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span></span>

<span class='nf'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='o'>(</span><span class='nv'>penguins</span><span class='o'>)</span>

<span class='c'>#&gt; <span style='color: #555555;'># A tibble: 6 x 8</span></span>
<span class='c'>#&gt;   species island bill_length_mm bill_depth_mm flipper_length_… body_mass_g sex  </span>
<span class='c'>#&gt;   <span style='color: #555555;font-style: italic;'>&lt;fct&gt;</span><span>   </span><span style='color: #555555;font-style: italic;'>&lt;fct&gt;</span><span>           </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span>         </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span>            </span><span style='color: #555555;font-style: italic;'>&lt;int&gt;</span><span>       </span><span style='color: #555555;font-style: italic;'>&lt;int&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;fct&gt;</span></span>
<span class='c'>#&gt; <span style='color: #555555;'>1</span><span> Adelie  Torge…           39.1          18.7              181        </span><span style='text-decoration: underline;'>3</span><span>750 male </span></span>
<span class='c'>#&gt; <span style='color: #555555;'>2</span><span> Adelie  Torge…           39.5          17.4              186        </span><span style='text-decoration: underline;'>3</span><span>800 fema…</span></span>
<span class='c'>#&gt; <span style='color: #555555;'>3</span><span> Adelie  Torge…           40.3          18                195        </span><span style='text-decoration: underline;'>3</span><span>250 fema…</span></span>
<span class='c'>#&gt; <span style='color: #555555;'>4</span><span> Adelie  Torge…           </span><span style='color: #BB0000;'>NA</span><span>            </span><span style='color: #BB0000;'>NA</span><span>                 </span><span style='color: #BB0000;'>NA</span><span>          </span><span style='color: #BB0000;'>NA</span><span> </span><span style='color: #BB0000;'>NA</span><span>   </span></span>
<span class='c'>#&gt; <span style='color: #555555;'>5</span><span> Adelie  Torge…           36.7          19.3              193        </span><span style='text-decoration: underline;'>3</span><span>450 fema…</span></span>
<span class='c'>#&gt; <span style='color: #555555;'>6</span><span> Adelie  Torge…           39.3          20.6              190        </span><span style='text-decoration: underline;'>3</span><span>650 male </span></span>
<span class='c'>#&gt; <span style='color: #555555;'># … with 1 more variable: year </span><span style='color: #555555;font-style: italic;'>&lt;int&gt;</span></span>
</code></pre>
</div>
<br>
<hr>
<h2 id="3---create-base-ggplot-object">3 - Create base ggplot object</h2>
<p>Using the <code>penguins_raw</code> dataset and make a scatter plot with Culmen Length on the y, and Culmen Depth on the x.</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='nv'>bill_depth_length</span> <span class='o'>&lt;-</span> <span class='nv'>penguins_raw</span> <span class='o'>%&gt;%</span>
  <span class='nf'>ggplot</span><span class='o'>(</span><span class='nf'>aes</span><span class='o'>(</span>x <span class='o'>=</span> <span class='nv'>`Culmen Length (mm)`</span>, y <span class='o'>=</span> <span class='nv'>`Culmen Depth (mm)`</span><span class='o'>)</span><span class='o'>)</span> <span class='o'>+</span>
  <span class='nf'>geom_point</span><span class='o'>(</span><span class='o'>)</span>

<span class='nv'>bill_depth_length</span>

<span class='c'>#&gt; Warning: Removed 2 rows containing missing values (geom_point).</span>

</code></pre>
<p><img src="figs/unnamed-chunk-5-1.png" width="700px" style="display: block; margin: auto;" /></p>
</div>
<br>
<hr>
<h2 id="4---make-it-interactive-with-ggplotly">4 - Make it interactive with <code>ggplotly()</code></h2>
<p>You can learn more about the <a href="https://docs.ropensci.org/plotly/reference/ggplotly.html" target="_blank" rel="noopener"><code>ggplotly()</code></a> function, including its arguments <a href="https://www.rdocumentation.org/packages/plotly/versions/4.9.3/topics/ggplotly" target="_blank" rel="noopener">here</a>.</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='nf'><a href='https://docs.ropensci.org/plotly/reference/ggplotly.html'>ggplotly</a></span><span class='o'>(</span><span class='nv'>bill_depth_length</span><span class='o'>)</span>
</code></pre>
</div>
<div class="highlight">
</div>
<p><code>

<div id="chart-561782439" class="chart"></div>
<script>
  (function() {
    let a = setInterval( function() {
      if ( typeof window.Plotly === 'undefined' ) {
        return;
      }
      clearInterval( a );

      Plotly.d3.json("./penguins1.json", function(chart) {
        Plotly.plot('chart-561782439', chart.data, chart.layout, {responsive: true});
      });
    }, 500 );
  })();
</script></code></p>
<p>Wow that was easy!</p>
<p>Let&rsquo;s add a title and change the theme to make our plot a little prettier before we progress.</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='nv'>bill_depth_length</span> <span class='o'>&lt;-</span> <span class='nv'>penguins_raw</span> <span class='o'>%&gt;%</span>
  <span class='nf'>ggplot</span><span class='o'>(</span><span class='nf'>aes</span><span class='o'>(</span>x <span class='o'>=</span> <span class='nv'>`Culmen Length (mm)`</span>, y <span class='o'>=</span> <span class='nv'>`Culmen Depth (mm)`</span><span class='o'>)</span><span class='o'>)</span> <span class='o'>+</span>
  <span class='nf'>geom_point</span><span class='o'>(</span><span class='o'>)</span> <span class='o'>+</span>
  <span class='nf'>theme_minimal</span><span class='o'>(</span><span class='o'>)</span> <span class='o'>+</span>
  <span class='nf'>labs</span><span class='o'>(</span>title <span class='o'>=</span> <span class='s'>"Understanding Penguin Bill Dimensions"</span><span class='o'>)</span>

<span class='nf'><a href='https://docs.ropensci.org/plotly/reference/ggplotly.html'>ggplotly</a></span><span class='o'>(</span><span class='nv'>bill_depth_length</span><span class='o'>)</span>
</code></pre>
</div>
<div class="highlight">
</div>
<p><code>

<div id="chart-457839621" class="chart"></div>
<script>
  (function() {
    let a = setInterval( function() {
      if ( typeof window.Plotly === 'undefined' ) {
        return;
      }
      clearInterval( a );

      Plotly.d3.json("./penguins2.json", function(chart) {
        Plotly.plot('chart-457839621', chart.data, chart.layout, {responsive: true});
      });
    }, 500 );
  })();
</script></code></p>
<br>
<hr>
<h2 id="5---using-tooltip">5 - Using tooltip</h2>
<p>Using tooltip helps you to indicate what appears when you hover over different parts of your plot. You can learn more about controlling <code>tooltip</code> <a href="https://plotly-r.com/controlling-tooltips.html" target="_blank" rel="noopener">here</a>.</p>
<p>What if we want to hover over each point and be able to tell which <code>Island</code> the penguin was found on?</p>
<p>To do this, we indicate what we want to hover with using <code>text =</code> in our aesthetic mappings. Then, we indicate <code>tooltip = &quot;text&quot;</code> to tell <a href="https://docs.ropensci.org/plotly/reference/ggplotly.html" target="_blank" rel="noopener"><code>ggplotly()</code></a> what we want to hover.</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='nv'>bill_depth_length</span> <span class='o'>&lt;-</span> <span class='nv'>penguins_raw</span> <span class='o'>%&gt;%</span>
  <span class='nf'>ggplot</span><span class='o'>(</span><span class='nf'>aes</span><span class='o'>(</span>x <span class='o'>=</span> <span class='nv'>`Culmen Length (mm)`</span>, y <span class='o'>=</span> <span class='nv'>`Culmen Depth (mm)`</span>,
             text <span class='o'>=</span> <span class='nv'>Island</span><span class='o'>)</span><span class='o'>)</span> <span class='o'>+</span>
  <span class='nf'>geom_point</span><span class='o'>(</span><span class='o'>)</span> <span class='o'>+</span>
  <span class='nf'>theme_minimal</span><span class='o'>(</span><span class='o'>)</span> <span class='o'>+</span>
  <span class='nf'>labs</span><span class='o'>(</span>title <span class='o'>=</span> <span class='s'>"Understanding Penguin Bill Dimensions"</span><span class='o'>)</span>

<span class='nf'><a href='https://docs.ropensci.org/plotly/reference/ggplotly.html'>ggplotly</a></span><span class='o'>(</span><span class='nv'>bill_depth_length</span>,
         tooltip <span class='o'>=</span> <span class='s'>"text"</span><span class='o'>)</span>
</code></pre>
</div>
<div class="highlight">
</div>
<p><code>

<div id="chart-165827943" class="chart"></div>
<script>
  (function() {
    let a = setInterval( function() {
      if ( typeof window.Plotly === 'undefined' ) {
        return;
      }
      clearInterval( a );

      Plotly.d3.json("./penguins3.json", function(chart) {
        Plotly.plot('chart-165827943', chart.data, chart.layout, {responsive: true});
      });
    }, 500 );
  })();
</script></code></p>
<p>You can play around a lot with tooltip to get it to be exactly how you want, and you can include multiple things in your hover text.</p>
<p>You can also indicate to hover with data that is not inherently in your plot by mapping it to a <code>group</code> aesthetic.</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='nv'>bill_depth_length</span> <span class='o'>&lt;-</span> <span class='nv'>penguins_raw</span> <span class='o'>%&gt;%</span>
  <span class='nf'>ggplot</span><span class='o'>(</span><span class='nf'>aes</span><span class='o'>(</span>x <span class='o'>=</span> <span class='nv'>`Culmen Length (mm)`</span>, y <span class='o'>=</span> <span class='nv'>`Culmen Depth (mm)`</span>,
             text <span class='o'>=</span> <span class='nv'>Island</span>, group <span class='o'>=</span> <span class='nv'>`Individual ID`</span><span class='o'>)</span><span class='o'>)</span> <span class='o'>+</span>
  <span class='nf'>geom_point</span><span class='o'>(</span><span class='o'>)</span> <span class='o'>+</span>
  <span class='nf'>theme_minimal</span><span class='o'>(</span><span class='o'>)</span> <span class='o'>+</span>
  <span class='nf'>labs</span><span class='o'>(</span>title <span class='o'>=</span> <span class='s'>"Understanding Penguin Bill Dimensions"</span><span class='o'>)</span>

<span class='nf'><a href='https://docs.ropensci.org/plotly/reference/ggplotly.html'>ggplotly</a></span><span class='o'>(</span><span class='nv'>bill_depth_length</span>,
         tooltip <span class='o'>=</span> <span class='nf'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='o'>(</span><span class='s'>"text"</span>, <span class='s'>"Individual ID"</span><span class='o'>)</span><span class='o'>)</span> <span class='c'># hover test will be in this order</span>
</code></pre>
</div>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='c'>#&gt; Warning: `group_by_()` was deprecated in dplyr 0.7.0.</span>
<span class='c'>#&gt; Please use `group_by()` instead.</span>
<span class='c'>#&gt; See vignette('programming') for more help</span>
</code></pre>
</div>
<p><code>

<div id="chart-137598426" class="chart"></div>
<script>
  (function() {
    let a = setInterval( function() {
      if ( typeof window.Plotly === 'undefined' ) {
        return;
      }
      clearInterval( a );

      Plotly.d3.json("./penguins4.json", function(chart) {
        Plotly.plot('chart-137598426', chart.data, chart.layout, {responsive: true});
      });
    }, 500 );
  })();
</script></code></p>
<p>You may also want to paste in some text to your hover info to provide additional clarity on what you are showing.</p>
<p>You can use <code>paste</code> to add some information you&rsquo;d like to see in each of the hover texts, here, we are indicating Island: <code>Island</code>. You can also add multiple variables within text, and it will populate in the hover text in the way you indicate. There is an example of how to do this in Bonus 1.</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='nv'>bill_depth_length</span> <span class='o'>&lt;-</span> <span class='nv'>penguins_raw</span> <span class='o'>%&gt;%</span>
  <span class='nf'>ggplot</span><span class='o'>(</span><span class='nf'>aes</span><span class='o'>(</span>x <span class='o'>=</span> <span class='nv'>`Culmen Length (mm)`</span>, y <span class='o'>=</span> <span class='nv'>`Culmen Depth (mm)`</span>,
             text <span class='o'>=</span> <span class='nf'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span><span class='o'>(</span><span class='s'>"Island:"</span>, <span class='nv'>Island</span><span class='o'>)</span><span class='o'>)</span><span class='o'>)</span> <span class='o'>+</span>
  <span class='nf'>geom_point</span><span class='o'>(</span><span class='o'>)</span> <span class='o'>+</span>
  <span class='nf'>theme_minimal</span><span class='o'>(</span><span class='o'>)</span> <span class='o'>+</span>
  <span class='nf'>labs</span><span class='o'>(</span>title <span class='o'>=</span> <span class='s'>"Understanding Penguin Bill Dimensions"</span><span class='o'>)</span>

<span class='nf'><a href='https://docs.ropensci.org/plotly/reference/ggplotly.html'>ggplotly</a></span><span class='o'>(</span><span class='nv'>bill_depth_length</span>,
         tooltip <span class='o'>=</span> <span class='s'>"text"</span><span class='o'>)</span>
</code></pre>
</div>
<div class="highlight">
</div>
<p><code>

<div id="chart-154982637" class="chart"></div>
<script>
  (function() {
    let a = setInterval( function() {
      if ( typeof window.Plotly === 'undefined' ) {
        return;
      }
      clearInterval( a );

      Plotly.d3.json("./penguins5.json", function(chart) {
        Plotly.plot('chart-154982637', chart.data, chart.layout, {responsive: true});
      });
    }, 500 );
  })();
</script></code></p>
<br>
<hr>
<h2 id="6---hover-label-aesthetics">6 - Hover label aesthetics</h2>
<p>You might not like the default hover text aesthetics, and can change them! You can do this using <code>style</code> and <code>layout</code> and adding these functions using the pipe <a href="https://magrittr.tidyverse.org/reference/pipe.html" target="_blank" rel="noopener"><code>%&gt;%</code></a>.</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='c'># setting fonts for the plot</span>
<span class='nv'>font</span> <span class='o'>&lt;-</span> <span class='nf'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='o'>(</span>
  family <span class='o'>=</span> <span class='s'>"Roboto Condensed"</span>,
  size <span class='o'>=</span> <span class='m'>15</span>,
  color <span class='o'>=</span> <span class='s'>"white"</span><span class='o'>)</span>

<span class='c'># setting hover label specs</span>
<span class='nv'>label</span> <span class='o'>&lt;-</span> <span class='nf'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='o'>(</span>
  bgcolor <span class='o'>=</span> <span class='s'>"#FF0000"</span>,
  bordercolor <span class='o'>=</span> <span class='s'>"transparent"</span>,
  font <span class='o'>=</span> <span class='nv'>font</span><span class='o'>)</span> <span class='c'># we can do this bc we already set font</span>

<span class='c'># plotting like normal</span>
<span class='nv'>bill_depth_length</span> <span class='o'>&lt;-</span> <span class='nv'>penguins_raw</span> <span class='o'>%&gt;%</span>
  <span class='nf'>ggplot</span><span class='o'>(</span><span class='nf'>aes</span><span class='o'>(</span>x <span class='o'>=</span> <span class='nv'>`Culmen Length (mm)`</span>, y <span class='o'>=</span> <span class='nv'>`Culmen Depth (mm)`</span>,
             text <span class='o'>=</span> <span class='nf'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span><span class='o'>(</span><span class='s'>"Island:"</span>, <span class='nv'>Island</span><span class='o'>)</span><span class='o'>)</span><span class='o'>)</span> <span class='o'>+</span>
  <span class='nf'>geom_point</span><span class='o'>(</span><span class='o'>)</span> <span class='o'>+</span>
  <span class='nf'>theme_minimal</span><span class='o'>(</span><span class='o'>)</span> <span class='o'>+</span>
  <span class='nf'>labs</span><span class='o'>(</span>title <span class='o'>=</span> <span class='s'>"A Deep Dive (ha) Into \nUnderstanding Penguin Bill Dimensions"</span><span class='o'>)</span>
<span class='c'># use\n to bring your text to another line</span>

<span class='c'># amending our ggplotly call to include new fonts and hover label specs</span>
<span class='nf'><a href='https://docs.ropensci.org/plotly/reference/ggplotly.html'>ggplotly</a></span><span class='o'>(</span><span class='nv'>bill_depth_length</span>, tooltip <span class='o'>=</span> <span class='s'>"text"</span><span class='o'>)</span> <span class='o'>%&gt;%</span>
  <span class='nf'><a href='https://docs.ropensci.org/plotly/reference/style.html'>style</a></span><span class='o'>(</span>hoverlabel <span class='o'>=</span> <span class='nv'>label</span><span class='o'>)</span> <span class='o'>%&gt;%</span>
  <span class='nf'><a href='https://docs.ropensci.org/plotly/reference/layout.html'>layout</a></span><span class='o'>(</span>font <span class='o'>=</span> <span class='nv'>font</span><span class='o'>)</span>
</code></pre>
</div>
<div class="highlight">
</div>
<p><code>

<div id="chart-196248375" class="chart"></div>
<script>
  (function() {
    let a = setInterval( function() {
      if ( typeof window.Plotly === 'undefined' ) {
        return;
      }
      clearInterval( a );

      Plotly.d3.json("./penguins6.json", function(chart) {
        Plotly.plot('chart-196248375', chart.data, chart.layout, {responsive: true});
      });
    }, 500 );
  })();
</script></code></p>
<br>
<hr>
<h2 id="7---dynamic-ticks">7 - Dynamic ticks</h2>
<p>Keep your axis labels so when you zoom, you can see where you are on your plot. Remember, you can zoom and pan around your plot!</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='nf'><a href='https://docs.ropensci.org/plotly/reference/ggplotly.html'>ggplotly</a></span><span class='o'>(</span><span class='nv'>bill_depth_length</span>,
         tooltip <span class='o'>=</span> <span class='s'>"text"</span>,
         dynamicTicks <span class='o'>=</span> <span class='kc'>TRUE</span><span class='o'>)</span>
</code></pre>
</div>
<div class="highlight">
</div>
<p><code>

<div id="chart-315874926" class="chart"></div>
<script>
  (function() {
    let a = setInterval( function() {
      if ( typeof window.Plotly === 'undefined' ) {
        return;
      }
      clearInterval( a );

      Plotly.d3.json("./penguins7.json", function(chart) {
        Plotly.plot('chart-315874926', chart.data, chart.layout, {responsive: true});
      });
    }, 500 );
  })();
</script></code></p>
<br>
<hr>
<h2 id="8---animating">8 - Animating</h2>
<p>Add <code>frame</code> in your aesthetics mapping to tell plotly what column to animate over. You can then play your animation, or toggle from one view to another.</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='c'># add frame</span>
<span class='nv'>bill_depth_length</span> <span class='o'>&lt;-</span> <span class='nv'>penguins_raw</span> <span class='o'>%&gt;%</span>
  <span class='nf'>ggplot</span><span class='o'>(</span><span class='nf'>aes</span><span class='o'>(</span>x <span class='o'>=</span> <span class='nv'>`Culmen Length (mm)`</span>, y <span class='o'>=</span> <span class='nv'>`Culmen Depth (mm)`</span>,
             frame <span class='o'>=</span> <span class='nv'>Island</span>, text <span class='o'>=</span> <span class='nv'>`Individual ID`</span><span class='o'>)</span><span class='o'>)</span> <span class='o'>+</span>
  <span class='nf'>geom_point</span><span class='o'>(</span><span class='o'>)</span> <span class='o'>+</span>
  <span class='nf'>theme_minimal</span><span class='o'>(</span><span class='o'>)</span> <span class='o'>+</span>
  <span class='nf'>labs</span><span class='o'>(</span>title <span class='o'>=</span> <span class='s'>"Understanding Penguin Bill Dimensions"</span><span class='o'>)</span>

<span class='nf'><a href='https://docs.ropensci.org/plotly/reference/ggplotly.html'>ggplotly</a></span><span class='o'>(</span><span class='nv'>bill_depth_length</span>,
         tooltip <span class='o'>=</span> <span class='s'>"text"</span><span class='o'>)</span>
</code></pre>
</div>
<div class="highlight">
</div>
<p><code>

<div id="chart-649372851" class="chart"></div>
<script>
  (function() {
    let a = setInterval( function() {
      if ( typeof window.Plotly === 'undefined' ) {
        return;
      }
      clearInterval( a );

      Plotly.d3.json("./penguins8.json", function(chart) {
        Plotly.plot('chart-649372851', chart.data, chart.layout, {responsive: true});
      });
    }, 500 );
  })();
</script></code></p>
<p><strong>Note:</strong> I know this plot isn&rsquo;t animating &ndash; for an animated version, <a href="/codeclub/15_plotly/Plotly-with-answers.html#23_Animating">see this page</a>. Also, if you do this in R yourself, you will find the code works.</p>
<br>
<hr>
<h2 id="9---everything-you-know-about-ggplot-still-applies">9 - Everything you know about <em>ggplot</em> still applies!</h2>
<p>Don&rsquo;t forget you can use things like faceting, that we have gone over previously in <a href="https://biodash.github.io/codeclub/10_faceting-animating/" target="_blank" rel="noopener">Session 10</a>.</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='nv'>bill_depth_length</span> <span class='o'>&lt;-</span> <span class='nv'>penguins</span> <span class='o'>%&gt;%</span>
  <span class='nf'>ggplot</span><span class='o'>(</span><span class='nf'>aes</span><span class='o'>(</span>x <span class='o'>=</span> <span class='nv'>bill_length_mm</span>, y <span class='o'>=</span> <span class='nv'>bill_depth_mm</span>, color <span class='o'>=</span> <span class='nv'>species</span>,
             text <span class='o'>=</span> <span class='nf'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span><span class='o'>(</span><span class='s'>"Island:"</span>, <span class='nv'>island</span><span class='o'>)</span><span class='o'>)</span><span class='o'>)</span> <span class='o'>+</span>
  <span class='nf'>geom_point</span><span class='o'>(</span><span class='o'>)</span> <span class='o'>+</span>
  <span class='nf'>theme_minimal</span><span class='o'>(</span><span class='o'>)</span> <span class='o'>+</span>
  <span class='nf'>theme</span><span class='o'>(</span>legend.position <span class='o'>=</span> <span class='s'>"none"</span><span class='o'>)</span> <span class='o'>+</span>
  <span class='nf'>labs</span><span class='o'>(</span>title <span class='o'>=</span> <span class='s'>"Understanding Penguin Bill Dimensions"</span>,
       x <span class='o'>=</span> <span class='s'>"Culmen Bill Length (mm)"</span>,
       y <span class='o'>=</span> <span class='s'>"Culmen Bill Depth (mm)"</span><span class='o'>)</span> <span class='o'>+</span>
  <span class='nf'>facet_wrap</span><span class='o'>(</span><span class='o'>~</span><span class='nv'>species</span><span class='o'>)</span>

<span class='nf'><a href='https://docs.ropensci.org/plotly/reference/ggplotly.html'>ggplotly</a></span><span class='o'>(</span><span class='nv'>bill_depth_length</span>,
         tooltip <span class='o'>=</span> <span class='s'>"text"</span><span class='o'>)</span>
</code></pre>
</div>
<div class="highlight">
</div>
<p><code>

<div id="chart-439185267" class="chart"></div>
<script>
  (function() {
    let a = setInterval( function() {
      if ( typeof window.Plotly === 'undefined' ) {
        return;
      }
      clearInterval( a );

      Plotly.d3.json("./penguins9.json", function(chart) {
        Plotly.plot('chart-439185267', chart.data, chart.layout, {responsive: true});
      });
    }, 500 );
  })();
</script></code></p>
<br>
<hr>
<h2 id="10---saving-your-plots">10 - Saving your plots</h2>
<p>Now that you&rsquo;ve made a beautiful interactive plot, you probably want to save it.</p>
<p>Assign the plot you want to save to an object, and use the function <a href="https://rdrr.io/pkg/htmlwidgets/man/saveWidget.html" target="_blank" rel="noopener"><code>saveWidget()</code></a> to save it. You can find the documentation <a href="https://www.rdocumentation.org/packages/htmlwidgets/versions/1.5.3/topics/saveWidget" target="_blank" rel="noopener">here</a>.</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='c'># assign ggplotly plot to an object</span>
<span class='nv'>ggplotly_to_save</span> <span class='o'>&lt;-</span> <span class='nf'><a href='https://docs.ropensci.org/plotly/reference/ggplotly.html'>ggplotly</a></span><span class='o'>(</span><span class='nv'>bill_depth_length</span>,
                             tooltip <span class='o'>=</span> <span class='s'>"text"</span><span class='o'>)</span>

<span class='c'># save</span>
<span class='nf'><a href='https://rdrr.io/pkg/htmlwidgets/man/saveWidget.html'>saveWidget</a></span><span class='o'>(</span>widget <span class='o'>=</span> <span class='nv'>ggplotly_to_save</span>,
           file <span class='o'>=</span> <span class='s'>"ggplotlying.html"</span><span class='o'>)</span>
</code></pre>
</div>
<br>
<hr>
<h2 id="breakout-rooms">Breakout rooms</h2>
<p>We are going to use the birds dataset from previous weeks, and gapminder data for the bonus.</p>
<p>Let&rsquo;s grab the birds data.</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='c'># create directory for data to go</span>
<span class='nf'><a href='https://rdrr.io/r/base/files2.html'>dir.create</a></span><span class='o'>(</span><span class='s'>'data/birds/'</span>, recursive <span class='o'>=</span> <span class='kc'>TRUE</span><span class='o'>)</span>

<span class='c'># preparing to download</span>
<span class='c'># denote bird file url</span>
<span class='nv'>birds_url</span> <span class='o'>&lt;-</span>
<span class='s'>'https://raw.githubusercontent.com/biodash/biodash.github.io/master/assets/data/birds/backyard-birds_Ohio.tsv'</span>
<span class='c'># denote file name</span>
<span class='nv'>birds_file</span> <span class='o'>&lt;-</span> <span class='s'>'data/birds/backyard-birds_Ohio.tsv'</span>

<span class='c'># get file</span>
<span class='nf'><a href='https://rdrr.io/r/utils/download.file.html'>download.file</a></span><span class='o'>(</span>url <span class='o'>=</span> <span class='nv'>birds_url</span>, 
              destfile <span class='o'>=</span> <span class='nv'>birds_file</span><span class='o'>)</span>
</code></pre>
</div>
<p>Read in data.</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='c'># read in birds data</span>
<span class='nv'>birds</span> <span class='o'>&lt;-</span> <span class='nf'>read_tsv</span><span class='o'>(</span>file <span class='o'>=</span> <span class='s'>'data/birds/backyard-birds_Ohio.tsv'</span><span class='o'>)</span>

<span class='c'>#&gt; </span>
<span class='c'>#&gt; <span style='color: #00BBBB;'>──</span><span> </span><span style='font-weight: bold;'>Column specification</span><span> </span><span style='color: #00BBBB;'>────────────────────────────────────────────────────────</span></span>
<span class='c'>#&gt; cols(</span>
<span class='c'>#&gt;   class = <span style='color: #BB0000;'>col_character()</span><span>,</span></span>
<span class='c'>#&gt;   order = <span style='color: #BB0000;'>col_character()</span><span>,</span></span>
<span class='c'>#&gt;   family = <span style='color: #BB0000;'>col_character()</span><span>,</span></span>
<span class='c'>#&gt;   genus = <span style='color: #BB0000;'>col_character()</span><span>,</span></span>
<span class='c'>#&gt;   species = <span style='color: #BB0000;'>col_character()</span><span>,</span></span>
<span class='c'>#&gt;   locality = <span style='color: #BB0000;'>col_character()</span><span>,</span></span>
<span class='c'>#&gt;   stateProvince = <span style='color: #BB0000;'>col_character()</span><span>,</span></span>
<span class='c'>#&gt;   decimalLatitude = <span style='color: #00BB00;'>col_double()</span><span>,</span></span>
<span class='c'>#&gt;   decimalLongitude = <span style='color: #00BB00;'>col_double()</span><span>,</span></span>
<span class='c'>#&gt;   eventDate = <span style='color: #0000BB;'>col_datetime(format = "")</span><span>,</span></span>
<span class='c'>#&gt;   species_en = <span style='color: #BB0000;'>col_character()</span><span>,</span></span>
<span class='c'>#&gt;   range = <span style='color: #BB0000;'>col_character()</span></span>
<span class='c'>#&gt; )</span>
</code></pre>
</div>
<p>Look at your new df.</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='nf'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='o'>(</span><span class='nv'>birds</span><span class='o'>)</span>

<span class='c'>#&gt; <span style='color: #555555;'># A tibble: 6 x 12</span></span>
<span class='c'>#&gt;   class order family genus species locality stateProvince decimalLatitude</span>
<span class='c'>#&gt;   <span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>  </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>   </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>    </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>                   </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span></span>
<span class='c'>#&gt; <span style='color: #555555;'>1</span><span> Aves  Pass… Corvi… Cyan… Cyanoc… 44805 A… Ohio                     40.9</span></span>
<span class='c'>#&gt; <span style='color: #555555;'>2</span><span> Aves  Pass… Corvi… Cyan… Cyanoc… 45244 C… Ohio                     39.1</span></span>
<span class='c'>#&gt; <span style='color: #555555;'>3</span><span> Aves  Pass… Corvi… Cyan… Cyanoc… 44132 E… Ohio                     41.6</span></span>
<span class='c'>#&gt; <span style='color: #555555;'>4</span><span> Aves  Pass… Corvi… Cyan… Cyanoc… 45242 C… Ohio                     39.2</span></span>
<span class='c'>#&gt; <span style='color: #555555;'>5</span><span> Aves  Pass… Corvi… Cyan… Cyanoc… 45246 C… Ohio                     39.3</span></span>
<span class='c'>#&gt; <span style='color: #555555;'>6</span><span> Aves  Pass… Corvi… Cyan… Cyanoc… 44484 W… Ohio                     41.2</span></span>
<span class='c'>#&gt; <span style='color: #555555;'># … with 4 more variables: decimalLongitude </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span style='color: #555555;'>, eventDate </span><span style='color: #555555;font-style: italic;'>&lt;dttm&gt;</span><span style='color: #555555;'>,</span></span>
<span class='c'>#&gt; <span style='color: #555555;'>#   species_en </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span style='color: #555555;'>, range </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span></span>
</code></pre>
</div>
<p>For a knitted HTML with answers, you can also see <a href="/codeclub/15_plotly/Plotly-with-answers.html#31_Exercise_1">this page</a>.</p>
<h3 id="exercise-1">Exercise 1</h3>
<div class="puzzle">
<div>
<p>Filter your new <code>birds</code> df to only include bald eagles. Check to see how many bald eagle sightings there were in Ohio.</p>
<details>
<summary>
Hints (click here)
</summary>
Try using a [`filter()`](https://dplyr.tidyverse.org/reference/filter.html), and consider filtering based on `species_en` <br>
</details>
<br>
<details>
<summary>
Solutions (click here)
</summary>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='nv'>bald_eagle</span> <span class='o'>&lt;-</span> <span class='nv'>birds</span> <span class='o'>%&gt;%</span>
  <span class='nf'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='o'>(</span><span class='nv'>species_en</span> <span class='o'>==</span> <span class='s'>"Bald Eagle"</span><span class='o'>)</span>

<span class='c'># what do we have?</span>
<span class='nf'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='o'>(</span><span class='nv'>bald_eagle</span><span class='o'>)</span>

<span class='c'>#&gt; <span style='color: #555555;'># A tibble: 6 x 12</span></span>
<span class='c'>#&gt;   class order family genus species locality stateProvince decimalLatitude</span>
<span class='c'>#&gt;   <span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>  </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>   </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>    </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>                   </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span></span>
<span class='c'>#&gt; <span style='color: #555555;'>1</span><span> Aves  Acci… Accip… Hali… Haliae… Mentor   Ohio                     41.7</span></span>
<span class='c'>#&gt; <span style='color: #555555;'>2</span><span> Aves  Acci… Accip… Hali… Haliae… 45742 L… Ohio                     39.3</span></span>
<span class='c'>#&gt; <span style='color: #555555;'>3</span><span> Aves  Acci… Accip… Hali… Haliae… Morelan… Ohio                     41.4</span></span>
<span class='c'>#&gt; <span style='color: #555555;'>4</span><span> Aves  Acci… Accip… Hali… Haliae… Eastlake Ohio                     41.7</span></span>
<span class='c'>#&gt; <span style='color: #555555;'>5</span><span> Aves  Acci… Accip… Hali… Haliae… 44060 M… Ohio                     41.7</span></span>
<span class='c'>#&gt; <span style='color: #555555;'>6</span><span> Aves  Acci… Accip… Hali… Haliae… 44839 H… Ohio                     41.4</span></span>
<span class='c'>#&gt; <span style='color: #555555;'># … with 4 more variables: decimalLongitude </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span style='color: #555555;'>, eventDate </span><span style='color: #555555;font-style: italic;'>&lt;dttm&gt;</span><span style='color: #555555;'>,</span></span>
<span class='c'>#&gt; <span style='color: #555555;'>#   species_en </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span style='color: #555555;'>, range </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span></span>


<span class='c'># check our df dimensions</span>
<span class='nf'><a href='https://rdrr.io/r/base/dim.html'>dim</a></span><span class='o'>(</span><span class='nv'>bald_eagle</span><span class='o'>)</span>

<span class='c'>#&gt; [1] 381  12</span>
</code></pre>
</div>
</details>
<br>
</div>
</div>
<hr>
<h3 id="exercise-2">Exercise 2</h3>
<div class="puzzle">
<div>
<p>Create a map that plots all the bald eagles found around Ohio. Color the points blue. Make sure the aspect ratio of Ohio looks reasonable to you.</p>
<details>
<summary>
Hints (click here)
</summary>
Go back to Sessions [11](https://biodash.github.io/codeclub/11_ggplot-maps/) and [12](https://biodash.github.io/codeclub/12_loops/) to re-remember how maps work. Don't forget to call [`library(maps)`](https://rdrr.io/r/base/library.html). <br>
</details>
<br>
<details>
<summary>
Solutions (click here)
</summary>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='kr'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='o'>(</span><span class='nv'>maps</span><span class='o'>)</span>

<span class='c'>#&gt; </span>
<span class='c'>#&gt; Attaching package: 'maps'</span>

<span class='c'>#&gt; The following object is masked from 'package:purrr':</span>
<span class='c'>#&gt; </span>
<span class='c'>#&gt;     map</span>


<span class='c'># get map of the states</span>
<span class='nv'>states</span> <span class='o'>&lt;-</span> <span class='nf'>map_data</span><span class='o'>(</span><span class='s'>"state"</span><span class='o'>)</span>

<span class='c'># filter states to only include ohio</span>
<span class='nv'>ohio</span> <span class='o'>&lt;-</span> <span class='nv'>states</span> <span class='o'>%&gt;%</span>
  <span class='nf'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='o'>(</span><span class='nv'>region</span> <span class='o'>==</span> <span class='s'>"ohio"</span><span class='o'>)</span>

<span class='c'># plot</span>
<span class='nf'>ggplot</span><span class='o'>(</span>data <span class='o'>=</span> <span class='nv'>ohio</span>,
       <span class='nf'>aes</span><span class='o'>(</span>x <span class='o'>=</span> <span class='nv'>long</span>, y <span class='o'>=</span> <span class='nv'>lat</span>, group <span class='o'>=</span> <span class='nv'>group</span><span class='o'>)</span><span class='o'>)</span> <span class='o'>+</span>
  <span class='nf'>geom_polygon</span><span class='o'>(</span>color <span class='o'>=</span> <span class='s'>"black"</span>, fill <span class='o'>=</span> <span class='s'>"white"</span><span class='o'>)</span> <span class='o'>+</span>   
  <span class='nf'>geom_point</span><span class='o'>(</span>data <span class='o'>=</span> <span class='nv'>bald_eagle</span>,                 
             <span class='nf'>aes</span><span class='o'>(</span>x <span class='o'>=</span> <span class='nv'>decimalLongitude</span>, y <span class='o'>=</span> <span class='nv'>decimalLatitude</span>, group <span class='o'>=</span> <span class='kc'>NULL</span><span class='o'>)</span>,
             color <span class='o'>=</span> <span class='s'>"blue"</span>, alpha <span class='o'>=</span> <span class='m'>0.2</span><span class='o'>)</span> <span class='o'>+</span>
  <span class='nf'>coord_fixed</span><span class='o'>(</span><span class='m'>1.2</span><span class='o'>)</span> <span class='o'>+</span>
  <span class='nf'>labs</span><span class='o'>(</span>title <span class='o'>=</span> <span class='s'>'Bald Eagles Around Ohio'</span><span class='o'>)</span>

</code></pre>
<p><img src="figs/unnamed-chunk-29-1.png" width="700px" style="display: block; margin: auto;" /></p>
</div>
</details>
<br>
</div>
</div>
<hr>
<h3 id="exercise-3">Exercise 3</h3>
<div class="puzzle">
<div>
<p>Make your plot interactive so you can hover and and see the locality of each bald eagle observation.</p>
<details>
<summary>
Hints (click here)
</summary>
You may want to call `text` within `geom_point()`. <br>
</details>
<br>
<details>
<summary>
Solutions (click here)
</summary>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='nv'>bald_eagles_ohio</span> <span class='o'>&lt;-</span> 
  <span class='nf'>ggplot</span><span class='o'>(</span>data <span class='o'>=</span> <span class='nv'>ohio</span>,
         <span class='nf'>aes</span><span class='o'>(</span>x <span class='o'>=</span> <span class='nv'>long</span>, y <span class='o'>=</span> <span class='nv'>lat</span>, group <span class='o'>=</span> <span class='nv'>group</span><span class='o'>)</span><span class='o'>)</span> <span class='o'>+</span>
  <span class='nf'>geom_polygon</span><span class='o'>(</span>color <span class='o'>=</span> <span class='s'>"black"</span>, fill <span class='o'>=</span> <span class='s'>"white"</span><span class='o'>)</span> <span class='o'>+</span>   
  <span class='nf'>geom_point</span><span class='o'>(</span>data <span class='o'>=</span> <span class='nv'>bald_eagle</span>,                 
             <span class='nf'>aes</span><span class='o'>(</span>x <span class='o'>=</span> <span class='nv'>decimalLongitude</span>, y <span class='o'>=</span> <span class='nv'>decimalLatitude</span>, group <span class='o'>=</span> <span class='kc'>NULL</span>,
                 text <span class='o'>=</span> <span class='nv'>locality</span><span class='o'>)</span>,
             color <span class='o'>=</span> <span class='s'>"blue"</span>, alpha <span class='o'>=</span> <span class='m'>0.2</span><span class='o'>)</span> <span class='o'>+</span>
  <span class='nf'>coord_fixed</span><span class='o'>(</span><span class='m'>1.2</span><span class='o'>)</span> <span class='o'>+</span>
  <span class='nf'>labs</span><span class='o'>(</span>title <span class='o'>=</span> <span class='s'>'Bald Eagles Around Ohio'</span><span class='o'>)</span>

<span class='nf'><a href='https://docs.ropensci.org/plotly/reference/ggplotly.html'>ggplotly</a></span><span class='o'>(</span><span class='nv'>bald_eagles_ohio</span>,
         tooltip <span class='o'>=</span> <span class='s'>"text"</span><span class='o'>)</span>
</code></pre>
</div>
<div class="highlight">
</div>
<p><code>

<div id="chart-948257163" class="chart"></div>
<script>
  (function() {
    let a = setInterval( function() {
      if ( typeof window.Plotly === 'undefined' ) {
        return;
      }
      clearInterval( a );

      Plotly.d3.json("./ohio1.json", function(chart) {
        Plotly.plot('chart-948257163', chart.data, chart.layout, {responsive: true});
      });
    }, 500 );
  })();
</script></code></p>
</details>
<br>
</div>
</div>
<hr>
<h3 id="exercise-4">Exercise 4</h3>
<div class="puzzle">
<div>
<p>Change the hover text so that the background color is red, clean up your axis labels, and make all the fonts for the plot Arial.</p>
<details>
<summary>
Hints (click here)
</summary>
You can set fonts either within your `ggplot()` call, or setting `font` within [`layout()`](https://docs.ropensci.org/plotly/reference/layout.html). You can customize the hover label with [`style()`](https://docs.ropensci.org/plotly/reference/style.html). <br>
</details>
<br>
<details>
<summary>
Solutions (click here)
</summary>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='c'># setting fonts for the plot</span>
<span class='nv'>eagle_font</span> <span class='o'>&lt;-</span> <span class='nf'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='o'>(</span>
  family <span class='o'>=</span> <span class='s'>"Arial"</span>,
  size <span class='o'>=</span> <span class='m'>15</span>,
  color <span class='o'>=</span> <span class='s'>"white"</span><span class='o'>)</span>

<span class='c'># setting hover label specs</span>
<span class='nv'>eagle_label</span> <span class='o'>&lt;-</span> <span class='nf'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='o'>(</span>
  bgcolor <span class='o'>=</span> <span class='s'>"red"</span>,
  bordercolor <span class='o'>=</span> <span class='s'>"transparent"</span>,
  font <span class='o'>=</span> <span class='nv'>eagle_font</span><span class='o'>)</span> <span class='c'># we can do this bc we already set font</span>

<span class='nv'>bald_eagles_ohio</span> <span class='o'>&lt;-</span> 
  <span class='nf'>ggplot</span><span class='o'>(</span>data <span class='o'>=</span> <span class='nv'>ohio</span>,
         <span class='nf'>aes</span><span class='o'>(</span>x <span class='o'>=</span> <span class='nv'>long</span>, y <span class='o'>=</span> <span class='nv'>lat</span>, group <span class='o'>=</span> <span class='nv'>group</span><span class='o'>)</span><span class='o'>)</span> <span class='o'>+</span>
  <span class='nf'>geom_polygon</span><span class='o'>(</span>color <span class='o'>=</span> <span class='s'>"black"</span>, fill <span class='o'>=</span> <span class='s'>"white"</span><span class='o'>)</span> <span class='o'>+</span>   
  <span class='nf'>geom_point</span><span class='o'>(</span>data <span class='o'>=</span> <span class='nv'>bald_eagle</span>,                 
             <span class='nf'>aes</span><span class='o'>(</span>x <span class='o'>=</span> <span class='nv'>decimalLongitude</span>, y <span class='o'>=</span> <span class='nv'>decimalLatitude</span>, group <span class='o'>=</span> <span class='kc'>NULL</span>,
                 text <span class='o'>=</span> <span class='nv'>locality</span><span class='o'>)</span>,
             color <span class='o'>=</span> <span class='s'>"blue"</span>, alpha <span class='o'>=</span> <span class='m'>0.2</span><span class='o'>)</span> <span class='o'>+</span>
  <span class='nf'>coord_fixed</span><span class='o'>(</span><span class='m'>1.2</span><span class='o'>)</span> <span class='o'>+</span>
  <span class='nf'>labs</span><span class='o'>(</span>title <span class='o'>=</span> <span class='s'>'Bald Eagles Around Ohio'</span>,
       x <span class='o'>=</span> <span class='s'>"Latitude"</span>,
       y <span class='o'>=</span> <span class='s'>"Longitude"</span><span class='o'>)</span>

<span class='c'># amending our ggplotly call to include new fonts and hover label specs</span>
<span class='nf'><a href='https://docs.ropensci.org/plotly/reference/ggplotly.html'>ggplotly</a></span><span class='o'>(</span><span class='nv'>bald_eagles_ohio</span>, tooltip <span class='o'>=</span> <span class='s'>"text"</span><span class='o'>)</span> <span class='o'>%&gt;%</span>
  <span class='nf'><a href='https://docs.ropensci.org/plotly/reference/style.html'>style</a></span><span class='o'>(</span>hoverlabel <span class='o'>=</span> <span class='nv'>eagle_label</span><span class='o'>)</span> <span class='o'>%&gt;%</span>
  <span class='nf'><a href='https://docs.ropensci.org/plotly/reference/layout.html'>layout</a></span><span class='o'>(</span>font <span class='o'>=</span> <span class='nv'>eagle_font</span><span class='o'>)</span>
</code></pre>
</div>
<div class="highlight">
</div>
<p><code>

<div id="chart-267893541" class="chart"></div>
<script>
  (function() {
    let a = setInterval( function() {
      if ( typeof window.Plotly === 'undefined' ) {
        return;
      }
      clearInterval( a );

      Plotly.d3.json("./ohio2.json", function(chart) {
        Plotly.plot('chart-267893541', chart.data, chart.layout, {responsive: true});
      });
    }, 500 );
  })();
</script></code></p>
</details>
<br>
</div>
</div>
<br>
<hr>
<h2 id="bonus">Bonus</h2>
<h3 id="bonus-1">Bonus 1</h3>
<div class="puzzle">
<div>
<p>Let&rsquo;s go back to the Gapminder data we looked at in the instructional part of <a href="https://biodash.github.io/codeclub/10_faceting-animating/" target="_blank" rel="noopener">Session 10</a> on faceting, animating, and multi-plotting.</p>
<p>Make a bubble-style plot that shows the life expectancy vs. GDP per capita over 1952 to 2007 for all countries. Color by continent, and indicate population by size. Use your knowledge of making plots to alter it such that you think it is descriptive and aesthetic.</p>
<details>
<summary>
Hints (click here)
</summary>
<p>Set <code>text</code> to what you want to hover (try adding multiple variables in there!), play around with <code>theme</code> and scaling, change fonts and aesthetics until you are pleased. You can download the <code>gapminder</code> data like this:</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='c'># install.packages("gapminder") # if you weren't at Session 10</span>
<span class='kr'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='o'>(</span><span class='nv'><a href='https://github.com/jennybc/gapminder'>gapminder</a></span><span class='o'>)</span>
<span class='nf'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='o'>(</span><span class='nv'>gapminder</span><span class='o'>)</span>

<span class='c'>#&gt; <span style='color: #555555;'># A tibble: 6 x 6</span></span>
<span class='c'>#&gt;   country     continent  year lifeExp      pop gdpPercap</span>
<span class='c'>#&gt;   <span style='color: #555555;font-style: italic;'>&lt;fct&gt;</span><span>       </span><span style='color: #555555;font-style: italic;'>&lt;fct&gt;</span><span>     </span><span style='color: #555555;font-style: italic;'>&lt;int&gt;</span><span>   </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span>    </span><span style='color: #555555;font-style: italic;'>&lt;int&gt;</span><span>     </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span></span>
<span class='c'>#&gt; <span style='color: #555555;'>1</span><span> Afghanistan Asia       </span><span style='text-decoration: underline;'>1</span><span>952    28.8  8</span><span style='text-decoration: underline;'>425</span><span>333      779.</span></span>
<span class='c'>#&gt; <span style='color: #555555;'>2</span><span> Afghanistan Asia       </span><span style='text-decoration: underline;'>1</span><span>957    30.3  9</span><span style='text-decoration: underline;'>240</span><span>934      821.</span></span>
<span class='c'>#&gt; <span style='color: #555555;'>3</span><span> Afghanistan Asia       </span><span style='text-decoration: underline;'>1</span><span>962    32.0 10</span><span style='text-decoration: underline;'>267</span><span>083      853.</span></span>
<span class='c'>#&gt; <span style='color: #555555;'>4</span><span> Afghanistan Asia       </span><span style='text-decoration: underline;'>1</span><span>967    34.0 11</span><span style='text-decoration: underline;'>537</span><span>966      836.</span></span>
<span class='c'>#&gt; <span style='color: #555555;'>5</span><span> Afghanistan Asia       </span><span style='text-decoration: underline;'>1</span><span>972    36.1 13</span><span style='text-decoration: underline;'>079</span><span>460      740.</span></span>
<span class='c'>#&gt; <span style='color: #555555;'>6</span><span> Afghanistan Asia       </span><span style='text-decoration: underline;'>1</span><span>977    38.4 14</span><span style='text-decoration: underline;'>880</span><span>372      786.</span></span>
</code></pre>
</div>
<br>
</details>
<br>
<details>
<summary>
Solutions (click here)
</summary>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='nv'>gapminder_font</span> <span class='o'>&lt;-</span> <span class='nf'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='o'>(</span>
  family <span class='o'>=</span> <span class='s'>"Roboto Condensed"</span><span class='o'>)</span>

<span class='nv'>gapminder_bubble</span> <span class='o'>&lt;-</span> <span class='nv'>gapminder</span> <span class='o'>%&gt;%</span>
  <span class='nf'>ggplot</span><span class='o'>(</span><span class='nf'>aes</span><span class='o'>(</span>x <span class='o'>=</span> <span class='nv'>gdpPercap</span>, y <span class='o'>=</span> <span class='nv'>lifeExp</span>, 
             fill <span class='o'>=</span> <span class='nv'>continent</span>, size <span class='o'>=</span> <span class='nv'>pop</span>, 
             text <span class='o'>=</span> <span class='nf'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span><span class='o'>(</span>
               <span class='s'>"Country:"</span>, <span class='nv'>country</span>,
               <span class='s'>"\nLife expectancy:"</span>, <span class='nf'><a href='https://rdrr.io/r/base/Round.html'>round</a></span><span class='o'>(</span><span class='nv'>lifeExp</span>,<span class='m'>1</span><span class='o'>)</span>,
               <span class='s'>"\nGDP per capita:"</span>, <span class='nf'><a href='https://rdrr.io/r/base/Round.html'>round</a></span><span class='o'>(</span><span class='nv'>gdpPercap</span>,<span class='m'>0</span><span class='o'>)</span><span class='o'>)</span><span class='o'>)</span><span class='o'>)</span> <span class='o'>+</span>
  <span class='nf'>geom_point</span><span class='o'>(</span><span class='nf'>aes</span><span class='o'>(</span>frame <span class='o'>=</span> <span class='nv'>year</span><span class='o'>)</span>, color <span class='o'>=</span> <span class='s'>"black"</span>, shape <span class='o'>=</span> <span class='m'>21</span>, stroke <span class='o'>=</span> <span class='m'>0.2</span><span class='o'>)</span> <span class='o'>+</span>
  <span class='nf'>scale_x_log10</span><span class='o'>(</span><span class='o'>)</span> <span class='o'>+</span>
  <span class='nf'>theme_minimal</span><span class='o'>(</span><span class='o'>)</span> <span class='o'>+</span>
  <span class='nf'>theme</span><span class='o'>(</span>plot.title <span class='o'>=</span> <span class='nf'>element_text</span><span class='o'>(</span>size <span class='o'>=</span> <span class='m'>18</span><span class='o'>)</span><span class='o'>)</span> <span class='o'>+</span>
  <span class='nf'>labs</span><span class='o'>(</span>title <span class='o'>=</span> <span class='s'>"Changing Life Expectancy and GDP Per Capita Worldwide \nFrom 1952 to 2007"</span>,
       x <span class='o'>=</span> <span class='s'>"GDP per capita (in International Dollars)"</span>,
       y <span class='o'>=</span> <span class='s'>"Life Expectancy (years)"</span>,
       fill <span class='o'>=</span> <span class='s'>""</span>,
       size <span class='o'>=</span> <span class='s'>""</span><span class='o'>)</span>

<span class='nf'><a href='https://docs.ropensci.org/plotly/reference/ggplotly.html'>ggplotly</a></span><span class='o'>(</span><span class='nv'>gapminder_bubble</span>, 
         tooltip <span class='o'>=</span> <span class='nf'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='o'>(</span><span class='s'>"text"</span><span class='o'>)</span><span class='o'>)</span> <span class='o'>%&gt;%</span>
  <span class='nf'><a href='https://docs.ropensci.org/plotly/reference/layout.html'>layout</a></span><span class='o'>(</span>font <span class='o'>=</span> <span class='nv'>gapminder_font</span><span class='o'>)</span>
</code></pre>
</div>
<div class="highlight">
</div>
<p><code>

<div id="chart-863259471" class="chart"></div>
<script>
  (function() {
    let a = setInterval( function() {
      if ( typeof window.Plotly === 'undefined' ) {
        return;
      }
      clearInterval( a );

      Plotly.d3.json("./gapminder.json", function(chart) {
        Plotly.plot('chart-863259471', chart.data, chart.layout, {responsive: true});
      });
    }, 500 );
  })();
</script></code></p>
<p><strong>Note:</strong> I know this plot isn&rsquo;t animating &ndash; for an animated version, <a href="/codeclub/15_plotly/Plotly-with-answers.html#4_Bonus">see this page</a>. Also, if you do this in R yourself, you will find the code works.</p>
</details>
<br>
</div>
</div>
<hr>

                    </div>

                    <br>

                    








<div class="share-box" aria-hidden="true">
  <ul class="share">
    
      
      
      
        
      
      
      
      <li>
        <a href="https://twitter.com/intent/tweet?url=https://biodash.github.io/codeclub/15_plotly/&amp;text=Session%2015:%20Plotly" target="_blank" rel="noopener" class="share-btn-twitter">
          <i class="fab fa-twitter"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.facebook.com/sharer.php?u=https://biodash.github.io/codeclub/15_plotly/&amp;t=Session%2015:%20Plotly" target="_blank" rel="noopener" class="share-btn-facebook">
          <i class="fab fa-facebook"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="mailto:?subject=Session%2015:%20Plotly&amp;body=https://biodash.github.io/codeclub/15_plotly/" target="_blank" rel="noopener" class="share-btn-email">
          <i class="fas fa-envelope"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.linkedin.com/shareArticle?url=https://biodash.github.io/codeclub/15_plotly/&amp;title=Session%2015:%20Plotly" target="_blank" rel="noopener" class="share-btn-linkedin">
          <i class="fab fa-linkedin-in"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="whatsapp://send?text=Session%2015:%20Plotly%20https://biodash.github.io/codeclub/15_plotly/" target="_blank" rel="noopener" class="share-btn-whatsapp">
          <i class="fab fa-whatsapp"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://service.weibo.com/share/share.php?url=https://biodash.github.io/codeclub/15_plotly/&amp;title=Session%2015:%20Plotly" target="_blank" rel="noopener" class="share-btn-weibo">
          <i class="fab fa-weibo"></i>
        </a>
      </li>
    
  </ul>
</div>











  
  
    



  
  
  
  
  
  <div class="media author-card content-widget-hr">
    
      
      <a href="/authors/jessica-cooperstone/"><img class="avatar mr-3 avatar-circle" src="/authors/jessica-cooperstone/avatar_hub3c8c373219f94b7f8251ccae20f3fcb_68385_270x270_fill_q90_lanczos_center.jpg" alt="Jessica Cooperstone"></a>
    

    <div class="media-body">
      <h5 class="card-title"><a href="/authors/jessica-cooperstone/">Jessica Cooperstone</a></h5>
      <h6 class="card-subtitle">Assistant Professor at HCS</h6>
      
      <ul class="network-icon" aria-hidden="true">
  
    
    
    
      
    
    
    
    
    
    <li>
      <a href="mailto:cooperstone.1@osu.edu" >
        <i class="fas fa-envelope"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://twitter.com/CooperstoneLab" target="_blank" rel="noopener">
        <i class="fab fa-twitter"></i>
      </a>
    </li>
  
    
    
    
    
    
    
    
      
    
    <li>
      <a href="https://scholar.google.com/citations?user=d-FkQNQAAAAJ&amp;hl=en" target="_blank" rel="noopener">
        <i class="ai ai-google-scholar"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://github.com/jcooperstone" target="_blank" rel="noopener">
        <i class="fab fa-github"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://phytochemicals.osu.edu/" target="_blank" rel="noopener">
        <i class="fas fa-external-link-alt"></i>
      </a>
    </li>
  
</ul>

    </div>
  </div>


  
















                    <br>

                    <hr class="separator">

                    <div class="clearfix">
                        
                        
                        <span class="previous-link">
                            <a href="https://biodash.github.io/codeclub/14_functions/">← Session 14: Writing your own Functions</a>
                        </span>
                        
                        
                        
                        
                        <span class="next-link">
                            <a href="https://biodash.github.io/codeclub/16_lubridate/">Session 16: lubridate →</a>
                        </span>
                        
                        
                    </div>

                    <hr class="separator">

                </div>

            </article>

            
        </main>
    </div>
</div>

  </div>

  <div class="page-footer">
    
    
    <div class="container">
      <footer class="site-footer">
    
    <p class="powered-by">
      <a href="/license/">LICENSE: CC-BY-SA <br> <i class="fab fa-creative-commons fa-2x"></i><i class="fab fa-creative-commons-by fa-2x"></i><i class="fab fa-creative-commons-sa fa-2x"></i> </a><br>
    </p>
    
</footer>
    </div>
    
  </div>

  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

      

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/instant.page/5.1.0/instantpage.min.js" integrity="sha512-1+qUtKoh9XZW7j+6LhRMAyOrgSQKenQ4mluTR+cvxXjP1Z54RxZuzstR/H9kgPXQsVB8IW7DMDFUJpzLjvhGSQ==" crossorigin="anonymous"></script>

      
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      

      
      

      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/highlight.min.js" integrity="sha512-TDKKr+IvoqZnPzc3l35hdjpHD0m+b2EC2SrLEgKDRWpxf2rFCxemkgvJ5kfU48ip+Y+m2XVKyOCD85ybtlZDmw==" crossorigin="anonymous"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/r.min.js"></script>
        
      

    

    
    
    
      <script async defer src="https://maps.googleapis.com/maps/api/js?key="></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/gmaps.js/0.4.25/gmaps.min.js" integrity="sha256-7vjlAeb8OaTrCXZkCNun9djzuB2owUsaO72kXaFDBJs=" crossorigin="anonymous"></script>
      
    

    
    

    
    
    
      
      <script id="search-hit-fuse-template" type="text/x-template">
        <div class="search-hit" id="summary-{{key}}">
          <div class="search-hit-content">
            <div class="search-hit-name">
              <a href="{{relpermalink}}">{{title}}</a>
              <div class="article-metadata search-hit-type">{{type}}</div>
              <p class="search-hit-description">{{snippet}}</p>
            </div>
          </div>
        </div>
      </script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>
      
    

    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/plotly.js/1.55.2/plotly.min.js" integrity="sha512-gttPT9uTUiaLBj6XZdcB0ydKXiDaBwstInkN4Qvp1Nz3iwXNc8TTQplIEPIGxyJBDqERjwkKxf2OyO47/0EHbQ==" crossorigin="anonymous"></script>
    

    
    
    
    

    
    <script src="/js/bootstrap.bundle.min.6aed84840afc03ab4d5750157f69c120.js"></script>

    
    
      
      
      
      
      
      
      
    

    
    
    
    
    
    
    
    
      
      
    
    
      
    
    <script src="/en/js/wowchemy.min.2f16af175a3ec51b41b36bb4934b1cf7.js"></script>

    






</body>
</html>
