<!DOCTYPE html><html lang="en-us" >

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  
  
  
    <meta name="generator" content="Wowchemy 5.0.0-beta.3 for Hugo" />
  

  

  
  

  
  
  
  
  
    
    
    
  
  

  <meta name="author" content="Jelmer Poelstra" />

  
  
  
    
  
  <meta name="description" content="In this first session on strategies for repeating operations without copy-pasting your code, we will focus on vectorization." />

  
  <link rel="alternate" hreflang="en-us" href="https://biodash.github.io/codeclub/s03e07_vectorization/" />

  







  




  
  
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  

  
  
  
    <meta name="theme-color" content="#3f51b5" />
  

  
  
    
    <script src="/js/mathjax-config.js"></script>
  

  
  
  
  
    
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha256-FMvZuGapsJLjouA6k7Eo2lusoAX9i0ShlWFG6qt7SLc=" crossorigin="anonymous">

    
    

    
    
    
      
    
    
      
      
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/styles/github.min.css" crossorigin="anonymous" title="hl-light" media="print" onload="this.media='all'">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/styles/github.min.css" crossorigin="anonymous" title="hl-dark" media="print" onload="this.media='all'" disabled>
      
    

    
    
    

    

    
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js" integrity="" crossorigin="anonymous" async></script>
      
    
      
      

      
      

      
    
      
      

      
      

      
    
  

  
  
  
    
      
      <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap">
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap" media="print" onload="this.media='all'">
    
  

  
  
  
  
  
  <link rel="stylesheet" href="/css/wowchemy.80f9a276c6100914c616a06e45ba8d09.css" />

  




<script async src="https://www.googletagmanager.com/gtag/js?id=G-9F9CQ7P0DX"></script>
<script>
  window.dataLayer = window.dataLayer || [];

  function gtag() {
      dataLayer.push(arguments);
  }

  function trackOutboundLink(url, target) {
    gtag('event', 'click', {
         'event_category': 'outbound',
         'event_label': url,
         'transport_type': 'beacon',
         'event_callback': function () {
           if (target !== '_blank') {
             document.location = url;
           }
         }
    });
    console.debug("Outbound link clicked: " + url);
  }

  function onClickCallback(event) {
    if ((event.target.tagName !== 'A') || (event.target.host === window.location.host)) {
      return;
    }
    trackOutboundLink(event.target, event.target.getAttribute('target'));  
  }

  gtag('js', new Date());
  gtag('config', 'G-9F9CQ7P0DX', {});
  gtag('set', {'cookie_flags': 'SameSite=None;Secure'});

  
  document.addEventListener('click', onClickCallback, false);
</script>


  

  

  




  
  
  

  

  
    <link rel="manifest" href="/index.webmanifest" />
  

  <link rel="icon" type="image/png" href="/media/icon_hucc2cf774636a7e386557c89fa75ff618_191491_32x32_fill_lanczos_center_2.png" />
  <link rel="apple-touch-icon" type="image/png" href="/media/icon_hucc2cf774636a7e386557c89fa75ff618_191491_180x180_fill_lanczos_center_2.png" />

  <link rel="canonical" href="https://biodash.github.io/codeclub/s03e07_vectorization/" />

  
  
  
  
  
  
  
  
    
    
  
  
  <meta property="twitter:card" content="summary" />
  
  <meta property="og:site_name" content="BioDASH" />
  <meta property="og:url" content="https://biodash.github.io/codeclub/s03e07_vectorization/" />
  <meta property="og:title" content="S03E07: Avoid Copy-pasting Code - Intro and Vectorization | BioDASH" />
  <meta property="og:description" content="In this first session on strategies for repeating operations without copy-pasting your code, we will focus on vectorization." /><meta property="og:image" content="https://biodash.github.io/media/logo_hu6407506e646a281542ecb299640680ce_37988_300x300_fit_lanczos_2.png" />
    <meta property="twitter:image" content="https://biodash.github.io/media/logo_hu6407506e646a281542ecb299640680ce_37988_300x300_fit_lanczos_2.png" /><meta property="og:locale" content="en-us" />
  
    
      <meta
        property="article:published_time"
        content="2022-02-23T00:00:00&#43;00:00"
      />
    
    <meta property="article:modified_time" content="2022-02-23T19:09:23-05:00">
  

  



  

  

  <link rel='stylesheet' href='/css/highlight-light.css' title='hl-light'>
<link rel='stylesheet' href='/css/highlight-dark.css' title='hl-dark' disabled>



  <title>S03E07: Avoid Copy-pasting Code - Intro and Vectorization | BioDASH</title>
</head>


<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" class="page-wrapper   " data-wc-page-id="0403b68b4d512bb7704a52031b695b1b" >

  
  
  
  
  
  
  
  
  <script src="/js/wowchemy-init.min.7a224883d792570fd34d30c7134eace3.js"></script>

  


<aside class="search-modal" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#" aria-label="Close"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="Search..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search" class="form-control"
        aria-label="Search...">
        
      </div>

      
      

      

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>



  <div class="page-header">
    











  


<nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
  <div class="container-xl">

    
    <div class="d-none d-lg-inline-flex">
      <a class="navbar-brand" href="/"><img src="/media/logo_hu6407506e646a281542ecb299640680ce_37988_0x70_resize_lanczos_2.png" alt="BioDASH"></a>
    </div>
    

    
    <button type="button" class="navbar-toggler" data-toggle="collapse"
            data-target="#navbar-content" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
    <span><i class="fas fa-bars"></i></span>
    </button>
    

    
    <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
      <a class="navbar-brand" href="/"><img src="/media/logo_hu6407506e646a281542ecb299640680ce_37988_0x70_resize_lanczos_2.png" alt="BioDASH"></a>
    </div>
    

    
    
    <div class="navbar-collapse main-menu-item collapse justify-content-start" id="navbar-content">

      
      <ul class="navbar-nav d-md-inline-flex">
        

        
        <li class="nav-item dropdown">
          <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true"><span>Code Club</span><span class="caret"></span>
          </a>
          <div class="dropdown-menu">
            
              <a class="dropdown-item" href="/codeclub-schedule/"><span>- <b>Schedule</b></span></a>
            
              <a class="dropdown-item" href="/codeclub-schedule/#previous-semesters"><span>- Past Sessions</span></a>
            
              <a class="dropdown-item" href="/codeclub-setup/"><span>- Computer Setup</span></a>
            
              <a class="dropdown-item" href="/"><span>------------------------</span></a>
            
              <a class="dropdown-item" href="/codeclub-suggest/"><span>- Suggest a Topic</span></a>
            
              <a class="dropdown-item" href="/"><span>-----------------------</span></a>
            
              <a class="dropdown-item" href="/codeclub-about/"><span>- <b>About Code Club & Join Us!</b></span></a>
            
          </div>
        </li>

        
        

        
        <li class="nav-item dropdown">
          <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true"><span>Tutorials & Resources</span><span class="caret"></span>
          </a>
          <div class="dropdown-menu">
            
              <a class="dropdown-item" href="/events/2023-02_aws/"><span>AWS Workshop (Feb '23)</span></a>
            
              <a class="dropdown-item" href="/"><span>---------------------</span></a>
            
              <a class="dropdown-item" href="/tutorials/r-resources-tips/"><span>- R Resources and Tips</span></a>
            
              <a class="dropdown-item" href="/"><span>--------------------</span></a>
            
              <a class="dropdown-item" href="https://mcic-osu.github.io/2020-12-microbiomics-workshop/"><span>- Metabarcoding workshop (Fall '20)</span></a>
            
              <a class="dropdown-item" href="/tutorials/2021-01_rnaseq/"><span>- RNA-seq intro meetings (Spring '21)</span></a>
            
              <a class="dropdown-item" href="https://mcic-osu.github.io/pracs-sp21/"><span>- Computing Course (Spring '21)</span></a>
            
              <a class="dropdown-item" href="https://mcic-osu.github.io/cl-workshop-22/"><span>- Command-line, shell scripting and OSC Workshop (Summer '22)</span></a>
            
              <a class="dropdown-item" href="/tutorials/2021-01_rnaseq/2023-04_aggenomics/presentation.html"><span>- Ag Genomics Lecture: Command-line computing (Apr '23)</span></a>
            
          </div>
        </li>

        
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/support/"><span>Bioinformatics Support</span></a>
        </li>

        
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/about/"><span>About</span></a>
        </li>

        
        

        

        
        
        
          
            
          
        

        

        
        
        
        

        
          
            
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="https://github.com/biodash/biodash.github.io" target="_blank" rel="noopener"><i class='fab fa-github'></i><span></span></a>
        </li>

        
        

        

        
        
        
          
            
          
        

        

        
        
        
        

        
          
            
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/index.xml" target="_blank" rel="noopener"><i class='fas fa-rss'></i><span></span></a>
        </li>

        
        

      

        
      </ul>
    </div>

    <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">

      
      
        
      
        
      
        
      
        
      

      
      
      <li class="nav-item">
        <a class="nav-link js-search" href="#" aria-label="Search"><i class="fas fa-search" aria-hidden="true"></i></a>
      </li>
      

      
      
      <li class="nav-item dropdown theme-dropdown">
        <a href="#" class="nav-link" data-toggle="dropdown" aria-haspopup="true" aria-label="Display preferences">
          <i class="fas fa-moon" aria-hidden="true"></i>
        </a>
        <div class="dropdown-menu">
          <a href="#" class="dropdown-item js-set-theme-light">
            <span>Light</span>
          </a>
          <a href="#" class="dropdown-item js-set-theme-dark">
            <span>Dark</span>
          </a>
          <a href="#" class="dropdown-item js-set-theme-auto">
            <span>Automatic</span>
          </a>
        </div>
      </li>
      

      
      

    </ul>

  </div>
</nav>


  </div>

  <div class="page-body">
    
<div class="container-fluid docs">
    <div class="row flex-xl-nowrap">
        <div class="d-none d-xl-block col-xl-2 docs-toc">
            <ul class="nav toc-top">
                <li><a href="#" id="back_to_top" class="docs-toc-title">Contents</a></li>
            </ul>
            <nav id="TableOfContents">
  <ul>
    <li><a href="#housekeeping">Housekeeping</a>
      <ul>
        <li></li>
      </ul>
    </li>
    <li><a href="#i----avoid-copy-pasting-code">I &ndash; Avoid copy-pasting code</a>
      <ul>
        <li><a href="#dont-repeat-yourself">Don&rsquo;t Repeat Yourself</a></li>
        <li><a href="#alternatives">Alternatives</a></li>
        <li><a href="#but-first-an-iteration-example">But first, an iteration example</a></li>
      </ul>
    </li>
    <li><a href="#ii----vectorization-patterns">II &ndash; Vectorization patterns</a>
      <ul>
        <li><a href="#a-vector-and-a-scalar">A vector and a &ldquo;scalar&rdquo;</a></li>
        <li><a href="#vectors-of-equal-length">Vectors of equal length</a></li>
        <li><a href="#vectorized-functions">Vectorized functions</a></li>
      </ul>
    </li>
    <li><a href="#breakout-rooms-i">Breakout Rooms I</a>
      <ul>
        <li><a href="#exercise-1-unequal-length">Exercise 1: Unequal length</a></li>
        <li><a href="#exercise-2-strings">Exercise 2: Strings</a></li>
      </ul>
    </li>
    <li><a href="#iii----vectorization-with-logical-indices">III &ndash; Vectorization with logical indices</a></li>
    <li><a href="#breakout-rooms-ii">Breakout Rooms II</a>
      <ul>
        <li><a href="#exercise-3-logical-vectors">Exercise 3: Logical vectors</a></li>
        <li><a href="#exercise-4-ifelse-plot">Exercise 4: <code>ifelse()</code> plot</a></li>
      </ul>
    </li>
    <li><a href="#bonus">Bonus</a>
      <ul>
        <li><a href="#matrix-vectorization">Matrix vectorization</a></li>
        <li><a href="#base-r-data-frame-indexing">Base R data frame indexing</a></li>
      </ul>
    </li>
  </ul>
</nav>
        </div>
        <main class="col-12 col-md-0 col-xl-10 py-md-3 pl-md-5 docs-content" role="main">
            

            <article class="article">

                












  

  
  
  
<div class="article-container pt-3">
  <h1>S03E07: Avoid Copy-pasting Code - Intro and Vectorization</h1>

  
  <p class="page-subtitle">How to repeat operations without repeating your code</p>
  

  
    



<div class="article-metadata">

  
  
  
  
  <div>
    

  <span >
      <a href="/authors/admin/">Jelmer Poelstra</a></span>
  </div>
  
  

  
  <span class="article-date">
    
    
    Feb 23, 2022
  </span>
  

  

  

  
  
  
  
  

  
  

</div>

    





  
</div>



                <div class="article-container">
                    <div class="article-style">
                        <p><br> <br> <br></p>
<hr>
<h2 id="housekeeping">Housekeeping</h2>
<h4 id="new-to-code-club">New to Code Club?</h4>
<p>Check out the <a href="/codeclub-setup/">Code Club Computer Setup</a> instructions, which also has pointers for if you&rsquo;re new to R or RStudio.</p>
<h4 id="session-goals">Session goals</h4>
<p>Today, you will learn:</p>
<ul>
<li>That you should avoid copy-pasting your code</li>
<li>Which alternatives exist in R</li>
<li>What <em>vectorization</em> is and how to make use of it</li>
</ul>
<h4 id="r-packages-we-will-use">R packages we will use</h4>
<p>We will use <em>palmerpenguins</em> for its <code>penguins</code> dataframe, the <em>tidyverse</em> for dataframe manipulation and plotting, and <em>glue</em>&rsquo;s <code>glue</code> function to paste strings.</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='c'>## This will _install_ the packages only if you don't already have them:</span>
<span class='kr'>if</span> <span class='o'>(</span><span class='o'>!</span><span class='kr'><a href='https://rdrr.io/r/base/library.html'>require</a></span><span class='o'>(</span><span class='nv'><a href='https://allisonhorst.github.io/palmerpenguins/'>palmerpenguins</a></span><span class='o'>)</span><span class='o'>)</span> <span class='nf'><a href='https://rdrr.io/r/utils/install.packages.html'>install.packages</a></span><span class='o'>(</span><span class='s'>"palmerpenguins"</span><span class='o'>)</span>
<span class='kr'>if</span> <span class='o'>(</span><span class='o'>!</span><span class='kr'><a href='https://rdrr.io/r/base/library.html'>require</a></span><span class='o'>(</span><span class='nv'><a href='https://tidyverse.tidyverse.org'>tidyverse</a></span><span class='o'>)</span><span class='o'>)</span> <span class='nf'><a href='https://rdrr.io/r/utils/install.packages.html'>install.packages</a></span><span class='o'>(</span><span class='s'>"tidyverse"</span><span class='o'>)</span>
<span class='kr'>if</span> <span class='o'>(</span><span class='o'>!</span><span class='kr'><a href='https://rdrr.io/r/base/library.html'>require</a></span><span class='o'>(</span><span class='nv'><a href='https://github.com/tidyverse/glue'>glue</a></span><span class='o'>)</span><span class='o'>)</span> <span class='nf'><a href='https://rdrr.io/r/utils/install.packages.html'>install.packages</a></span><span class='o'>(</span><span class='s'>"glue"</span><span class='o'>)</span>

<span class='c'>## This will _load_ the packages:</span>
<span class='kr'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='o'>(</span><span class='nv'><a href='https://allisonhorst.github.io/palmerpenguins/'>palmerpenguins</a></span><span class='o'>)</span>
<span class='kr'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='o'>(</span><span class='nv'><a href='https://tidyverse.tidyverse.org'>tidyverse</a></span><span class='o'>)</span>
<span class='kr'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='o'>(</span><span class='nv'><a href='https://github.com/tidyverse/glue'>glue</a></span><span class='o'>)</span></code></pre>
</div>
<br>
<hr>
<h2 id="i----avoid-copy-pasting-code">I &ndash; Avoid copy-pasting code</h2>
<h3 id="dont-repeat-yourself">Don&rsquo;t Repeat Yourself</h3>
<p>Sometimes, you have a bit of code, and you need to repeat the operations in that code <em>almost</em> exactly.</p>
<p>This can apply to anywhere from a single line to dozens of lines of code. For instance, you may want to rerun a statistical model with different parameter values, or repeat an analysis for different batches or subsets of samples. In the context of our trusty penguins dataset, we may want to repeat an analysis for each of the 4 morphological measurements taken for each penguin.</p>
<p>Your first instinct is perhaps to copy-paste your code several times, and make the necessary slight adjustments in each instance. There are problems with this approach, including:</p>
<ul>
<li>
<p>You will end up with a lot of code, reducing clarity and making it more error-prone</p>
</li>
<li>
<p>Making changes to the parts of the code shared by all blocks becomes challenging.</p>
</li>
</ul>
<p>Avoiding such code repetition is where the programming mantra &ldquo;Don&rsquo;t Repeat Yourself&rdquo; (&ldquo;DRY&rdquo;) comes from.</p>
<br>
<h3 id="alternatives">Alternatives</h3>
<p>So, what are the alternatives?</p>
<p>In R, two key approaches that allow you to avoid copy-pasting your code both involve <em>iteration</em> to repeat a procedure, and do so either:</p>
<ul>
<li>
<p>Using a <em><strong>loop</strong></em></p>
</li>
<li>
<p>Using <em><strong>&ldquo;functional programming&rdquo;</strong></em>: apply a function multiple times with special functions (&ldquo;functionals&rdquo;) from the base R <code>apply</code>-family or <em>purrr</em>&rsquo;s <code>map</code>-family.</p>
</li>
</ul>
<p>Loops are especially useful if you have a whole block of code that needs to be rerun, while functionals are easier to apply when you need to rerun a single function call.</p>
<p>You can additionally avoid code repetition by:</p>
<ul>
<li>
<p><em><strong>Writing your own functions</strong></em> (using <em>arguments</em> to make them flexible)</p>
</li>
<li>
<p>In simple cases, making use of R&rsquo;s <em><strong>vectorization</strong></em> capabilities.</p>
</li>
</ul>
<p>These approaches are clearer, less error-prone, and more flexible than copy-pasting code. They can also be combined.</p>
<p><strong>We will tackle all of these approaches in Code Club in the upcoming weeks, starting with vectorization this week.</strong></p>
<br>
<h3 id="but-first-an-iteration-example">But first, an iteration example</h3>
<p>Below, I will give a quick example of each of the two iteration approaches: a loop and a functional. Hopefully, this will be illustrative even if you don&rsquo;t understand all the details: come back in the next few weeks to learn more about it!</p>
<p>Say that we wanted to compute the mean for each of the 4 measurements taken for each penguin: bill length, bill depth, flipper length, and body mass.</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='nf'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='o'>(</span><span class='nv'>penguins</span><span class='o'>)</span>
<span class='c'>#&gt; <span style='color: #555555;'># A tibble: 6 × 8</span></span>
<span class='c'>#&gt;   species island bill_length_mm bill_depth_mm flipper_length_… body_mass_g sex  </span>
<span class='c'>#&gt;   <span style='color: #555555; font-style: italic;'>&lt;fct&gt;</span>   <span style='color: #555555; font-style: italic;'>&lt;fct&gt;</span>           <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span>         <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span>            <span style='color: #555555; font-style: italic;'>&lt;int&gt;</span>       <span style='color: #555555; font-style: italic;'>&lt;int&gt;</span> <span style='color: #555555; font-style: italic;'>&lt;fct&gt;</span></span>
<span class='c'>#&gt; <span style='color: #555555;'>1</span> Adelie  Torge…           39.1          18.7              181        <span style='text-decoration: underline;'>3</span>750 male </span>
<span class='c'>#&gt; <span style='color: #555555;'>2</span> Adelie  Torge…           39.5          17.4              186        <span style='text-decoration: underline;'>3</span>800 fema…</span>
<span class='c'>#&gt; <span style='color: #555555;'>3</span> Adelie  Torge…           40.3          18                195        <span style='text-decoration: underline;'>3</span>250 fema…</span>
<span class='c'>#&gt; <span style='color: #555555;'>4</span> Adelie  Torge…           <span style='color: #BB0000;'>NA</span>            <span style='color: #BB0000;'>NA</span>                 <span style='color: #BB0000;'>NA</span>          <span style='color: #BB0000;'>NA</span> <span style='color: #BB0000;'>NA</span>   </span>
<span class='c'>#&gt; <span style='color: #555555;'>5</span> Adelie  Torge…           36.7          19.3              193        <span style='text-decoration: underline;'>3</span>450 fema…</span>
<span class='c'>#&gt; <span style='color: #555555;'>6</span> Adelie  Torge…           39.3          20.6              190        <span style='text-decoration: underline;'>3</span>650 male </span>
<span class='c'>#&gt; <span style='color: #555555;'># … with 1 more variable: year &lt;int&gt;</span></span></code></pre>
</div>
<p>First, let&rsquo;s see how we can do this for one measurement:</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='c'>## We extract a vector of bill lengths from the penguins dataframe with `$`</span>
<span class='c'>## Note that any NAs would cause the mean to be NA without na.rm=TRUE</span>
<span class='nf'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='o'>(</span><span class='nv'>penguins</span><span class='o'>$</span><span class='nv'>bill_length_mm</span>, na.rm <span class='o'>=</span> <span class='kc'>TRUE</span><span class='o'>)</span>
<span class='c'>#&gt; [1] 43.92193</span>

<span class='c'>## Among other options, we could also extract this 3rd column using `[[`:</span>
<span class='nf'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='o'>(</span><span class='nv'>penguins</span><span class='o'>[[</span><span class='m'>3</span><span class='o'>]</span><span class='o'>]</span>, na.rm <span class='o'>=</span> <span class='kc'>TRUE</span><span class='o'>)</span>
<span class='c'>#&gt; [1] 43.92193</span></code></pre>
</div>
<p>(For an overview of base R data frame indexing, see the <a href="#base-r-data-frame-indexing">bottom of the the page</a>.)</p>
<p>If we would simply repeat this procedure using the first syntax four times, we would write:</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='nf'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='o'>(</span><span class='nv'>penguins</span><span class='o'>$</span><span class='nv'>bill_length_mm</span>, na.rm <span class='o'>=</span> <span class='kc'>TRUE</span><span class='o'>)</span>
<span class='c'>#&gt; [1] 43.92193</span>
<span class='nf'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='o'>(</span><span class='nv'>penguins</span><span class='o'>$</span><span class='nv'>bill_depth_mm</span>, na.rm <span class='o'>=</span> <span class='kc'>TRUE</span><span class='o'>)</span>
<span class='c'>#&gt; [1] 17.15117</span>
<span class='nf'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='o'>(</span><span class='nv'>penguins</span><span class='o'>$</span><span class='nv'>flipper_length_mm</span>, na.rm <span class='o'>=</span> <span class='kc'>TRUE</span><span class='o'>)</span>
<span class='c'>#&gt; [1] 200.9152</span>
<span class='nf'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='o'>(</span><span class='nv'>penguins</span><span class='o'>$</span><span class='nv'>body_mass_g</span>, na.rm <span class='o'>=</span> <span class='kc'>TRUE</span><span class='o'>)</span>
<span class='c'>#&gt; [1] 4201.754</span></code></pre>
</div>
<p>But that is a bit repetitive. And it would get especially repetitive if we had 20 different measurements. Or if, instead of just computing the mean, we wanted to perform an analysis consisting of multiple steps.</p>
<p>How would using iteration in a case like this look like?</p>
<ul>
<li>
<p>With a <code>for</code> loop:</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='c'>## The columns we are interested in are columns 3 through 6 (3:6)</span>
<span class='c'>## We can extract each column with the `[[...]]` notation we saw last week</span>
<span class='kr'>for</span> <span class='o'>(</span><span class='nv'>column_index</span> <span class='kr'>in</span> <span class='m'>3</span><span class='o'>:</span><span class='m'>6</span><span class='o'>)</span> <span class='o'>&#123;</span>
  <span class='nv'>column_mean</span> <span class='o'>&lt;-</span> <span class='nf'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='o'>(</span><span class='nv'>penguins</span><span class='o'>[[</span><span class='nv'>column_index</span><span class='o'>]</span><span class='o'>]</span>, na.rm <span class='o'>=</span> <span class='kc'>TRUE</span><span class='o'>)</span>
  <span class='nf'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='o'>(</span><span class='nv'>column_mean</span><span class='o'>)</span>
<span class='o'>&#125;</span>
<span class='c'>#&gt; [1] 43.92193</span>
<span class='c'>#&gt; [1] 17.15117</span>
<span class='c'>#&gt; [1] 200.9152</span>
<span class='c'>#&gt; [1] 4201.754</span></code></pre>
</div>
</li>
<li>
<p>With <em>purrr</em>&rsquo;s <code>map()</code> function:</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='nv'>penguins</span> <span class='o'>%&gt;%</span>
  <span class='nf'>select</span><span class='o'>(</span><span class='m'>3</span><span class='o'>:</span><span class='m'>6</span><span class='o'>)</span> <span class='o'>%&gt;%</span>
  <span class='nf'>map</span><span class='o'>(</span><span class='nv'>mean</span>, na.rm <span class='o'>=</span> <span class='kc'>TRUE</span><span class='o'>)</span>
<span class='c'>#&gt; $bill_length_mm</span>
<span class='c'>#&gt; [1] 43.92193</span>
<span class='c'>#&gt; </span>
<span class='c'>#&gt; $bill_depth_mm</span>
<span class='c'>#&gt; [1] 17.15117</span>
<span class='c'>#&gt; </span>
<span class='c'>#&gt; $flipper_length_mm</span>
<span class='c'>#&gt; [1] 200.9152</span>
<span class='c'>#&gt; </span>
<span class='c'>#&gt; $body_mass_g</span>
<span class='c'>#&gt; [1] 4201.754</span></code></pre>
</div>
</li>
</ul>
<div class="alert alert-note">
<div>
<p>In this simple example where we are working with a dataframe, a specialized <em>dplyr</em> approach with <code>across()</code> also works:</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='nv'>penguins</span> <span class='o'>%&gt;%</span> <span class='nf'>summarise</span><span class='o'>(</span><span class='nf'>across</span><span class='o'>(</span><span class='m'>3</span><span class='o'>:</span><span class='m'>6</span>, <span class='nv'>mean</span>, na.rm <span class='o'>=</span> <span class='kc'>TRUE</span><span class='o'>)</span><span class='o'>)</span>
<span class='c'>#&gt; <span style='color: #555555;'># A tibble: 1 × 4</span></span>
<span class='c'>#&gt;   bill_length_mm bill_depth_mm flipper_length_mm body_mass_g</span>
<span class='c'>#&gt;            <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span>         <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span>             <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span>       <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span></span>
<span class='c'>#&gt; <span style='color: #555555;'>1</span>           43.9          17.2              201.       <span style='text-decoration: underline;'>4</span>202.</span></code></pre>
</div>
</div>
</div>
<br>
<h4 id="what-about-vectorization">What about vectorization?</h4>
<p>While iteration using loops or functionals is very useful, in R, we don&rsquo;t need to use these strategies as much as in other languages. The main reason for this is that R often makes use of <em>vectorization</em>.</p>
<p>To illustrate vectorization, we&rsquo;ll work with a vector of bill lengths that we extract from the penguins dataframe (though as we&rsquo;ll see later, all of this works in dataframes, too):</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='c'>## Remove rows with NAs:</span>
<span class='nv'>penguins_noNA</span> <span class='o'>&lt;-</span> <span class='nf'>drop_na</span><span class='o'>(</span><span class='nv'>penguins</span><span class='o'>)</span>              

<span class='c'>## Extract a column with `$`, then take the first 10 values: </span>
<span class='nv'>bill_len</span> <span class='o'>&lt;-</span> <span class='nv'>penguins_noNA</span><span class='o'>$</span><span class='nv'>bill_length_mm</span><span class='o'>[</span><span class='m'>1</span><span class='o'>:</span><span class='m'>10</span><span class='o'>]</span>

<span class='nv'>bill_len</span>
<span class='c'>#&gt;  [1] 39.1 39.5 40.3 36.7 39.3 38.9 39.2 41.1 38.6 34.6</span></code></pre>
</div>
<p>Say that we wanted to convert each value in the <code>bill_len</code> vector from millimeters to inches. Would we need to multiply each individual value by 0.0393701?</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='nv'>bill_len</span><span class='o'>[</span><span class='m'>1</span><span class='o'>]</span> <span class='o'>*</span> <span class='m'>0.0393701</span>
<span class='c'>#&gt; [1] 1.539371</span>
<span class='nv'>bill_len</span><span class='o'>[</span><span class='m'>2</span><span class='o'>]</span> <span class='o'>*</span> <span class='m'>0.0393701</span>
<span class='c'>#&gt; [1] 1.555119</span>
<span class='nv'>bill_len</span><span class='o'>[</span><span class='m'>3</span><span class='o'>]</span> <span class='o'>*</span> <span class='m'>0.0393701</span>
<span class='c'>#&gt; [1] 1.586615</span>

<span class='c'># And so on...</span></code></pre>
</div>
<p>Or should we resort to a loop or a <code>map()</code>-type function here? Fortunately, none of this is necessary! You may already know that in R, you can simply do:</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='nv'>bill_len</span> <span class='o'>*</span> <span class='m'>0.0393701</span>
<span class='c'>#&gt;  [1] 1.539371 1.555119 1.586615 1.444883 1.547245 1.531497 1.543308 1.618111</span>
<span class='c'>#&gt;  [9] 1.519686 1.362205</span></code></pre>
</div>
<p>Similarly, say that we wanted to log-transform every value in the vector, then we can just use the <a href="https://rdrr.io/r/base/Log.html" target="_blank" rel="noopener"><code>log()</code></a> function once for the entire vector:</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='nf'><a href='https://rdrr.io/r/base/Log.html'>log</a></span><span class='o'>(</span><span class='nv'>bill_len</span><span class='o'>)</span>
<span class='c'>#&gt;  [1] 3.666122 3.676301 3.696351 3.602777 3.671225 3.660994 3.668677 3.716008</span>
<span class='c'>#&gt;  [9] 3.653252 3.543854</span></code></pre>
</div>
<p>If you knew about this, perhaps you didn&rsquo;t even think of much of it? Actually, it is worth dwelling on this capability, which is called <em>vectorization</em> and is a pretty unique feature of the R language. In many other languages, you would in fact write a loop to transform each individual value.</p>
<p>So let&rsquo;s learn a bit more about vectorization.</p>
<br>
<hr>
<h2 id="ii----vectorization-patterns">II &ndash; Vectorization patterns</h2>
<h3 id="a-vector-and-a-scalar">A vector and a &ldquo;scalar&rdquo;</h3>
<p>When we multiplied the value <code>0.0393701</code> with the vector <code>bill_len</code>, <code>0.0393701</code> was automatically recycled as many times as needed to be multiplied with <em>each individual value</em> in the <code>bill_len</code> vector.</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='nv'>bill_len</span>
<span class='c'>#&gt;  [1] 39.1 39.5 40.3 36.7 39.3 38.9 39.2 41.1 38.6 34.6</span>

<span class='nv'>bill_len</span> <span class='o'>*</span> <span class='m'>0.0393701</span>
<span class='c'>#&gt;  [1] 1.539371 1.555119 1.586615 1.444883 1.547245 1.531497 1.543308 1.618111</span>
<span class='c'>#&gt;  [9] 1.519686 1.362205</span></code></pre>
</div>
<p>(A single value like <code>0.0393701</code> is often called a &ldquo;scalar&rdquo; or a variable, but in R it is really a vector of length 1.)</p>
<p>As mentioned, you would write a loop to do this in many other languages, and in fact, under the hood, R <em>also</em> uses a loop to do this!</p>
<p>Vectorization is very useful for two reasons:</p>
<ul>
<li>
<p><em>You</em> don&rsquo;t have to write the loop (or another iteration construct), which saves you a fair bit of typing and makes the code clearer.</p>
</li>
<li>
<p>The under-the-hood-loop is being executed <em>much</em> faster than a loop that you would write with R code, because it is written in <code>C</code>/<code>C++</code>.</p>
</li>
</ul>
<h3 id="vectors-of-equal-length">Vectors of equal length</h3>
<p>We can also use vectorized operations when both vectors contain multiple items. For instance, say we want to get the ratio of bill length to bill depth for each penguin:</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='c'>## Like above with bill length, we create a vector with 10 bill depths:</span>
<span class='nv'>bill_dp</span> <span class='o'>&lt;-</span> <span class='nv'>penguins_noNA</span><span class='o'>$</span><span class='nv'>bill_depth_mm</span><span class='o'>[</span><span class='m'>1</span><span class='o'>:</span><span class='m'>10</span><span class='o'>]</span>

<span class='c'>## We compute the ratio:</span>
<span class='nv'>bill_len</span> <span class='o'>/</span> <span class='nv'>bill_dp</span>
<span class='c'>#&gt;  [1] 2.090909 2.270115 2.238889 1.901554 1.907767 2.185393 2.000000 2.335227</span>
<span class='c'>#&gt;  [9] 1.820755 1.639810</span>

<span class='nv'>bill_len</span>
<span class='c'>#&gt;  [1] 39.1 39.5 40.3 36.7 39.3 38.9 39.2 41.1 38.6 34.6</span>
<span class='nv'>bill_dp</span>
<span class='c'>#&gt;  [1] 18.7 17.4 18.0 19.3 20.6 17.8 19.6 17.6 21.2 21.1</span></code></pre>
</div>
<p>What happened here is that the first value is <code>bill_len</code> was divided by the first value in <code>bill_dp</code>, the second value in <code>bill_len</code> by the second value in <code>bill_dp</code>, and so forth.</p>
<p>This also works directly for the columns of a data frame:</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='nv'>bill_ratio</span> <span class='o'>&lt;-</span> <span class='nv'>penguins</span><span class='o'>$</span><span class='nv'>bill_length_mm</span> <span class='o'>/</span> <span class='nv'>penguins</span><span class='o'>$</span><span class='nv'>bill_depth_mm</span>

<span class='nf'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='o'>(</span><span class='nv'>bill_ratio</span><span class='o'>)</span>
<span class='c'>#&gt; [1] 2.090909 2.270115 2.238889       NA 1.901554 1.907767</span></code></pre>
</div>
<p>In the above examples, both vectors had the same length. In Exercise 1, you&rsquo;ll see that vectorization also works with two vectors with multiple values that <em>differ in length</em>.</p>
<h3 id="vectorized-functions">Vectorized functions</h3>
<p>Above, we already briefly saw that we can simply pass a vector to the <a href="https://rdrr.io/r/base/Log.html" target="_blank" rel="noopener"><code>log()</code></a> function and it will compute the log for each of them and return a vector of the same length.</p>
<p>So, the <a href="https://rdrr.io/r/base/Log.html" target="_blank" rel="noopener"><code>log()</code></a> function works the same regardless of whether you pass a single value or a vector with multiple values:</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='nf'><a href='https://rdrr.io/r/base/Log.html'>log</a></span><span class='o'>(</span><span class='m'>21</span><span class='o'>)</span>
<span class='c'>#&gt; [1] 3.044522</span>

<span class='nf'><a href='https://rdrr.io/r/base/Log.html'>log</a></span><span class='o'>(</span><span class='nv'>bill_len</span><span class='o'>)</span>
<span class='c'>#&gt;  [1] 3.666122 3.676301 3.696351 3.602777 3.671225 3.660994 3.668677 3.716008</span>
<span class='c'>#&gt;  [9] 3.653252 3.543854</span></code></pre>
</div>
<p>Because in R, a single value like <code>21</code> is really a vector of length 1, this behavior makes sense.</p>
<p>Just remember that for most functions, you do really need to pass a vector and not just a sequence of numbers:</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='c'>## This way, log() thinks you are passing 3 separate arguments:</span>
<span class='nf'><a href='https://rdrr.io/r/base/Log.html'>log</a></span><span class='o'>(</span><span class='m'>10</span>, <span class='m'>15</span>, <span class='m'>20</span><span class='o'>)</span>
<span class='c'>#&gt; Error in log(10, 15, 20): unused argument (20)</span>

<span class='c'>## Now, you pass 1 argument which is a vector created with `c()`</span>
<span class='nf'><a href='https://rdrr.io/r/base/Log.html'>log</a></span><span class='o'>(</span><span class='nf'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='o'>(</span><span class='m'>10</span>, <span class='m'>15</span>, <span class='m'>20</span><span class='o'>)</span><span class='o'>)</span>
<span class='c'>#&gt; [1] 2.302585 2.708050 2.995732</span></code></pre>
</div>
<p>There are many other vectorized functions that will transform each value in a vector, such as <a href="https://rdrr.io/r/base/Round.html" target="_blank" rel="noopener"><code>round()</code></a> (rounding numbers) and <a href="https://rdrr.io/r/base/MathFun.html" target="_blank" rel="noopener"><code>abs()</code></a> (taking absolute numbers).</p>
<p>Other vectorized functions summarize a vector into a single value, such as <a href="https://rdrr.io/r/base/sum.html" target="_blank" rel="noopener"><code>sum()</code></a> and <a href="https://rdrr.io/r/base/mean.html" target="_blank" rel="noopener"><code>mean()</code></a>.</p>
<br>
<hr>
<h2 id="breakout-rooms-i">Breakout Rooms I</h2>
<details>
<summary>
<b>Code to get set up</b> (click here)
</summary>
<br>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='c'>## This will _install_ the packages only if you don't already have them:</span>
<span class='kr'>if</span> <span class='o'>(</span><span class='o'>!</span><span class='kr'><a href='https://rdrr.io/r/base/library.html'>require</a></span><span class='o'>(</span><span class='nv'><a href='https://allisonhorst.github.io/palmerpenguins/'>palmerpenguins</a></span><span class='o'>)</span><span class='o'>)</span> <span class='nf'><a href='https://rdrr.io/r/utils/install.packages.html'>install.packages</a></span><span class='o'>(</span><span class='s'>"palmerpenguins"</span><span class='o'>)</span>
<span class='kr'>if</span> <span class='o'>(</span><span class='o'>!</span><span class='kr'><a href='https://rdrr.io/r/base/library.html'>require</a></span><span class='o'>(</span><span class='nv'><a href='https://tidyverse.tidyverse.org'>tidyverse</a></span><span class='o'>)</span><span class='o'>)</span> <span class='nf'><a href='https://rdrr.io/r/utils/install.packages.html'>install.packages</a></span><span class='o'>(</span><span class='s'>"tidyverse"</span><span class='o'>)</span>
<span class='kr'>if</span> <span class='o'>(</span><span class='o'>!</span><span class='kr'><a href='https://rdrr.io/r/base/library.html'>require</a></span><span class='o'>(</span><span class='nv'><a href='https://github.com/tidyverse/glue'>glue</a></span><span class='o'>)</span><span class='o'>)</span> <span class='nf'><a href='https://rdrr.io/r/utils/install.packages.html'>install.packages</a></span><span class='o'>(</span><span class='s'>"glue"</span><span class='o'>)</span>

<span class='c'>## Load the packages we will use</span>
<span class='kr'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='o'>(</span><span class='nv'><a href='https://allisonhorst.github.io/palmerpenguins/'>palmerpenguins</a></span><span class='o'>)</span>
<span class='kr'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='o'>(</span><span class='nv'><a href='https://tidyverse.tidyverse.org'>tidyverse</a></span><span class='o'>)</span>
<span class='kr'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='o'>(</span><span class='nv'><a href='https://github.com/tidyverse/glue'>glue</a></span><span class='o'>)</span>

<span class='c'>## Create a vector of bill lengths</span>
<span class='nv'>penguins_noNA</span> <span class='o'>&lt;-</span> <span class='nf'>drop_na</span><span class='o'>(</span><span class='nv'>penguins</span><span class='o'>)</span>
<span class='nv'>bill_len</span> <span class='o'>&lt;-</span> <span class='nv'>penguins_noNA</span><span class='o'>$</span><span class='nv'>bill_length_mm</span><span class='o'>[</span><span class='m'>1</span><span class='o'>:</span><span class='m'>10</span><span class='o'>]</span></code></pre>
</div>
</details>
<div class="puzzle">
<div>
<h3 id="exercise-1-unequal-length">Exercise 1: Unequal length</h3>
<p>Vectorization also works when two vectors with multiple elements do not have the same length. For instance, in the example below, we divide the first value by 10, the second by 100, the third again by 10, and so on:</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='nv'>bill_len</span> <span class='o'>/</span> <span class='nf'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='o'>(</span><span class='m'>10</span>, <span class='m'>100</span><span class='o'>)</span>
<span class='c'>#&gt;  [1] 3.910 0.395 4.030 0.367 3.930 0.389 3.920 0.411 3.860 0.346</span></code></pre>
</div>
<br>
<p><strong>Given the length of <code>bill_len</code> (which is 10), do you see any issues if you would</strong> <strong>divide by a vector of length 3? Try it out and see what happens.</strong></p>
<details>
<summary>
<b>Hints</b> (click here)
</summary>
<br>
<p>While 10 is a multiple of 2, it is not a multiple of 3. This means that the shorter vector will not be recycled in its entirety the last time around.</p>
</details>
<details>
<summary>
<b>Solution</b> (click here)
</summary>
<br>
<p>R will perform the operation but issue a warning about it:</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='nv'>bill_len</span> <span class='o'>/</span> <span class='nf'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='o'>(</span><span class='m'>10</span>, <span class='m'>100</span>, <span class='m'>1000</span><span class='o'>)</span>
<span class='c'>#&gt; Warning in bill_len/c(10, 100, 1000): longer object length is not a multiple of shorter object length</span>
<span class='c'>#&gt;  [1] 3.9100 0.3950 0.0403 3.6700 0.3930 0.0389 3.9200 0.4110 0.0386 3.4600</span></code></pre>
</div>
</details>
<br>
<p><strong>Negate <em>every other</em> value in the <code>bill_len</code> vector.</strong></p>
<details>
<summary>
<b>Hints</b> (click here)
</summary>
<br>
<ul>
<li>
<p>Negation means turning a positive value into a negative value and vice versa (e.g. <code>3</code> =&gt; <code>-3</code> and <code>-15</code> =&gt; <code>15</code>).</p>
</li>
<li>
<p>You can leave the other values unchanged simply by multiplying them by 1.</p>
</li>
</ul>
</details>
<details>
<summary>
<b>Solution</b> (click here)
</summary>
<br>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='nv'>bill_len</span> <span class='o'>*</span> <span class='nf'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='o'>(</span><span class='m'>1</span>, <span class='o'>-</span><span class='m'>1</span><span class='o'>)</span>
<span class='c'>#&gt;  [1]  39.1 -39.5  40.3 -36.7  39.3 -38.9  39.2 -41.1  38.6 -34.6</span></code></pre>
</div>
</details>
</div>
</div>
<br>
<div class="puzzle">
<div>
<h3 id="exercise-2-strings">Exercise 2: Strings</h3>
<p>The <code>glue</code> function from the package of the same name allows you to combine literal strings with values or strings contained in R objects. For instance:</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='nv'>island</span> <span class='o'>&lt;-</span> <span class='s'>"Biscoe"</span>
<span class='nf'><a href='https://glue.tidyverse.org/reference/glue.html'>glue</a></span><span class='o'>(</span><span class='s'>"The island of &#123;island&#125;"</span><span class='o'>)</span>
<span class='c'>#&gt; The island of Biscoe</span></code></pre>
</div>
<p>So, you combine both literal strings and R objects in a single quoted string, and access the values of R objects using braces <code>{}</code>.</p>
<br>
<p><strong>Extract the names of the three islands contained in the <code>penguins</code> dataframe,</strong> <strong>and save them in an vector called <code>islands</code>.</strong></p>
<details>
<summary>
<b>Hints</b> (click here)
</summary>
<br>
<p>Use the <a href="https://rdrr.io/r/base/unique.html" target="_blank" rel="noopener"><code>unique()</code></a> function to get a &ldquo;deduplicated&rdquo; vector of islands, i.e. with one entry per island.</p>
</details>
<details>
<summary>
<b>Solution</b> (click here)
</summary>
<br>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='nv'>islands</span> <span class='o'>&lt;-</span> <span class='nf'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='o'>(</span><span class='nv'>penguins</span><span class='o'>$</span><span class='nv'>island</span><span class='o'>)</span>
<span class='nv'>islands</span>
<span class='c'>#&gt; [1] Torgersen Biscoe    Dream    </span>
<span class='c'>#&gt; Levels: Biscoe Dream Torgersen</span>

<span class='c'>## Or tidyverse style:</span>
<span class='nv'>islands</span> <span class='o'>&lt;-</span> <span class='nv'>penguins</span> <span class='o'>%&gt;%</span> <span class='nf'>distinct</span><span class='o'>(</span><span class='nv'>island</span><span class='o'>)</span> <span class='o'>%&gt;%</span> <span class='nf'>pull</span><span class='o'>(</span><span class='nv'>island</span><span class='o'>)</span></code></pre>
</div>
<p>Note: it is fine that <code>islands</code> is still a <em>factor</em>, like the <code>island</code> column in <code>penguins</code> was.</p>
</details>
<br>
<p><strong>Make use of vectorization to print each island&rsquo;s name like so:</strong></p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='c'>#&gt; The island of Torgersen</span>
<span class='c'>#&gt; The island of Biscoe</span>
<span class='c'>#&gt; The island of Dream</span></code></pre>
</div>
<details>
<summary>
<b>Solution</b> (click here)
</summary>
<br>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='nf'><a href='https://glue.tidyverse.org/reference/glue.html'>glue</a></span><span class='o'>(</span><span class='s'>"Island of &#123;islands&#125;"</span><span class='o'>)</span>
<span class='c'>#&gt; Island of Torgersen</span>
<span class='c'>#&gt; Island of Biscoe</span>
<span class='c'>#&gt; Island of Dream</span></code></pre>
</div>
</details>
</div>
</div>
<br>
<hr>
<h2 id="iii----vectorization-with-logical-indices">III &ndash; Vectorization with logical indices</h2>
<p>We can also use vectorized solutions when we want to operate only on elements that satisfy a certain condition. To do so, we make use of R&rsquo;s ability to index a vector with a <em>logical vector</em>.</p>
<p>Let&rsquo;s say we don&rsquo;t trust any bill length measurement of over 40 mm, and we want to remove those from our vector.</p>
<p>First, we need to know that statements with a comparison operator like <a href="https://rdrr.io/r/base/Comparison.html" target="_blank" rel="noopener"><code>&gt;</code></a>, <a href="https://rdrr.io/r/base/Comparison.html" target="_blank" rel="noopener"><code>&lt;</code></a>, or <a href="https://rdrr.io/r/base/Comparison.html" target="_blank" rel="noopener"><code>==</code></a> will test each value and return a logical vector with the results.</p>
<p>For example:</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='c'># The resulting vector contains TRUE or FALSE for each entry in the original vector:</span>
<span class='nv'>bill_len</span> <span class='o'>==</span> <span class='m'>39.1</span>
<span class='c'>#&gt;  [1]  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE</span>
<span class='nv'>bill_len</span>
<span class='c'>#&gt;  [1] 39.1 39.5 40.3 36.7 39.3 38.9 39.2 41.1 38.6 34.6</span></code></pre>
</div>
<p>Or, going back to our example with values &gt;40:</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='nv'>bill_len</span> <span class='o'>&gt;</span> <span class='m'>40</span>
<span class='c'>#&gt;  [1] FALSE FALSE  TRUE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE</span></code></pre>
</div>
<p>When we index the original vector with such a logical vector (sometimes referred to as a <em>mask</em>), we only get the <code>TRUE</code>s, i.e. values &gt;40:</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='nv'>bill_len</span><span class='o'>[</span><span class='nv'>bill_len</span> <span class='o'>&gt;</span> <span class='m'>40</span><span class='o'>]</span>
<span class='c'>#&gt; [1] 40.3 41.1</span></code></pre>
</div>
<p>This is very succinct and powerful!</p>
<p>With a similar strategy, you can also retain all elements of the vector but manipulate some of them:</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='c'>## We create a separate vector so we don't change the original one:</span>
<span class='nv'>bill_len_ed</span> <span class='o'>&lt;-</span> <span class='nv'>bill_len</span>

<span class='c'>## Only change values &gt; 40:</span>
<span class='nv'>bill_len_ed</span><span class='o'>[</span><span class='nv'>bill_len</span> <span class='o'>&gt;</span> <span class='m'>40</span><span class='o'>]</span> <span class='o'>&lt;-</span> <span class='nv'>bill_len_ed</span><span class='o'>[</span><span class='nv'>bill_len</span> <span class='o'>&gt;</span> <span class='m'>40</span><span class='o'>]</span> <span class='o'>-</span> <span class='m'>100</span>

<span class='nv'>bill_len_ed</span>
<span class='c'>#&gt;  [1]  39.1  39.5 -59.7  36.7  39.3  38.9  39.2 -58.9  38.6  34.6</span></code></pre>
</div>
<p>But for those kinds of operations, the vectorized <a href="https://rdrr.io/r/base/ifelse.html" target="_blank" rel="noopener"><code>ifelse()</code></a> function is easier and clearer:</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='c'># ifelse(test, return-this-if-true, return-this-if-false)</span>
<span class='nv'>bill_len_ed</span> <span class='o'>&lt;-</span> <span class='nf'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='o'>(</span>test <span class='o'>=</span> <span class='nv'>bill_len</span> <span class='o'>&gt;</span> <span class='m'>40</span>,
                      yes <span class='o'>=</span> <span class='nv'>bill_len</span> <span class='o'>-</span> <span class='m'>100</span>, no <span class='o'>=</span> <span class='nv'>bill_len</span><span class='o'>)</span>

<span class='nv'>bill_len_ed</span>
<span class='c'>#&gt;  [1]  39.1  39.5 -59.7  36.7  39.3  38.9  39.2 -58.9  38.6  34.6</span></code></pre>
</div>
<br>
<div class="alert alert-note">
<div>
<p>When creating logical vectors, the <a href="https://rdrr.io/r/base/any.html" target="_blank" rel="noopener"><code>any()</code></a> and <a href="https://rdrr.io/r/base/all.html" target="_blank" rel="noopener"><code>all()</code></a> functions are very handy.</p>
<p>For instance, say we had a vector of p-values:</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='nv'>pvals</span> <span class='o'>&lt;-</span> <span class='nf'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='o'>(</span><span class='m'>0.06</span>, <span class='m'>0.048</span>, <span class='m'>0.01</span>, <span class='m'>0.73</span><span class='o'>)</span></code></pre>
</div>
<p>To check whether any of the p-values are significant:</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='nf'><a href='https://rdrr.io/r/base/any.html'>any</a></span><span class='o'>(</span><span class='nv'>pvals</span> <span class='o'>&lt;</span> <span class='m'>0.05</span><span class='o'>)</span>
<span class='c'>#&gt; [1] TRUE</span></code></pre>
</div>
<p>To check whether all of the p-values are significant:</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='nf'><a href='https://rdrr.io/r/base/all.html'>all</a></span><span class='o'>(</span><span class='nv'>pvals</span> <span class='o'>&lt;</span> <span class='m'>0.05</span><span class='o'>)</span>
<span class='c'>#&gt; [1] FALSE</span></code></pre>
</div>
<p>Moreover, because <code>TRUE</code> corresponds to 1 and <code>FALSE</code> to 0, you can also directly count the number of elements that satisfy a condition:</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='nf'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='o'>(</span><span class='nv'>pvals</span> <span class='o'>&lt;</span> <span class='m'>0.05</span><span class='o'>)</span>
<span class='c'>#&gt; [1] 2</span></code></pre>
</div>
</div>
</div>
<br>
<br>
<hr>
<h2 id="breakout-rooms-ii">Breakout Rooms II</h2>
<div class="puzzle">
<div>
<h3 id="exercise-3-logical-vectors">Exercise 3: Logical vectors</h3>
<p>Create a vector <code>bill_len_NA</code> where all values &gt; 40 have been turned into <code>NA</code>s.</p>
<details>
<summary>
<b>Solution</b> (click here)
</summary>
<br>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='c'>## Using logical vector subsetting:</span>
<span class='nv'>bill_len_NA</span> <span class='o'>&lt;-</span> <span class='nv'>bill_len</span>
<span class='nv'>bill_len_NA</span><span class='o'>[</span><span class='nv'>bill_len_NA</span> <span class='o'>&gt;</span> <span class='m'>40</span><span class='o'>]</span> <span class='o'>&lt;-</span> <span class='kc'>NA</span>

<span class='nv'>bill_len_NA</span>
<span class='c'>#&gt;  [1] 39.1 39.5   NA 36.7 39.3 38.9 39.2   NA 38.6 34.6</span>

<span class='c'>## Or, using `ifelse()`:</span>
<span class='nv'>bill_len_NA</span> <span class='o'>&lt;-</span> <span class='nf'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='o'>(</span><span class='nv'>bill_len</span> <span class='o'>&gt;</span> <span class='m'>40</span>, <span class='kc'>NA</span>, <span class='nv'>bill_len</span><span class='o'>)</span>

<span class='nv'>bill_len_NA</span>
<span class='c'>#&gt;  [1] 39.1 39.5   NA 36.7 39.3 38.9 39.2   NA 38.6 34.6</span></code></pre>
</div>
</details>
<br>
<p>Remove all <code>NA</code>s from <code>bill_len_NA</code>. (If you don&rsquo;t know the function to identify <code>NA</code>s in a vector, take a look at the Hints.)</p>
<details>
<summary>
<b>Hints</b> (click here)
</summary>
<br>
<ul>
<li>
<p>The function <a href="https://rdrr.io/r/base/NA.html" target="_blank" rel="noopener"><code>is.na()</code></a> will check which values in a vector are <code>NA</code>s: it returns a logical vector with <code>TRUE</code>s for <code>NA</code> values and <code>FALSE</code>s for non-<code>NA</code> values.</p>
</li>
<li>
<p>Since you want to <em>remove</em> <code>NA</code> values, you need to negate the output of the <a href="https://rdrr.io/r/base/NA.html" target="_blank" rel="noopener"><code>is.na()</code></a> function when subsetting. You can negate logical tests in R with a <a href="https://rdrr.io/r/base/Logic.html" target="_blank" rel="noopener"><code>!</code></a>. So, <code>!is.na()</code> would have <code>TRUE</code> for non-<code>NA</code> values, which would allow you to keep them.</p>
</li>
</ul>
</details>
<details>
<summary>
<b>Solution</b> (click here)
</summary>
<br>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='nv'>bill_len_NA</span><span class='o'>[</span><span class='o'>!</span><span class='nf'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='o'>(</span><span class='nv'>bill_len_NA</span><span class='o'>)</span><span class='o'>]</span>
<span class='c'>#&gt; [1] 39.1 39.5 36.7 39.3 38.9 39.2 38.6 34.6</span></code></pre>
</div>
</details>
</div>
</div>
<br>
<div class="puzzle">
<div>
<h3 id="exercise-4-ifelse-plot">Exercise 4: <code>ifelse()</code> plot</h3>
<p>With <em>ggplot</em>, make a <code>geom_point()</code> plot of <code>bill_length_mm</code> versus <code>bill_depth_mm</code> only for Gentoo Penguins. In this plot, highlight penguins with a bill length to bill depth ratio larger than 3.5 by giving those points a different color.</p>
<p>(Don&rsquo;t hesitate to look at the Hints if you&rsquo;re not sure how to approach this.)</p>
<details>
<summary>
<b>Hints 1 </b> (click here)
</summary>
<br>
<ul>
<li>Create a new dataframe with:
<ul>
<li>Just Gentoo penguins (use the function <a href="https://rdrr.io/r/stats/filter.html" target="_blank" rel="noopener"><code>filter()</code></a>)</li>
<li>No <code>NA</code>s (use the function <code>drop_na()</code>)</li>
<li>A new column with a logical vector indicating whether the bill length to bill depth ratio is &gt;3.5 (e.g., use the <code>mutate()</code> function with an <a href="https://rdrr.io/r/base/ifelse.html" target="_blank" rel="noopener"><code>ifelse()</code></a> statement).</li>
</ul>
</li>
<li>When creating the plot, assign the new column to the <code>color</code> aesthetic.</li>
</ul>
<p><em>An alternative:</em> you don&rsquo;t even need to create the logical-vector-column, you could also directly map the <code>color</code> aesthetic to a logical expression!</p>
</details>
<details>
<summary>
<b>Hints 2 </b> (click here)
</summary>
<br>
<ul>
<li>Here is some example skeleton code for the data processing:</li>
</ul>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='nv'>...</span> <span class='o'>&lt;-</span> <span class='nv'>penguins</span> <span class='o'>%&gt;%</span>
  <span class='c'>## Only retain rows for 1 penguin species:</span>
  <span class='nf'><a href='https://rdrr.io/r/stats/filter.html'>filter</a></span><span class='o'>(</span><span class='nv'>species</span> <span class='o'>==</span> <span class='nv'>...</span><span class='o'>)</span> <span class='o'>%&gt;%</span>
  <span class='c'>## Remove rows with NAs:</span>
  <span class='nv'>...</span> <span class='o'>%&gt;%</span> 
  <span class='c'>## Create a new column `ratio` with a logical vector:</span>
  <span class='nf'>mutate</span><span class='o'>(</span>ratio <span class='o'>=</span> <span class='nf'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='o'>(</span><span class='nv'>...</span>, <span class='s'>"&gt; 3.5"</span>, <span class='s'>"&lt; 3.5"</span><span class='o'>)</span><span class='o'>)</span></code></pre>
</div>
<ul>
<li>Here is some example skeleton code for the plot:</li>
</ul>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='nf'>ggplot</span><span class='o'>(</span><span class='nv'>...</span><span class='o'>)</span> <span class='o'>+</span>
  <span class='c'>## Use the new column with the logical vector for the `color` aesthetic</span>
  <span class='nf'>geom_point</span><span class='o'>(</span><span class='nf'>aes</span><span class='o'>(</span>x <span class='o'>=</span> <span class='nv'>...</span>, y <span class='o'>=</span> <span class='nv'>...</span>, color <span class='o'>=</span> <span class='nv'>...</span><span class='o'>)</span><span class='o'>)</span></code></pre>
</div>
</details>
<details>
<summary>
<b>Solution</b> (click here)
</summary>
<br>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='c'>## Create the new dataframe</span>
<span class='nv'>gent</span> <span class='o'>&lt;-</span> <span class='nv'>penguins</span> <span class='o'>%&gt;%</span>
  <span class='nf'><a href='https://rdrr.io/r/stats/filter.html'>filter</a></span><span class='o'>(</span><span class='nv'>species</span> <span class='o'>==</span> <span class='s'>"Gentoo"</span><span class='o'>)</span> <span class='o'>%&gt;%</span>
  <span class='nf'>drop_na</span><span class='o'>(</span><span class='o'>)</span> <span class='o'>%&gt;%</span> 
  <span class='nf'>mutate</span><span class='o'>(</span>
    ratio <span class='o'>=</span> <span class='nf'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='o'>(</span><span class='nv'>bill_length_mm</span> <span class='o'>/</span> <span class='nv'>bill_depth_mm</span> <span class='o'>&gt;</span> <span class='m'>3.5</span>, <span class='s'>"&gt; 3.5"</span>, <span class='s'>"&lt; 3.5"</span><span class='o'>)</span>
    <span class='o'>)</span>

<span class='c'>## Make the plot:</span>
<span class='nf'>ggplot</span><span class='o'>(</span><span class='nv'>gent</span><span class='o'>)</span> <span class='o'>+</span>
  <span class='nf'>geom_point</span><span class='o'>(</span><span class='nf'>aes</span><span class='o'>(</span>x <span class='o'>=</span> <span class='nv'>bill_length_mm</span>, y <span class='o'>=</span> <span class='nv'>bill_depth_mm</span>, color <span class='o'>=</span> <span class='nv'>ratio</span><span class='o'>)</span><span class='o'>)</span>
</code></pre>
<p><img src="figs/unnamed-chunk-38-1.png" width="700px" style="display: block; margin: auto;" /></p>
</div>
<p>Or include the comparison directly in the <code>ggplot</code> call (!):</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='c'>## Create the new dataframe without making a new variable</span>
<span class='nv'>gent</span> <span class='o'>&lt;-</span> <span class='nv'>penguins</span> <span class='o'>%&gt;%</span>
  <span class='nf'><a href='https://rdrr.io/r/stats/filter.html'>filter</a></span><span class='o'>(</span><span class='nv'>species</span> <span class='o'>==</span> <span class='s'>"Gentoo"</span><span class='o'>)</span> <span class='o'>%&gt;%</span>
  <span class='nf'>drop_na</span><span class='o'>(</span><span class='o'>)</span>

<span class='c'>## Make the plot and include the logical expression in the `aes()` call:</span>
<span class='nf'>ggplot</span><span class='o'>(</span><span class='nv'>gent</span><span class='o'>)</span> <span class='o'>+</span>
  <span class='nf'>geom_point</span><span class='o'>(</span><span class='nf'>aes</span><span class='o'>(</span>x <span class='o'>=</span> <span class='nv'>bill_length_mm</span>, y <span class='o'>=</span> <span class='nv'>bill_depth_mm</span>,
                 color <span class='o'>=</span> <span class='nv'>bill_length_mm</span> <span class='o'>/</span> <span class='nv'>bill_depth_mm</span> <span class='o'>&gt;</span> <span class='m'>3.5</span><span class='o'>)</span><span class='o'>)</span> <span class='o'>+</span>
  <span class='nf'>labs</span><span class='o'>(</span>color <span class='o'>=</span> <span class='s'>"Bill length ratio &gt; 3.5"</span><span class='o'>)</span>
</code></pre>
<p><img src="figs/unnamed-chunk-39-1.png" width="700px" style="display: block; margin: auto;" /></p>
</div>
</details>
</div>
</div>
<br>
<hr>
<h2 id="bonus">Bonus</h2>
<h3 id="matrix-vectorization">Matrix vectorization</h3>
<p>We can also perform vectorized operations on <em>entire matrices</em>. With the following matrix:</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='c'>## We use the "sample" function to get 25 random values between 1 and a 100,</span>
<span class='c'>## and put those in a 5*5 matrix:</span>
<span class='nv'>mat</span> <span class='o'>&lt;-</span> <span class='nf'><a href='https://rdrr.io/r/base/matrix.html'>matrix</a></span><span class='o'>(</span><span class='nf'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span><span class='o'>(</span><span class='m'>1</span><span class='o'>:</span><span class='m'>100</span>, <span class='m'>25</span><span class='o'>)</span>, nrow <span class='o'>=</span> <span class='m'>5</span>, ncol <span class='o'>=</span> <span class='m'>5</span><span class='o'>)</span>
<span class='nv'>mat</span>
<span class='c'>#&gt;      [,1] [,2] [,3] [,4] [,5]</span>
<span class='c'>#&gt; [1,]   53   47   52   31   16</span>
<span class='c'>#&gt; [2,]   13   83    4   37   34</span>
<span class='c'>#&gt; [3,]   17   89   40   30   20</span>
<span class='c'>#&gt; [4,]   60   81   98   66   90</span>
<span class='c'>#&gt; [5,]   36   58   91   19   82</span></code></pre>
</div>
<p>&hellip;we could multiple all values by 10 or get the square of each value simply as follows:</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='nv'>mat</span> <span class='o'>*</span> <span class='m'>10</span>
<span class='c'>#&gt;      [,1] [,2] [,3] [,4] [,5]</span>
<span class='c'>#&gt; [1,]  530  470  520  310  160</span>
<span class='c'>#&gt; [2,]  130  830   40  370  340</span>
<span class='c'>#&gt; [3,]  170  890  400  300  200</span>
<span class='c'>#&gt; [4,]  600  810  980  660  900</span>
<span class='c'>#&gt; [5,]  360  580  910  190  820</span>

<span class='nv'>mat</span> <span class='o'>*</span> <span class='nv'>mat</span>
<span class='c'>#&gt;      [,1] [,2] [,3] [,4] [,5]</span>
<span class='c'>#&gt; [1,] 2809 2209 2704  961  256</span>
<span class='c'>#&gt; [2,]  169 6889   16 1369 1156</span>
<span class='c'>#&gt; [3,]  289 7921 1600  900  400</span>
<span class='c'>#&gt; [4,] 3600 6561 9604 4356 8100</span>
<span class='c'>#&gt; [5,] 1296 3364 8281  361 6724</span></code></pre>
</div>
<h3 id="base-r-data-frame-indexing">Base R data frame indexing</h3>
<p>Extract a column <em>as a vector</em>:</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='c'>## By name:</span>
<span class='nv'>penguins</span><span class='o'>$</span><span class='nv'>species</span>
<span class='nv'>penguins</span><span class='o'>[[</span><span class='s'>"species"</span><span class='o'>]</span><span class='o'>]</span>

<span class='c'>## By index (column number):</span>
<span class='nv'>penguins</span><span class='o'>[[</span><span class='m'>1</span><span class='o'>]</span><span class='o'>]</span></code></pre>
</div>
<p>Extract one or more columns <em>as a data frame</em> using <code>[row, column]</code> notation,<br>
with a leading comma (<code>[, column]</code>) meaning all rows:</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='c'>## By name:</span>
<span class='nv'>penguins</span><span class='o'>[</span>, <span class='s'>"species"</span><span class='o'>]</span>
<span class='nv'>penguins</span><span class='o'>[</span>, <span class='nf'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='o'>(</span><span class='s'>"species"</span>, <span class='s'>"island"</span><span class='o'>)</span><span class='o'>]</span>

<span class='c'>## By index (column numbers):</span>
<span class='nv'>penguins</span><span class='o'>[</span>, <span class='m'>1</span><span class='o'>]</span>
<span class='nv'>penguins</span><span class='o'>[</span>, <span class='nf'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='o'>(</span><span class='m'>1</span>, <span class='m'>2</span><span class='o'>)</span><span class='o'>]</span>
</code></pre>
</div>
<p>Subset rows by a condition, with a trailing comma (<code>[row, ]</code>) meaning all columns:</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='nv'>penguins</span><span class='o'>[</span><span class='nv'>penguins</span><span class='o'>$</span><span class='nv'>species</span> <span class='o'>==</span> <span class='s'>"Adelie"</span>, <span class='o'>]</span>
<span class='nv'>penguins</span><span class='o'>[</span><span class='nv'>penguins</span><span class='o'>$</span><span class='nv'>bill_length_mm</span> <span class='o'>&gt;</span> <span class='m'>40</span>, <span class='o'>]</span></code></pre>
</div>
<br>

                    </div>

                    <br>

                    






<div class="article-tags">
  
  <a class="badge badge-light" href="/tags/codeclub/">codeclub</a>
  
  <a class="badge badge-light" href="/tags/iteration/">iteration</a>
  
</div>



<div class="share-box" aria-hidden="true">
  <ul class="share">
    
      
      
      
        
      
      
      
      <li>
        <a href="https://twitter.com/intent/tweet?url=https://biodash.github.io/codeclub/s03e07_vectorization/&amp;text=S03E07:%20Avoid%20Copy-pasting%20Code%20-%20Intro%20and%20Vectorization" target="_blank" rel="noopener" class="share-btn-twitter">
          <i class="fab fa-twitter"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.facebook.com/sharer.php?u=https://biodash.github.io/codeclub/s03e07_vectorization/&amp;t=S03E07:%20Avoid%20Copy-pasting%20Code%20-%20Intro%20and%20Vectorization" target="_blank" rel="noopener" class="share-btn-facebook">
          <i class="fab fa-facebook"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="mailto:?subject=S03E07:%20Avoid%20Copy-pasting%20Code%20-%20Intro%20and%20Vectorization&amp;body=https://biodash.github.io/codeclub/s03e07_vectorization/" target="_blank" rel="noopener" class="share-btn-email">
          <i class="fas fa-envelope"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.linkedin.com/shareArticle?url=https://biodash.github.io/codeclub/s03e07_vectorization/&amp;title=S03E07:%20Avoid%20Copy-pasting%20Code%20-%20Intro%20and%20Vectorization" target="_blank" rel="noopener" class="share-btn-linkedin">
          <i class="fab fa-linkedin-in"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="whatsapp://send?text=S03E07:%20Avoid%20Copy-pasting%20Code%20-%20Intro%20and%20Vectorization%20https://biodash.github.io/codeclub/s03e07_vectorization/" target="_blank" rel="noopener" class="share-btn-whatsapp">
          <i class="fab fa-whatsapp"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://service.weibo.com/share/share.php?url=https://biodash.github.io/codeclub/s03e07_vectorization/&amp;title=S03E07:%20Avoid%20Copy-pasting%20Code%20-%20Intro%20and%20Vectorization" target="_blank" rel="noopener" class="share-btn-weibo">
          <i class="fab fa-weibo"></i>
        </a>
      </li>
    
  </ul>
</div>











  
  
    



  
  
  
  
  
  <div class="media author-card content-widget-hr">
    
      
      <a href="/authors/admin/"><img class="avatar mr-3 avatar-circle" src="/authors/admin/avatar_hu6d2513500ad4d038e15c8975d9d8565d_488180_270x270_fill_q90_lanczos_center.jpg" alt="Jelmer Poelstra"></a>
    

    <div class="media-body">
      <h5 class="card-title"><a href="/authors/admin/">Jelmer Poelstra</a></h5>
      <h6 class="card-subtitle">Bioinformatician at MCIC</h6>
      
      <ul class="network-icon" aria-hidden="true">
  
    
    
    
      
    
    
    
    
    
    <li>
      <a href="mailto:poelstra.1@osu.edu" >
        <i class="fas fa-envelope"></i>
      </a>
    </li>
  
    
    
    
    
    
    
    
      
    
    <li>
      <a href="https://scholar.google.com/citations?user=h_a6S0cAAAAJ" target="_blank" rel="noopener">
        <i class="ai ai-google-scholar"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://github.com/jelmerp" target="_blank" rel="noopener">
        <i class="fab fa-github"></i>
      </a>
    </li>
  
</ul>

    </div>
  </div>


  
















                    <br>

                    <hr class="separator">

                    <div class="clearfix">
                        
                        
                        <span class="previous-link">
                            <a href="https://biodash.github.io/codeclub/s03e06_datastructures/">← S03E06: Data structures and subsetting</a>
                        </span>
                        
                        
                        
                        
                        <span class="next-link">
                            <a href="https://biodash.github.io/codeclub/s03e08_loops/">S03E08: For Loops and If Statements →</a>
                        </span>
                        
                        
                    </div>

                    <hr class="separator">

                </div>

            </article>

            
        </main>
    </div>
</div>

  </div>

  <div class="page-footer">
    
    
    <div class="container">
      <footer class="site-footer">
    
    <p class="powered-by">
      <a href="/license/">LICENSE: CC-BY-SA <br> <i class="fab fa-creative-commons fa-2x"></i><i class="fab fa-creative-commons-by fa-2x"></i><i class="fab fa-creative-commons-sa fa-2x"></i> </a><br>
    </p>
    
</footer>
    </div>
    
  </div>

  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

      

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/instant.page/5.1.0/instantpage.min.js" integrity="sha512-1+qUtKoh9XZW7j+6LhRMAyOrgSQKenQ4mluTR+cvxXjP1Z54RxZuzstR/H9kgPXQsVB8IW7DMDFUJpzLjvhGSQ==" crossorigin="anonymous"></script>

      
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      

      
      

      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/highlight.min.js" integrity="sha512-TDKKr+IvoqZnPzc3l35hdjpHD0m+b2EC2SrLEgKDRWpxf2rFCxemkgvJ5kfU48ip+Y+m2XVKyOCD85ybtlZDmw==" crossorigin="anonymous"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/r.min.js"></script>
        
      

    

    
    
    
      <script async defer src="https://maps.googleapis.com/maps/api/js?key="></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/gmaps.js/0.4.25/gmaps.min.js" integrity="sha256-7vjlAeb8OaTrCXZkCNun9djzuB2owUsaO72kXaFDBJs=" crossorigin="anonymous"></script>
      
    

    
    

    
    
    
      
      <script id="search-hit-fuse-template" type="text/x-template">
        <div class="search-hit" id="summary-{{key}}">
          <div class="search-hit-content">
            <div class="search-hit-name">
              <a href="{{relpermalink}}">{{title}}</a>
              <div class="article-metadata search-hit-type">{{type}}</div>
              <p class="search-hit-description">{{snippet}}</p>
            </div>
          </div>
        </div>
      </script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>
      
    

    
    

    
    
    
    

    
    <script src="/js/bootstrap.bundle.min.6aed84840afc03ab4d5750157f69c120.js"></script>

    
    
      
      
      
      
      
      
      
    

    
    
    
    
    
    
    
    
      
      
    
    
      
    
    <script src="/en/js/wowchemy.min.2f16af175a3ec51b41b36bb4934b1cf7.js"></script>

    






</body>
</html>
