<!DOCTYPE html><html lang="en-us" >

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  
  
  
    <meta name="generator" content="Wowchemy 5.0.0-beta.3 for Hugo" />
  

  

  
  

  
  
  
  
  
    
    
    
  
  

  <meta name="author" content="Jelmer Poelstra" />

  
  
  
    
  
  <meta name="description" content="During this second-to-last session in our series on basic stats in R, Stephen will show how to run correlation analyses in R." />

  
  <link rel="alternate" hreflang="en-us" href="https://biodash.github.io/codeclub/s03e05_correlation/" />

  







  




  
  
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  

  
  
  
    <meta name="theme-color" content="#3f51b5" />
  

  
  
    
    <script src="/js/mathjax-config.js"></script>
  

  
  
  
  
    
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha256-FMvZuGapsJLjouA6k7Eo2lusoAX9i0ShlWFG6qt7SLc=" crossorigin="anonymous">

    
    

    
    
    
      
    
    
      
      
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/styles/github.min.css" crossorigin="anonymous" title="hl-light" media="print" onload="this.media='all'">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/styles/github.min.css" crossorigin="anonymous" title="hl-dark" media="print" onload="this.media='all'" disabled>
      
    

    
    
    

    

    
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js" integrity="" crossorigin="anonymous" async></script>
      
    
      
      

      
      

      
    
      
      

      
      

      
    
  

  
  
  
    
      
      <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap">
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap" media="print" onload="this.media='all'">
    
  

  
  
  
  
  
  <link rel="stylesheet" href="/css/wowchemy.80f9a276c6100914c616a06e45ba8d09.css" />

  




<script async src="https://www.googletagmanager.com/gtag/js?id=G-9F9CQ7P0DX"></script>
<script>
  window.dataLayer = window.dataLayer || [];

  function gtag() {
      dataLayer.push(arguments);
  }

  function trackOutboundLink(url, target) {
    gtag('event', 'click', {
         'event_category': 'outbound',
         'event_label': url,
         'transport_type': 'beacon',
         'event_callback': function () {
           if (target !== '_blank') {
             document.location = url;
           }
         }
    });
    console.debug("Outbound link clicked: " + url);
  }

  function onClickCallback(event) {
    if ((event.target.tagName !== 'A') || (event.target.host === window.location.host)) {
      return;
    }
    trackOutboundLink(event.target, event.target.getAttribute('target'));  
  }

  gtag('js', new Date());
  gtag('config', 'G-9F9CQ7P0DX', {});
  gtag('set', {'cookie_flags': 'SameSite=None;Secure'});

  
  document.addEventListener('click', onClickCallback, false);
</script>


  

  

  




  
  
  

  

  
    <link rel="manifest" href="/index.webmanifest" />
  

  <link rel="icon" type="image/png" href="/media/icon_hucc2cf774636a7e386557c89fa75ff618_191491_32x32_fill_lanczos_center_2.png" />
  <link rel="apple-touch-icon" type="image/png" href="/media/icon_hucc2cf774636a7e386557c89fa75ff618_191491_180x180_fill_lanczos_center_2.png" />

  <link rel="canonical" href="https://biodash.github.io/codeclub/s03e05_correlation/" />

  
  
  
  
  
  
  
  
    
    
  
  
  <meta property="twitter:card" content="summary" />
  
  <meta property="og:site_name" content="BioDASH" />
  <meta property="og:url" content="https://biodash.github.io/codeclub/s03e05_correlation/" />
  <meta property="og:title" content="S03E05: Introduction to correlation | BioDASH" />
  <meta property="og:description" content="During this second-to-last session in our series on basic stats in R, Stephen will show how to run correlation analyses in R." /><meta property="og:image" content="https://biodash.github.io/media/logo_hu6407506e646a281542ecb299640680ce_37988_300x300_fit_lanczos_2.png" />
    <meta property="twitter:image" content="https://biodash.github.io/media/logo_hu6407506e646a281542ecb299640680ce_37988_300x300_fit_lanczos_2.png" /><meta property="og:locale" content="en-us" />
  
    
      <meta
        property="article:published_time"
        content="2022-02-10T00:00:00&#43;00:00"
      />
    
    <meta property="article:modified_time" content="2022-02-10T12:14:14-05:00">
  

  



  

  

  <link rel='stylesheet' href='/css/highlight-light.css' title='hl-light'>
<link rel='stylesheet' href='/css/highlight-dark.css' title='hl-dark' disabled>



  <title>S03E05: Introduction to correlation | BioDASH</title>
</head>


<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" class="page-wrapper   " data-wc-page-id="afd1c119b3906a1edd0d18826835dbd5" >

  
  
  
  
  
  
  
  
  <script src="/js/wowchemy-init.min.7a224883d792570fd34d30c7134eace3.js"></script>

  


<aside class="search-modal" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#" aria-label="Close"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="Search..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search" class="form-control"
        aria-label="Search...">
        
      </div>

      
      

      

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>



  <div class="page-header">
    











  


<nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
  <div class="container-xl">

    
    <div class="d-none d-lg-inline-flex">
      <a class="navbar-brand" href="/"><img src="/media/logo_hu6407506e646a281542ecb299640680ce_37988_0x70_resize_lanczos_2.png" alt="BioDASH"></a>
    </div>
    

    
    <button type="button" class="navbar-toggler" data-toggle="collapse"
            data-target="#navbar-content" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
    <span><i class="fas fa-bars"></i></span>
    </button>
    

    
    <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
      <a class="navbar-brand" href="/"><img src="/media/logo_hu6407506e646a281542ecb299640680ce_37988_0x70_resize_lanczos_2.png" alt="BioDASH"></a>
    </div>
    

    
    
    <div class="navbar-collapse main-menu-item collapse justify-content-start" id="navbar-content">

      
      <ul class="navbar-nav d-md-inline-flex">
        

        
        <li class="nav-item dropdown">
          <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true"><span>Code Club</span><span class="caret"></span>
          </a>
          <div class="dropdown-menu">
            
              <a class="dropdown-item" href="/codeclub-schedule/"><span>- <b>Schedule</b></span></a>
            
              <a class="dropdown-item" href="/codeclub/"><span>- Past Sessions</span></a>
            
              <a class="dropdown-item" href="/codeclub-setup/"><span>- Computer Setup</span></a>
            
              <a class="dropdown-item" href="/"><span>------------------------</span></a>
            
              <a class="dropdown-item" href="/codeclub-suggest/"><span>- Suggest a Topic</span></a>
            
              <a class="dropdown-item" href="/codeclub-present/"><span>- Info for Presenters</span></a>
            
              <a class="dropdown-item" href="/"><span>-----------------------</span></a>
            
              <a class="dropdown-item" href="/codeclub-about/"><span>- <b>About Code Club & Join Us!</b></span></a>
            
          </div>
        </li>

        
        

        
        <li class="nav-item dropdown">
          <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true"><span>Tutorials & Resources</span><span class="caret"></span>
          </a>
          <div class="dropdown-menu">
            
              <a class="dropdown-item" href="/events/"><span>Events</span></a>
            
              <a class="dropdown-item" href="/"><span>---------------------</span></a>
            
              <a class="dropdown-item" href="/tutorials/r-resources-tips/"><span>- R Resources and Tips</span></a>
            
              <a class="dropdown-item" href="/"><span>--------------------</span></a>
            
              <a class="dropdown-item" href="https://mcic-osu.github.io/2020-12-microbiomics-workshop/"><span>- Metabarcoding workshop (Fall '20)</span></a>
            
              <a class="dropdown-item" href="/tutorials/2021-01_rnaseq/"><span>- RNA-seq intro meetings (Spring '21)</span></a>
            
              <a class="dropdown-item" href="https://mcic-osu.github.io/pracs-sp21/"><span>- Computing Course (Spring '21)</span></a>
            
          </div>
        </li>

        
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/support/"><span>Bioinformatics Support</span></a>
        </li>

        
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/about/"><span>About</span></a>
        </li>

        
        

        

        
        
        
          
            
          
        

        

        
        
        
        

        
          
            
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="https://github.com/biodash/biodash.github.io" target="_blank" rel="noopener"><i class='fab fa-github'></i><span></span></a>
        </li>

        
        

        

        
        
        
          
            
          
        

        

        
        
        
        

        
          
            
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/index.xml" target="_blank" rel="noopener"><i class='fas fa-rss'></i><span></span></a>
        </li>

        
        

      

        
      </ul>
    </div>

    <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">

      
      
        
      
        
      
        
      
        
      

      
      
      <li class="nav-item">
        <a class="nav-link js-search" href="#" aria-label="Search"><i class="fas fa-search" aria-hidden="true"></i></a>
      </li>
      

      
      
      <li class="nav-item dropdown theme-dropdown">
        <a href="#" class="nav-link" data-toggle="dropdown" aria-haspopup="true" aria-label="Display preferences">
          <i class="fas fa-moon" aria-hidden="true"></i>
        </a>
        <div class="dropdown-menu">
          <a href="#" class="dropdown-item js-set-theme-light">
            <span>Light</span>
          </a>
          <a href="#" class="dropdown-item js-set-theme-dark">
            <span>Dark</span>
          </a>
          <a href="#" class="dropdown-item js-set-theme-auto">
            <span>Automatic</span>
          </a>
        </div>
      </li>
      

      
      

    </ul>

  </div>
</nav>


  </div>

  <div class="page-body">
    
<div class="container-fluid docs">
    <div class="row flex-xl-nowrap">
        <div class="d-none d-xl-block col-xl-2 docs-toc">
            <ul class="nav toc-top">
                <li><a href="#" id="back_to_top" class="docs-toc-title">Contents</a></li>
            </ul>
            <nav id="TableOfContents">
  <ul>
    <li><a href="#housekeeping">Housekeeping</a>
      <ul>
        <li></li>
      </ul>
    </li>
    <li><a href="#1---what-is-correlation">1 - What is correlation?</a></li>
    <li><a href="#2---the-corrr-package-and-our-data">2 - The <em>corrr</em> package and our data</a></li>
    <li><a href="#2---basic-usage-of-the-corrr-package">2 - Basic usage of the <em>corrr</em> package</a></li>
    <li><a href="#breakout-session-1">Breakout session 1</a></li>
    <li><a href="#3---reshaping-and-visualizations">3 - Reshaping and visualizations</a></li>
    <li><a href="#breakout-session-2">Breakout session 2</a></li>
  </ul>
</nav>
        </div>
        <main class="col-12 col-md-0 col-xl-10 py-md-3 pl-md-5 docs-content" role="main">
            

            <article class="article">

                












  

  
  
  
<div class="article-container pt-3">
  <h1>S03E05: Introduction to correlation</h1>

  
  <p class="page-subtitle">Using the <em>corrr</em> package</p>
  

  
    



<div class="article-metadata">

  
  
  
  
  <div>
    

  <span >
      <a href="/authors/stephen-opiyo/">Stephen Opiyo</a></span>
  </div>
  
  

  
  <span class="article-date">
    
    
    Feb 10, 2022
  </span>
  

  

  

  
  
  
  
  

  
  

</div>

    





  
</div>



                <div class="article-container">
                    <div class="article-style">
                        <hr>
<h2 id="housekeeping">Housekeeping</h2>
<h4 id="new-to-code-club">New to Code Club?</h4>
<p>Check out the <a href="/codeclub-setup/">Code Club Computer Setup</a> instructions, which also has pointers for if you&rsquo;re new to R or RStudio. A few related Code Club sessions include:</p>
<ul>
<li><a href="/codeclub/s03e01_ttests/">S03E01</a>: T-tests</li>
<li><a href="/codeclub/s03e02_anova/">S03E02</a>: ANOVA</li>
<li><a href="/codeclub/s03e03_pca/">S03E03</a>: PCA</li>
<li><a href="/codeclub/s03e04_anova2/">S03E04</a>: ANOVA part II</li>
</ul>
<h4 id="what-will-we-go-over-today">What will we go over today</h4>
<ul>
<li>We will introduce correlation.</li>
<li>Learn using the <a href="https://cran.r-project.org/web/packages/corrr/index.html" target="_blank" rel="noopener"><code>corrr()</code></a> package.</li>
</ul>
<h4 id="r-packages-we-will-use">R packages we will use</h4>
<ul>
<li><em>corrr</em> &ndash; for correlation analysis</li>
<li><em>palmerpenguins</em> &ndash; for the penguins data</li>
<li><em>tidyverse</em> &ndash; for data wrangling</li>
</ul>
<br>
<hr>
<h2 id="1---what-is-correlation">1 - What is correlation?</h2>
<p>Correlation is a statistical method used to assess a linear association between two continuous variables. It is measured by a statistic called the correlation coefficient, which represents the strength of the linear association between the variables in question. It is a dimensionless quantity that takes a value in the range −1 to +1. A correlation coefficient of zero indicates that no linear relationship exists between two continuous variables, and a correlation coefficient of −1 or +1 indicates a perfect linear relationship. (The stronger the correlation, the closer the correlation coefficient comes to −1 and +1.)</p>
<p><strong>Positive coefficient</strong>: If the coefficient is a positive number, the variables are positively related (i.e., as the value of one variable goes up, the value of the other also tends to do so).</p>
<p><strong>Negative coefficient</strong>: If the coefficient is a negative number, the variables are inversely related (i.e., as the value of one variable goes up, the value of the other tends to go down).</p>
<p><strong>Types of correlation coefficients</strong>: There are two main types of correlation coefficients, <em>Pearson&rsquo;s correlation coefficient</em> and <em>Spearman&rsquo;s rank correlation coefficient</em>. The correct usage of correlation coefficient type depends on the types of variables being studied.</p>
<ul>
<li>
<p><em>Pearson&rsquo;s correlation coefficient</em>: Pearson&rsquo;s correlation coefficient is denoted as <strong>ϱ</strong> for a population parameter and as <strong>r</strong> for a sample statistic. It is used when both variables being studied are normally distributed.</p>
</li>
<li>
<p><em>Spearman&rsquo;s rank correlation coefficient</em>: Spearman&rsquo;s rank correlation coefficient is denoted as <strong>ϱs</strong> for a population parameter and as <strong>rs</strong> for a sample statistic. It is appropriate when one or both variables are skewed or ordinal.</p>
</li>
</ul>
<p><strong>Rule of thumb for interpreting the size of a correlation coefficient</strong></p>
<ul>
<li>.90 to 1.00 (−.90 to −1.00) &ndash; Very high positive (negative) correlation</li>
<li>.70 to .90 (−.70 to −.90) &ndash; High positive (negative) correlation</li>
<li>.50 to .70 (−.50 to −.70) &ndash; Moderate positive (negative) correlation</li>
<li>.30 to .50 (−.30 to −.50) &ndash; Low positive (negative) correlation</li>
<li>.00 to .30 (.00 to −.30) &ndash; Negligible correlation</li>
</ul>
<br>
<hr>
<h2 id="2---the-corrr-package-and-our-data">2 - The <em>corrr</em> package and our data</h2>
<p>The <em>corrr</em> package is a tool for exploring correlations. It makes it easy to perform routine tasks when exploring correlation matrices such as ignoring the diagonal, focusing on the correlations of certain variables against others, or rearranging and visualizing the matrix in terms of the strength of the correlations. The <em>corrr</em> package exists within the Comprehensive R Archive Network, or <a href="https://cran.r-project.org/" target="_blank" rel="noopener">CRAN</a>.</p>
<p>Let&rsquo;s install it &ndash; we only need to do this once:</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='nf'><a href='https://rdrr.io/r/utils/install.packages.html'>install.packages</a></span><span class='o'>(</span><span class='s'>"corrr"</span><span class='o'>)</span></code></pre>
</div>
<p>To use the <em>corrr</em> package, we need to load it up using <a href="https://rdrr.io/r/base/library.html" target="_blank" rel="noopener"><code>library()</code></a>. We also need to load the <em>tidyverse</em> since we will be using it later:</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='kr'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='o'>(</span><span class='nv'><a href='https://github.com/tidymodels/corrr'>corrr</a></span><span class='o'>)</span>
<span class='kr'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='o'>(</span><span class='nv'><a href='https://tidyverse.tidyverse.org'>tidyverse</a></span><span class='o'>)</span>
<span class='c'>#&gt; ── <span style='font-weight: bold;'>Attaching packages</span> ─────────────────────────────────────── tidyverse 1.3.1 ──</span>
<span class='c'>#&gt; <span style='color: #00BB00;'>✔</span> <span style='color: #0000BB;'>ggplot2</span> 3.3.5     <span style='color: #00BB00;'>✔</span> <span style='color: #0000BB;'>purrr  </span> 0.3.4</span>
<span class='c'>#&gt; <span style='color: #00BB00;'>✔</span> <span style='color: #0000BB;'>tibble </span> 3.1.6     <span style='color: #00BB00;'>✔</span> <span style='color: #0000BB;'>dplyr  </span> 1.0.7</span>
<span class='c'>#&gt; <span style='color: #00BB00;'>✔</span> <span style='color: #0000BB;'>tidyr  </span> 1.2.0     <span style='color: #00BB00;'>✔</span> <span style='color: #0000BB;'>stringr</span> 1.4.0</span>
<span class='c'>#&gt; <span style='color: #00BB00;'>✔</span> <span style='color: #0000BB;'>readr  </span> 2.1.2     <span style='color: #00BB00;'>✔</span> <span style='color: #0000BB;'>forcats</span> 0.5.1</span>
<span class='c'>#&gt; ── <span style='font-weight: bold;'>Conflicts</span> ────────────────────────────────────────── tidyverse_conflicts() ──</span>
<span class='c'>#&gt; <span style='color: #BB0000;'>✖</span> <span style='color: #0000BB;'>dplyr</span>::<span style='color: #00BB00;'>filter()</span> masks <span style='color: #0000BB;'>stats</span>::filter()</span>
<span class='c'>#&gt; <span style='color: #BB0000;'>✖</span> <span style='color: #0000BB;'>dplyr</span>::<span style='color: #00BB00;'>lag()</span>    masks <span style='color: #0000BB;'>stats</span>::lag()</span></code></pre>
</div>
<hr>
<p><strong>Let&rsquo;s get set up and grab some data to work with.</strong></p>
<p>We will use the same dataset <a href="https://allisonhorst.github.io/palmerpenguins/" target="_blank" rel="noopener"><code>palmerpenguins</code></a> used in the previous weeks.</p>
<p>If you didn&rsquo;t install this package previously, please do so now:</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='nf'><a href='https://rdrr.io/r/utils/install.packages.html'>install.packages</a></span><span class='o'>(</span><span class='s'>"palmerpenguins"</span><span class='o'>)</span></code></pre>
</div>
<p>Then, to use the package, we need to use the function <a href="https://rdrr.io/r/base/library.html" target="_blank" rel="noopener"><code>library()</code></a> to load it:</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='kr'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='o'>(</span><span class='nv'><a href='https://allisonhorst.github.io/palmerpenguins/'>palmerpenguins</a></span><span class='o'>)</span></code></pre>
</div>
<p>The data we will use today is a dataframe called <code>penguins</code>, which we reference after loading the package. We will look at the structure of the data:</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='c'># look at the first 10 rows, all columns</span>
<span class='nf'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='o'>(</span><span class='nv'>penguins</span>, <span class='m'>10</span><span class='o'>)</span>
<span class='c'>#&gt; <span style='color: #555555;'># A tibble: 10 × 8</span></span>
<span class='c'>#&gt;    species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g</span>
<span class='c'>#&gt;    <span style='color: #555555; font-style: italic;'>&lt;fct&gt;</span>   <span style='color: #555555; font-style: italic;'>&lt;fct&gt;</span>              <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span>         <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span>             <span style='color: #555555; font-style: italic;'>&lt;int&gt;</span>       <span style='color: #555555; font-style: italic;'>&lt;int&gt;</span></span>
<span class='c'>#&gt; <span style='color: #555555;'> 1</span> Adelie  Torgersen           39.1          18.7               181        <span style='text-decoration: underline;'>3</span>750</span>
<span class='c'>#&gt; <span style='color: #555555;'> 2</span> Adelie  Torgersen           39.5          17.4               186        <span style='text-decoration: underline;'>3</span>800</span>
<span class='c'>#&gt; <span style='color: #555555;'> 3</span> Adelie  Torgersen           40.3          18                 195        <span style='text-decoration: underline;'>3</span>250</span>
<span class='c'>#&gt; <span style='color: #555555;'> 4</span> Adelie  Torgersen           <span style='color: #BB0000;'>NA</span>            <span style='color: #BB0000;'>NA</span>                  <span style='color: #BB0000;'>NA</span>          <span style='color: #BB0000;'>NA</span></span>
<span class='c'>#&gt; <span style='color: #555555;'> 5</span> Adelie  Torgersen           36.7          19.3               193        <span style='text-decoration: underline;'>3</span>450</span>
<span class='c'>#&gt; <span style='color: #555555;'> 6</span> Adelie  Torgersen           39.3          20.6               190        <span style='text-decoration: underline;'>3</span>650</span>
<span class='c'>#&gt; <span style='color: #555555;'> 7</span> Adelie  Torgersen           38.9          17.8               181        <span style='text-decoration: underline;'>3</span>625</span>
<span class='c'>#&gt; <span style='color: #555555;'> 8</span> Adelie  Torgersen           39.2          19.6               195        <span style='text-decoration: underline;'>4</span>675</span>
<span class='c'>#&gt; <span style='color: #555555;'> 9</span> Adelie  Torgersen           34.1          18.1               193        <span style='text-decoration: underline;'>3</span>475</span>
<span class='c'>#&gt; <span style='color: #555555;'>10</span> Adelie  Torgersen           42            20.2               190        <span style='text-decoration: underline;'>4</span>250</span>
<span class='c'>#&gt; <span style='color: #555555;'># … with 2 more variables: sex &lt;fct&gt;, year &lt;int&gt;</span></span>

<span class='c'># check the structure of penguins_data</span>
<span class='c'># glimpse() which is a part of dplyr functions </span>
<span class='c'># similarly to str() and can be used interchangeably</span>
<span class='nf'>glimpse</span><span class='o'>(</span><span class='nv'>penguins</span><span class='o'>)</span>
<span class='c'>#&gt; Rows: 344</span>
<span class='c'>#&gt; Columns: 8</span>
<span class='c'>#&gt; $ species           <span style='color: #555555; font-style: italic;'>&lt;fct&gt;</span> Adelie, Adelie, Adelie, Adelie, Adelie, Adelie, Adel…</span>
<span class='c'>#&gt; $ island            <span style='color: #555555; font-style: italic;'>&lt;fct&gt;</span> Torgersen, Torgersen, Torgersen, Torgersen, Torgerse…</span>
<span class='c'>#&gt; $ bill_length_mm    <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span> 39.1, 39.5, 40.3, NA, 36.7, 39.3, 38.9, 39.2, 34.1, …</span>
<span class='c'>#&gt; $ bill_depth_mm     <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span> 18.7, 17.4, 18.0, NA, 19.3, 20.6, 17.8, 19.6, 18.1, …</span>
<span class='c'>#&gt; $ flipper_length_mm <span style='color: #555555; font-style: italic;'>&lt;int&gt;</span> 181, 186, 195, NA, 193, 190, 181, 195, 193, 190, 186…</span>
<span class='c'>#&gt; $ body_mass_g       <span style='color: #555555; font-style: italic;'>&lt;int&gt;</span> 3750, 3800, 3250, NA, 3450, 3650, 3625, 4675, 3475, …</span>
<span class='c'>#&gt; $ sex               <span style='color: #555555; font-style: italic;'>&lt;fct&gt;</span> male, female, female, NA, female, male, female, male…</span>
<span class='c'>#&gt; $ year              <span style='color: #555555; font-style: italic;'>&lt;int&gt;</span> 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007…</span></code></pre>
</div>
<p>Okay, now we have a sense of what the <code>penguins</code> dataset is.</p>
<br>
<hr>
<h2 id="2---basic-usage-of-the-corrr-package">2 - Basic usage of the <em>corrr</em> package</h2>
<p>Now we want to use the <em>corrr</em> package to correlate variables in the <code>penguins</code> dataframe. The <em>corrr</em> package uses the <a href="https://corrr.tidymodels.org/reference/correlate.html" target="_blank" rel="noopener"><code>correlate()</code></a> function and returns correlation results in a tibble output.</p>
<p>Now let&rsquo;s select variables from the <code>penguins</code> dataframe using the pipe operator <code>%&gt;%</code> and the <code>select()</code> function. We then specify the name of the variables that we want to select. In this example, we are selecting variables <code>bill_length_mm</code>, <code>bill_depth_mm</code>, <code>flipper_length_mm</code>, and <code>body_mass_g</code>.</p>
<p>Then, we will compute correlations among the variables:</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='nv'>penguins_cor</span> <span class='o'>&lt;-</span> <span class='nv'>penguins</span> <span class='o'>%&gt;%</span>   <span class='c'># Take penguins_data</span>
  <span class='nf'>select</span><span class='o'>(</span><span class='nv'>bill_length_mm</span>, <span class='nv'>bill_depth_mm</span>, <span class='nv'>flipper_length_mm</span>, <span class='nv'>body_mass_g</span><span class='o'>)</span> <span class='o'>%&gt;%</span>
  <span class='nf'><a href='https://corrr.tidymodels.org/reference/correlate.html'>correlate</a></span><span class='o'>(</span><span class='o'>)</span>       <span class='c'># Select variables and calculate their correlations</span>
<span class='c'>#&gt; </span>
<span class='c'>#&gt; Correlation method: 'pearson'</span>
<span class='c'>#&gt; Missing treated using: 'pairwise.complete.obs'</span>

<span class='nv'>penguins_cor</span>        <span class='c'># Correlation results in tibble</span>
<span class='c'>#&gt; <span style='color: #555555;'># A tibble: 4 × 5</span></span>
<span class='c'>#&gt;   term              bill_length_mm bill_depth_mm flipper_length_mm body_mass_g</span>
<span class='c'>#&gt;   <span style='color: #555555; font-style: italic;'>&lt;chr&gt;</span>                      <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span>         <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span>             <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span>       <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span></span>
<span class='c'>#&gt; <span style='color: #555555;'>1</span> bill_length_mm            <span style='color: #BB0000;'>NA</span>            -<span style='color: #BB0000;'>0.235</span>             0.656       0.595</span>
<span class='c'>#&gt; <span style='color: #555555;'>2</span> bill_depth_mm             -<span style='color: #BB0000;'>0.235</span>        <span style='color: #BB0000;'>NA</span>                -<span style='color: #BB0000;'>0.584</span>      -<span style='color: #BB0000;'>0.472</span></span>
<span class='c'>#&gt; <span style='color: #555555;'>3</span> flipper_length_mm          0.656        -<span style='color: #BB0000;'>0.584</span>            <span style='color: #BB0000;'>NA</span>           0.871</span>
<span class='c'>#&gt; <span style='color: #555555;'>4</span> body_mass_g                0.595        -<span style='color: #BB0000;'>0.472</span>             0.871      <span style='color: #BB0000;'>NA</span></span></code></pre>
</div>
<p>The output of the <a href="https://corrr.tidymodels.org/reference/correlate.html" target="_blank" rel="noopener"><code>correlate()</code></a> function can be piped (<code>%&gt;%</code>) to:</p>
<ul>
<li>The <a href="https://corrr.tidymodels.org/reference/shave.html" target="_blank" rel="noopener"><code>shave()</code></a> and <a href="https://corrr.tidymodels.org/reference/rearrange.html" target="_blank" rel="noopener"><code>rearrange()</code></a> functions for internal changes</li>
<li>The <a href="https://corrr.tidymodels.org/reference/focus.html" target="_blank" rel="noopener"><code>focus()</code></a>, and <a href="https://corrr.tidymodels.org/reference/stretch.html" target="_blank" rel="noopener"><code>stretch()</code></a> functions to reshape the structure</li>
<li>And the <a href="https://corrr.tidymodels.org/reference/rplot.html" target="_blank" rel="noopener"><code>rplot()</code></a>, <a href="https://corrr.tidymodels.org/reference/fashion.html" target="_blank" rel="noopener"><code>fashion()</code></a>, and <a href="https://corrr.tidymodels.org/reference/network_plot.html" target="_blank" rel="noopener"><code>network_plot()</code></a> for visualizations.</li>
</ul>
<p><em>Let us start with internal changes</em>.</p>
<ul>
<li>The <a href="https://corrr.tidymodels.org/reference/shave.html" target="_blank" rel="noopener"><code>shave()</code></a> function removes values of the upper or lower triangle and sets them to <code>NA</code>.</li>
<li>The <a href="https://corrr.tidymodels.org/reference/rearrange.html" target="_blank" rel="noopener"><code>rearrange()</code></a> function arranges the columns and rows based on correlation strengths.</li>
</ul>
<p>We can apply the <a href="https://corrr.tidymodels.org/reference/shave.html" target="_blank" rel="noopener"><code>shave()</code></a> function to remove the top triangle:</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='nv'>penguins_cor</span> <span class='o'>%&gt;%</span>   <span class='c'># Take penguins_cor results</span>
  <span class='nf'><a href='https://corrr.tidymodels.org/reference/shave.html'>shave</a></span><span class='o'>(</span><span class='o'>)</span>          <span class='c'># Remove the upper triangle</span>
<span class='c'>#&gt; <span style='color: #555555;'># A tibble: 4 × 5</span></span>
<span class='c'>#&gt;   term              bill_length_mm bill_depth_mm flipper_length_mm body_mass_g</span>
<span class='c'>#&gt;   <span style='color: #555555; font-style: italic;'>&lt;chr&gt;</span>                      <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span>         <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span>             <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span>       <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span></span>
<span class='c'>#&gt; <span style='color: #555555;'>1</span> bill_length_mm            <span style='color: #BB0000;'>NA</span>            <span style='color: #BB0000;'>NA</span>                <span style='color: #BB0000;'>NA</span>              <span style='color: #BB0000;'>NA</span></span>
<span class='c'>#&gt; <span style='color: #555555;'>2</span> bill_depth_mm             -<span style='color: #BB0000;'>0.235</span>        <span style='color: #BB0000;'>NA</span>                <span style='color: #BB0000;'>NA</span>              <span style='color: #BB0000;'>NA</span></span>
<span class='c'>#&gt; <span style='color: #555555;'>3</span> flipper_length_mm          0.656        -<span style='color: #BB0000;'>0.584</span>            <span style='color: #BB0000;'>NA</span>              <span style='color: #BB0000;'>NA</span></span>
<span class='c'>#&gt; <span style='color: #555555;'>4</span> body_mass_g                0.595        -<span style='color: #BB0000;'>0.472</span>             0.871          <span style='color: #BB0000;'>NA</span></span></code></pre>
</div>
<p>You can see that the values in the upper triangle have been replaced by <code>NA</code>s. Now let us remove <code>NA</code>s by using the <a href="https://corrr.tidymodels.org/reference/fashion.html" target="_blank" rel="noopener"><code>fashion()</code></a> function:</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='nv'>penguins_cor</span> <span class='o'>%&gt;%</span>   <span class='c'># Take penguins_cor results</span>
  <span class='nv'>shave</span> <span class='o'>%&gt;%</span>        <span class='c'># Remove the upper triangle</span>
  <span class='nf'><a href='https://corrr.tidymodels.org/reference/fashion.html'>fashion</a></span><span class='o'>(</span><span class='o'>)</span>        <span class='c'># Remove NAs</span>
<span class='c'>#&gt;                term bill_length_mm bill_depth_mm flipper_length_mm body_mass_g</span>
<span class='c'>#&gt; 1    bill_length_mm                                                           </span>
<span class='c'>#&gt; 2     bill_depth_mm           -.24                                            </span>
<span class='c'>#&gt; 3 flipper_length_mm            .66          -.58                              </span>
<span class='c'>#&gt; 4       body_mass_g            .60          -.47               .87</span></code></pre>
</div>
<p>You can see that the <code>NA</code>s have been removed, and we have a clean tibble (dataframe).</p>
<p>Now, let&rsquo;s rearrange columns based on correlation strengths:</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='nv'>penguins_cor</span> <span class='o'>%&gt;%</span>   <span class='c'># Take penguins_cor results</span>
  <span class='nv'>rearrange</span> <span class='o'>%&gt;%</span>    <span class='c'># Rearrange based on correlation strengths</span>
  <span class='nv'>shave</span> <span class='o'>%&gt;%</span>        <span class='c'># Remove the upper triangle</span>
  <span class='nf'><a href='https://corrr.tidymodels.org/reference/fashion.html'>fashion</a></span><span class='o'>(</span><span class='o'>)</span>        <span class='c'># Remove NAs</span>
<span class='c'>#&gt;                term flipper_length_mm body_mass_g bill_length_mm bill_depth_mm</span>
<span class='c'>#&gt; 1 flipper_length_mm                                                           </span>
<span class='c'>#&gt; 2       body_mass_g               .87                                         </span>
<span class='c'>#&gt; 3    bill_length_mm               .66         .60                             </span>
<span class='c'>#&gt; 4     bill_depth_mm              -.58        -.47           -.24</span></code></pre>
</div>
<p>You can see that the values are arranged based on correlation strengths.</p>
<br>
<hr>
<div class="puzzle">
<div>
<h2 id="breakout-session-1">Breakout session 1</h2>
<ul>
<li>
<p>From the <code>penguins</code> dataframe, create a new dataset called <code>penguins_biscoe</code> by selecting only the penguins from the island of Biscoe.</p>
</li>
<li>
<p>In the <code>penguins_biscoe</code> dataframe, what are the correlations between <code>bill_length_mm</code>, <code>bill_depth_mm</code>, <code>flipper_length_mm</code>, and <code>year</code>?</p>
</li>
<li>
<p>Remove the upper triangle and <code>NA</code>s from the results, and arrange based on correlation strengths.</p>
</li>
</ul>
<details>
<summary>
<b>Hints</b> (click here)
</summary>
<br>
<p>Use the <a href="https://rdrr.io/r/stats/filter.html" target="_blank" rel="noopener"><code>filter()</code></a> function to only select penguins from the island of Biscoe.</p>
</details>
<details>
<summary>
<b>Solution</b> (click here)
</summary>
<br>
<p>Select the penguins from the island of Biscoe:</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='nv'>penguins_biscoe</span> <span class='o'>&lt;-</span> <span class='nv'>penguins</span> <span class='o'>%&gt;%</span>  <span class='c'># Save results in new object</span>
  <span class='nf'><a href='https://rdrr.io/r/stats/filter.html'>filter</a></span><span class='o'>(</span><span class='nv'>island</span> <span class='o'>==</span> <span class='s'>"Biscoe"</span><span class='o'>)</span>     <span class='c'># Select data from only Biscoe island  </span></code></pre>
</div>
<p>Calculate correlation of the variables in <code>penguins_biscoe</code>:</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='nv'>biscoe_cor</span> <span class='o'>&lt;-</span> <span class='nv'>penguins_biscoe</span> <span class='o'>%&gt;%</span>
  <span class='c'># select bill_length_mm, bill_depth_mm, flipper_length_mm, and year</span>
  <span class='nf'>select</span><span class='o'>(</span><span class='nv'>bill_length_mm</span>, <span class='nv'>bill_depth_mm</span>, <span class='nv'>flipper_length_mm</span>, <span class='nv'>year</span><span class='o'>)</span> <span class='o'>%&gt;%</span>
  <span class='nf'><a href='https://corrr.tidymodels.org/reference/correlate.html'>correlate</a></span><span class='o'>(</span><span class='o'>)</span>        <span class='c'># Calculate correlation</span>
<span class='c'>#&gt; </span>
<span class='c'>#&gt; Correlation method: 'pearson'</span>
<span class='c'>#&gt; Missing treated using: 'pairwise.complete.obs'</span>

<span class='nv'>biscoe_cor</span>
<span class='c'>#&gt; <span style='color: #555555;'># A tibble: 4 × 5</span></span>
<span class='c'>#&gt;   term              bill_length_mm bill_depth_mm flipper_length_mm    year</span>
<span class='c'>#&gt;   <span style='color: #555555; font-style: italic;'>&lt;chr&gt;</span>                      <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span>         <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span>             <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span>   <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span></span>
<span class='c'>#&gt; <span style='color: #555555;'>1</span> bill_length_mm           <span style='color: #BB0000;'>NA</span>             -<span style='color: #BB0000;'>0.444</span>             0.866  0.096<span style='text-decoration: underline;'>8</span></span>
<span class='c'>#&gt; <span style='color: #555555;'>2</span> bill_depth_mm            -<span style='color: #BB0000;'>0.444</span>         <span style='color: #BB0000;'>NA</span>                -<span style='color: #BB0000;'>0.579</span>  0.138 </span>
<span class='c'>#&gt; <span style='color: #555555;'>3</span> flipper_length_mm         0.866         -<span style='color: #BB0000;'>0.579</span>            <span style='color: #BB0000;'>NA</span>      0.105 </span>
<span class='c'>#&gt; <span style='color: #555555;'>4</span> year                      0.096<span style='text-decoration: underline;'>8</span>         0.138             0.105 <span style='color: #BB0000;'>NA</span></span></code></pre>
</div>
<p>To remove the upper triangle and rearrange the results:</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='nv'>biscoe_cor</span>  <span class='o'>%&gt;%</span>      <span class='c'># Take biscoe_cor results</span>
  <span class='nf'><a href='https://corrr.tidymodels.org/reference/rearrange.html'>rearrange</a></span><span class='o'>(</span><span class='o'>)</span> <span class='o'>%&gt;%</span>    <span class='c'># Rearrange based on correlation strengths</span>
  <span class='nf'><a href='https://corrr.tidymodels.org/reference/shave.html'>shave</a></span><span class='o'>(</span><span class='o'>)</span> <span class='o'>%&gt;%</span>        <span class='c'># Remove the upper triangle</span>
  <span class='nf'><a href='https://corrr.tidymodels.org/reference/fashion.html'>fashion</a></span><span class='o'>(</span><span class='o'>)</span>          <span class='c'># Remove NAs</span>
<span class='c'>#&gt;                term flipper_length_mm bill_length_mm year bill_depth_mm</span>
<span class='c'>#&gt; 1 flipper_length_mm                                                    </span>
<span class='c'>#&gt; 2    bill_length_mm               .87                                  </span>
<span class='c'>#&gt; 3              year               .11            .10                   </span>
<span class='c'>#&gt; 4     bill_depth_mm              -.58           -.44  .14</span></code></pre>
</div>
</details>
</div>
</div>
<br>
<hr>
<h2 id="3---reshaping-and-visualizations">3 - Reshaping and visualizations</h2>
<p>The output of the <a href="https://corrr.tidymodels.org/reference/correlate.html" target="_blank" rel="noopener"><code>correlate()</code></a> function can also be piped to:</p>
<ul>
<li>The <a href="https://corrr.tidymodels.org/reference/focus.html" target="_blank" rel="noopener"><code>focus()</code></a> and <a href="https://corrr.tidymodels.org/reference/stretch.html" target="_blank" rel="noopener"><code>stretch()</code></a> functions to reshape the structure</li>
<li>And the <a href="https://corrr.tidymodels.org/reference/rplot.html" target="_blank" rel="noopener"><code>rplot()</code></a>, and <a href="https://corrr.tidymodels.org/reference/network_plot.html" target="_blank" rel="noopener"><code>network_plot()</code></a> for visualizations.</li>
</ul>
<p><em>Reshape structure</em>:</p>
<ul>
<li>The <a href="https://corrr.tidymodels.org/reference/focus.html" target="_blank" rel="noopener"><code>focus()</code></a> function select columns or rows based on the variable specified.</li>
<li>The <a href="https://corrr.tidymodels.org/reference/stretch.html" target="_blank" rel="noopener"><code>stretch()</code></a> converts correction results from a tibble into a long format.</li>
</ul>
<p><em>Visualizations</em>:</p>
<ul>
<li>The <a href="https://corrr.tidymodels.org/reference/rplot.html" target="_blank" rel="noopener"><code>rplot()</code></a> function plots correlation results</li>
<li>The <a href="https://corrr.tidymodels.org/reference/network_plot.html" target="_blank" rel="noopener"><code>network_plot()</code></a> function plots a point for each variable, joined by paths for correlations</li>
</ul>
<p>Let use the <a href="https://corrr.tidymodels.org/reference/stretch.html" target="_blank" rel="noopener"><code>stretch()</code></a> function to convert our correlation results <code>penguins_cor</code> into a long format:</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='nv'>penguins_cor</span> <span class='o'>%&gt;%</span>
  <span class='nf'><a href='https://corrr.tidymodels.org/reference/stretch.html'>stretch</a></span><span class='o'>(</span><span class='o'>)</span>
<span class='c'>#&gt; <span style='color: #555555;'># A tibble: 16 × 3</span></span>
<span class='c'>#&gt;    x                 y                      r</span>
<span class='c'>#&gt;    <span style='color: #555555; font-style: italic;'>&lt;chr&gt;</span>             <span style='color: #555555; font-style: italic;'>&lt;chr&gt;</span>              <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span></span>
<span class='c'>#&gt; <span style='color: #555555;'> 1</span> bill_length_mm    bill_length_mm    <span style='color: #BB0000;'>NA</span>    </span>
<span class='c'>#&gt; <span style='color: #555555;'> 2</span> bill_length_mm    bill_depth_mm     -<span style='color: #BB0000;'>0.235</span></span>
<span class='c'>#&gt; <span style='color: #555555;'> 3</span> bill_length_mm    flipper_length_mm  0.656</span>
<span class='c'>#&gt; <span style='color: #555555;'> 4</span> bill_length_mm    body_mass_g        0.595</span>
<span class='c'>#&gt; <span style='color: #555555;'> 5</span> bill_depth_mm     bill_length_mm    -<span style='color: #BB0000;'>0.235</span></span>
<span class='c'>#&gt; <span style='color: #555555;'> 6</span> bill_depth_mm     bill_depth_mm     <span style='color: #BB0000;'>NA</span>    </span>
<span class='c'>#&gt; <span style='color: #555555;'> 7</span> bill_depth_mm     flipper_length_mm -<span style='color: #BB0000;'>0.584</span></span>
<span class='c'>#&gt; <span style='color: #555555;'> 8</span> bill_depth_mm     body_mass_g       -<span style='color: #BB0000;'>0.472</span></span>
<span class='c'>#&gt; <span style='color: #555555;'> 9</span> flipper_length_mm bill_length_mm     0.656</span>
<span class='c'>#&gt; <span style='color: #555555;'>10</span> flipper_length_mm bill_depth_mm     -<span style='color: #BB0000;'>0.584</span></span>
<span class='c'>#&gt; <span style='color: #555555;'>11</span> flipper_length_mm flipper_length_mm <span style='color: #BB0000;'>NA</span>    </span>
<span class='c'>#&gt; <span style='color: #555555;'>12</span> flipper_length_mm body_mass_g        0.871</span>
<span class='c'>#&gt; <span style='color: #555555;'>13</span> body_mass_g       bill_length_mm     0.595</span>
<span class='c'>#&gt; <span style='color: #555555;'>14</span> body_mass_g       bill_depth_mm     -<span style='color: #BB0000;'>0.472</span></span>
<span class='c'>#&gt; <span style='color: #555555;'>15</span> body_mass_g       flipper_length_mm  0.871</span>
<span class='c'>#&gt; <span style='color: #555555;'>16</span> body_mass_g       body_mass_g       <span style='color: #BB0000;'>NA</span></span></code></pre>
</div>
<p>You can see that the results are coverted into a long format.</p>
<p>We can also select a column we are interested in. Let us select only correlation between &ldquo;bill_depth_mm&rdquo; and the rest of the variables.</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='nv'>penguins_cor</span> <span class='o'>%&gt;%</span>
  <span class='nf'><a href='https://corrr.tidymodels.org/reference/focus.html'>focus</a></span><span class='o'>(</span><span class='s'>"bill_depth_mm"</span><span class='o'>)</span>
<span class='c'>#&gt; <span style='color: #555555;'># A tibble: 3 × 2</span></span>
<span class='c'>#&gt;   term              bill_depth_mm</span>
<span class='c'>#&gt;   <span style='color: #555555; font-style: italic;'>&lt;chr&gt;</span>                     <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span></span>
<span class='c'>#&gt; <span style='color: #555555;'>1</span> bill_length_mm           -<span style='color: #BB0000;'>0.235</span></span>
<span class='c'>#&gt; <span style='color: #555555;'>2</span> flipper_length_mm        -<span style='color: #BB0000;'>0.584</span></span>
<span class='c'>#&gt; <span style='color: #555555;'>3</span> body_mass_g              -<span style='color: #BB0000;'>0.472</span></span></code></pre>
</div>
<p>You can see that we selected only the correlations between <code>bill_depth_mm</code> and other variables.</p>
<p>We can now visualize the results:</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='nv'>penguins_cor</span> <span class='o'>%&gt;%</span> 
  <span class='nf'><a href='https://corrr.tidymodels.org/reference/rearrange.html'>rearrange</a></span><span class='o'>(</span><span class='o'>)</span> <span class='o'>%&gt;%</span>   <span class='c'># Rearrange based on correlation strengths</span>
  <span class='nf'><a href='https://corrr.tidymodels.org/reference/rplot.html'>rplot</a></span><span class='o'>(</span><span class='o'>)</span>           <span class='c'># Plot</span>
<span class='c'>#&gt; Don't know how to automatically pick scale for object of type noquote. Defaulting to continuous.</span>
</code></pre>
<p><img src="figs/unnamed-chunk-15-1.png" width="700px" style="display: block; margin: auto;" /></p>
</div>
<p>We plotted based on correlation strengths.</p>
<br>
<hr>
<div class="puzzle">
<div>
<h2 id="breakout-session-2">Breakout session 2</h2>
<p>Use the dataframe (<code>penguins_biscoe</code>) you created in Breakout session 1 to:</p>
<ul>
<li>
<p>Calculate correlations among the variables, and present the results in a long format</p>
</li>
<li>
<p>Select the correlations that include <code>year</code></p>
</li>
<li>
<p>Plot a correlation graph based on correlation strengths</p>
</li>
</ul>
<details>
<summary>
<b>Solution</b> (click here)
</summary>
<br>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='nv'>biscoe_cor</span> <span class='o'>&lt;-</span> <span class='nv'>penguins_biscoe</span> <span class='o'>%&gt;%</span>
  <span class='nf'>select</span><span class='o'>(</span><span class='nv'>bill_length_mm</span>, <span class='nv'>bill_depth_mm</span>, <span class='nv'>flipper_length_mm</span>, <span class='nv'>year</span><span class='o'>)</span> <span class='o'>%&gt;%</span>
  <span class='nf'><a href='https://corrr.tidymodels.org/reference/correlate.html'>correlate</a></span><span class='o'>(</span><span class='o'>)</span>
<span class='c'>#&gt; </span>
<span class='c'>#&gt; Correlation method: 'pearson'</span>
<span class='c'>#&gt; Missing treated using: 'pairwise.complete.obs'</span>

<span class='nv'>biscoe_cor</span> <span class='o'>%&gt;%</span>
  <span class='nf'><a href='https://corrr.tidymodels.org/reference/stretch.html'>stretch</a></span><span class='o'>(</span><span class='o'>)</span>
<span class='c'>#&gt; <span style='color: #555555;'># A tibble: 16 × 3</span></span>
<span class='c'>#&gt;    x                 y                       r</span>
<span class='c'>#&gt;    <span style='color: #555555; font-style: italic;'>&lt;chr&gt;</span>             <span style='color: #555555; font-style: italic;'>&lt;chr&gt;</span>               <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span></span>
<span class='c'>#&gt; <span style='color: #555555;'> 1</span> bill_length_mm    bill_length_mm    <span style='color: #BB0000;'>NA</span>     </span>
<span class='c'>#&gt; <span style='color: #555555;'> 2</span> bill_length_mm    bill_depth_mm     -<span style='color: #BB0000;'>0.444</span> </span>
<span class='c'>#&gt; <span style='color: #555555;'> 3</span> bill_length_mm    flipper_length_mm  0.866 </span>
<span class='c'>#&gt; <span style='color: #555555;'> 4</span> bill_length_mm    year               0.096<span style='text-decoration: underline;'>8</span></span>
<span class='c'>#&gt; <span style='color: #555555;'> 5</span> bill_depth_mm     bill_length_mm    -<span style='color: #BB0000;'>0.444</span> </span>
<span class='c'>#&gt; <span style='color: #555555;'> 6</span> bill_depth_mm     bill_depth_mm     <span style='color: #BB0000;'>NA</span>     </span>
<span class='c'>#&gt; <span style='color: #555555;'> 7</span> bill_depth_mm     flipper_length_mm -<span style='color: #BB0000;'>0.579</span> </span>
<span class='c'>#&gt; <span style='color: #555555;'> 8</span> bill_depth_mm     year               0.138 </span>
<span class='c'>#&gt; <span style='color: #555555;'> 9</span> flipper_length_mm bill_length_mm     0.866 </span>
<span class='c'>#&gt; <span style='color: #555555;'>10</span> flipper_length_mm bill_depth_mm     -<span style='color: #BB0000;'>0.579</span> </span>
<span class='c'>#&gt; <span style='color: #555555;'>11</span> flipper_length_mm flipper_length_mm <span style='color: #BB0000;'>NA</span>     </span>
<span class='c'>#&gt; <span style='color: #555555;'>12</span> flipper_length_mm year               0.105 </span>
<span class='c'>#&gt; <span style='color: #555555;'>13</span> year              bill_length_mm     0.096<span style='text-decoration: underline;'>8</span></span>
<span class='c'>#&gt; <span style='color: #555555;'>14</span> year              bill_depth_mm      0.138 </span>
<span class='c'>#&gt; <span style='color: #555555;'>15</span> year              flipper_length_mm  0.105 </span>
<span class='c'>#&gt; <span style='color: #555555;'>16</span> year              year              <span style='color: #BB0000;'>NA</span></span></code></pre>
</div>
<p>You can see that results are in a long format.</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='nv'>biscoe_cor</span> <span class='o'>%&gt;%</span>
   <span class='nf'><a href='https://corrr.tidymodels.org/reference/focus.html'>focus</a></span><span class='o'>(</span><span class='s'>"year"</span><span class='o'>)</span>
<span class='c'>#&gt; <span style='color: #555555;'># A tibble: 3 × 2</span></span>
<span class='c'>#&gt;   term                year</span>
<span class='c'>#&gt;   <span style='color: #555555; font-style: italic;'>&lt;chr&gt;</span>              <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span></span>
<span class='c'>#&gt; <span style='color: #555555;'>1</span> bill_length_mm    0.096<span style='text-decoration: underline;'>8</span></span>
<span class='c'>#&gt; <span style='color: #555555;'>2</span> bill_depth_mm     0.138 </span>
<span class='c'>#&gt; <span style='color: #555555;'>3</span> flipper_length_mm 0.105</span></code></pre>
</div>
<p>Correlations with <code>year</code>:</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='nv'>biscoe_cor</span> <span class='o'>%&gt;%</span>
  <span class='nf'><a href='https://corrr.tidymodels.org/reference/rearrange.html'>rearrange</a></span><span class='o'>(</span><span class='o'>)</span> <span class='o'>%&gt;%</span>
  <span class='nf'><a href='https://corrr.tidymodels.org/reference/rplot.html'>rplot</a></span><span class='o'>(</span><span class='o'>)</span>
<span class='c'>#&gt; Don't know how to automatically pick scale for object of type noquote. Defaulting to continuous.</span>
</code></pre>
<p><img src="figs/unnamed-chunk-18-1.png" width="700px" style="display: block; margin: auto;" /></p>
</div>
</details>
</div>
</div>
<br>

                    </div>

                    <br>

                    








<div class="share-box" aria-hidden="true">
  <ul class="share">
    
      
      
      
        
      
      
      
      <li>
        <a href="https://twitter.com/intent/tweet?url=https://biodash.github.io/codeclub/s03e05_correlation/&amp;text=S03E05:%20Introduction%20to%20correlation" target="_blank" rel="noopener" class="share-btn-twitter">
          <i class="fab fa-twitter"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.facebook.com/sharer.php?u=https://biodash.github.io/codeclub/s03e05_correlation/&amp;t=S03E05:%20Introduction%20to%20correlation" target="_blank" rel="noopener" class="share-btn-facebook">
          <i class="fab fa-facebook"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="mailto:?subject=S03E05:%20Introduction%20to%20correlation&amp;body=https://biodash.github.io/codeclub/s03e05_correlation/" target="_blank" rel="noopener" class="share-btn-email">
          <i class="fas fa-envelope"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.linkedin.com/shareArticle?url=https://biodash.github.io/codeclub/s03e05_correlation/&amp;title=S03E05:%20Introduction%20to%20correlation" target="_blank" rel="noopener" class="share-btn-linkedin">
          <i class="fab fa-linkedin-in"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="whatsapp://send?text=S03E05:%20Introduction%20to%20correlation%20https://biodash.github.io/codeclub/s03e05_correlation/" target="_blank" rel="noopener" class="share-btn-whatsapp">
          <i class="fab fa-whatsapp"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://service.weibo.com/share/share.php?url=https://biodash.github.io/codeclub/s03e05_correlation/&amp;title=S03E05:%20Introduction%20to%20correlation" target="_blank" rel="noopener" class="share-btn-weibo">
          <i class="fab fa-weibo"></i>
        </a>
      </li>
    
  </ul>
</div>











  
  
    



  
  
  
  
  
  <div class="media author-card content-widget-hr">
    
      
      <a href="/authors/stephen-opiyo/"><img class="avatar mr-3 avatar-circle" src="/authors/stephen-opiyo/avatar_hu97f3077fdef19fd71aab353b93aaa071_254986_270x270_fill_q90_lanczos_center.jpg" alt="Stephen Opiyo"></a>
    

    <div class="media-body">
      <h5 class="card-title"><a href="/authors/stephen-opiyo/">Stephen Opiyo</a></h5>
      <h6 class="card-subtitle">Biostatistician at MCIC</h6>
      
      <ul class="network-icon" aria-hidden="true">
  
    
    
    
      
    
    
    
    
    
    <li>
      <a href="mailto:opiyo.1@osu.edu" >
        <i class="fas fa-envelope"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://github.com/so13839" target="_blank" rel="noopener">
        <i class="fab fa-github"></i>
      </a>
    </li>
  
</ul>

    </div>
  </div>


  
















                    <br>

                    <hr class="separator">

                    <div class="clearfix">
                        
                        
                        <span class="previous-link">
                            <a href="https://biodash.github.io/codeclub/s03e03_pca/">← S03E03: Principal Component Analysis (PCA)</a>
                        </span>
                        
                        
                        
                        
                        <span class="next-link">
                            <a href="https://biodash.github.io/codeclub/s03e06_datastructures/">S03E06: Data structures and subsetting →</a>
                        </span>
                        
                        
                    </div>

                    <hr class="separator">

                </div>

            </article>

            
        </main>
    </div>
</div>

  </div>

  <div class="page-footer">
    
    
    <div class="container">
      <footer class="site-footer">
    
    <p class="powered-by">
      <a href="/license/">LICENSE: CC-BY-SA <br> <i class="fab fa-creative-commons fa-2x"></i><i class="fab fa-creative-commons-by fa-2x"></i><i class="fab fa-creative-commons-sa fa-2x"></i> </a><br>
    </p>
    
</footer>
    </div>
    
  </div>

  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

      

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/instant.page/5.1.0/instantpage.min.js" integrity="sha512-1+qUtKoh9XZW7j+6LhRMAyOrgSQKenQ4mluTR+cvxXjP1Z54RxZuzstR/H9kgPXQsVB8IW7DMDFUJpzLjvhGSQ==" crossorigin="anonymous"></script>

      
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      

      
      

      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/highlight.min.js" integrity="sha512-TDKKr+IvoqZnPzc3l35hdjpHD0m+b2EC2SrLEgKDRWpxf2rFCxemkgvJ5kfU48ip+Y+m2XVKyOCD85ybtlZDmw==" crossorigin="anonymous"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/r.min.js"></script>
        
      

    

    
    
    
      <script async defer src="https://maps.googleapis.com/maps/api/js?key="></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/gmaps.js/0.4.25/gmaps.min.js" integrity="sha256-7vjlAeb8OaTrCXZkCNun9djzuB2owUsaO72kXaFDBJs=" crossorigin="anonymous"></script>
      
    

    
    

    
    
    
      
      <script id="search-hit-fuse-template" type="text/x-template">
        <div class="search-hit" id="summary-{{key}}">
          <div class="search-hit-content">
            <div class="search-hit-name">
              <a href="{{relpermalink}}">{{title}}</a>
              <div class="article-metadata search-hit-type">{{type}}</div>
              <p class="search-hit-description">{{snippet}}</p>
            </div>
          </div>
        </div>
      </script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>
      
    

    
    

    
    
    
    

    
    <script src="/js/bootstrap.bundle.min.6aed84840afc03ab4d5750157f69c120.js"></script>

    
    
      
      
      
      
      
      
      
    

    
    
    
    
    
    
    
    
      
      
    
    
      
    
    <script src="/en/js/wowchemy.min.2f16af175a3ec51b41b36bb4934b1cf7.js"></script>

    






</body>
</html>
