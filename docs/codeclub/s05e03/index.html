<!DOCTYPE html><html lang="en-us" >

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  
  
  
    <meta name="generator" content="Wowchemy 5.0.0-beta.3 for Hugo" />
  

  

  
  

  
  
  
  
  
    
    
    
  
  

  <meta name="author" content="Jelmer Poelstra" />

  
  
  
    
  
  <meta name="description" content="Today, we&#39;ll continue with the R4DS chapter on &#34;tidy&#34; data, refreshing ourselves on what it means for a dataframe to be in a tidy format, and how to reshape between tidy and untidy." />

  
  <link rel="alternate" hreflang="en-us" href="https://biodash.github.io/codeclub/s05e03/" />

  







  




  
  
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  

  
  
  
    <meta name="theme-color" content="#3f51b5" />
  

  
  
    
    <script src="/js/mathjax-config.js"></script>
  

  
  
  
  
    
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha256-FMvZuGapsJLjouA6k7Eo2lusoAX9i0ShlWFG6qt7SLc=" crossorigin="anonymous">

    
    

    
    
    
      
    
    
      
      
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/styles/github.min.css" crossorigin="anonymous" title="hl-light" media="print" onload="this.media='all'">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/styles/github.min.css" crossorigin="anonymous" title="hl-dark" media="print" onload="this.media='all'" disabled>
      
    

    
    
    

    

    
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js" integrity="" crossorigin="anonymous" async></script>
      
    
      
      

      
      

      
    
      
      

      
      

      
    
  

  
  
  
    
      
      <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap">
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap" media="print" onload="this.media='all'">
    
  

  
  
  
  
  
  <link rel="stylesheet" href="/css/wowchemy.80f9a276c6100914c616a06e45ba8d09.css" />

  




<script async src="https://www.googletagmanager.com/gtag/js?id=G-9F9CQ7P0DX"></script>
<script>
  window.dataLayer = window.dataLayer || [];

  function gtag() {
      dataLayer.push(arguments);
  }

  function trackOutboundLink(url, target) {
    gtag('event', 'click', {
         'event_category': 'outbound',
         'event_label': url,
         'transport_type': 'beacon',
         'event_callback': function () {
           if (target !== '_blank') {
             document.location = url;
           }
         }
    });
    console.debug("Outbound link clicked: " + url);
  }

  function onClickCallback(event) {
    if ((event.target.tagName !== 'A') || (event.target.host === window.location.host)) {
      return;
    }
    trackOutboundLink(event.target, event.target.getAttribute('target'));  
  }

  gtag('js', new Date());
  gtag('config', 'G-9F9CQ7P0DX', {});
  gtag('set', {'cookie_flags': 'SameSite=None;Secure'});

  
  document.addEventListener('click', onClickCallback, false);
</script>


  

  

  




  
  
  

  

  
    <link rel="manifest" href="/index.webmanifest" />
  

  <link rel="icon" type="image/png" href="/media/icon_hucc2cf774636a7e386557c89fa75ff618_191491_32x32_fill_lanczos_center_2.png" />
  <link rel="apple-touch-icon" type="image/png" href="/media/icon_hucc2cf774636a7e386557c89fa75ff618_191491_180x180_fill_lanczos_center_2.png" />

  <link rel="canonical" href="https://biodash.github.io/codeclub/s05e03/" />

  
  
  
  
  
  
  
  
    
  
  
  <meta property="twitter:card" content="summary_large_image" />
  
  <meta property="og:site_name" content="BioDASH" />
  <meta property="og:url" content="https://biodash.github.io/codeclub/s05e03/" />
  <meta property="og:title" content="S05E03: R4DS (2e) - Ch. 6 - Tidy Data 2 | BioDASH" />
  <meta property="og:description" content="Today, we&#39;ll continue with the R4DS chapter on &#34;tidy&#34; data, refreshing ourselves on what it means for a dataframe to be in a tidy format, and how to reshape between tidy and untidy." /><meta property="og:image" content="https://biodash.github.io/codeclub/s05e03/featured.jpeg" />
    <meta property="twitter:image" content="https://biodash.github.io/codeclub/s05e03/featured.jpeg" /><meta property="og:locale" content="en-us" />
  
    
      <meta
        property="article:published_time"
        content="2023-02-07T00:00:00&#43;00:00"
      />
    
    <meta property="article:modified_time" content="2023-02-07T12:33:20-05:00">
  

  



  

  

  <link rel='stylesheet' href='/css/highlight-light.css' title='hl-light'>
<link rel='stylesheet' href='/css/highlight-dark.css' title='hl-dark' disabled>



  <title>S05E03: R4DS (2e) - Ch. 6 - Tidy Data 2 | BioDASH</title>
</head>


<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" class="page-wrapper   " data-wc-page-id="11dfc51ec7cbd4df1038e2a37dfbe607" >

  
  
  
  
  
  
  
  
  <script src="/js/wowchemy-init.min.7a224883d792570fd34d30c7134eace3.js"></script>

  


<aside class="search-modal" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#" aria-label="Close"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="Search..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search" class="form-control"
        aria-label="Search...">
        
      </div>

      
      

      

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>



  <div class="page-header">
    











  


<nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
  <div class="container-xl">

    
    <div class="d-none d-lg-inline-flex">
      <a class="navbar-brand" href="/"><img src="/media/logo_hu6407506e646a281542ecb299640680ce_37988_0x70_resize_lanczos_2.png" alt="BioDASH"></a>
    </div>
    

    
    <button type="button" class="navbar-toggler" data-toggle="collapse"
            data-target="#navbar-content" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
    <span><i class="fas fa-bars"></i></span>
    </button>
    

    
    <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
      <a class="navbar-brand" href="/"><img src="/media/logo_hu6407506e646a281542ecb299640680ce_37988_0x70_resize_lanczos_2.png" alt="BioDASH"></a>
    </div>
    

    
    
    <div class="navbar-collapse main-menu-item collapse justify-content-start" id="navbar-content">

      
      <ul class="navbar-nav d-md-inline-flex">
        

        
        <li class="nav-item dropdown">
          <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true"><span>Code Club</span><span class="caret"></span>
          </a>
          <div class="dropdown-menu">
            
              <a class="dropdown-item" href="/codeclub-schedule/"><span>- <b>Schedule</b></span></a>
            
              <a class="dropdown-item" href="/codeclub/"><span>- Past Sessions</span></a>
            
              <a class="dropdown-item" href="/codeclub-setup/"><span>- Computer Setup</span></a>
            
              <a class="dropdown-item" href="/"><span>------------------------</span></a>
            
              <a class="dropdown-item" href="/codeclub-suggest/"><span>- Suggest a Topic</span></a>
            
              <a class="dropdown-item" href="/codeclub-present/"><span>- Info for Presenters</span></a>
            
              <a class="dropdown-item" href="/"><span>-----------------------</span></a>
            
              <a class="dropdown-item" href="/codeclub-about/"><span>- <b>About Code Club & Join Us!</b></span></a>
            
          </div>
        </li>

        
        

        
        <li class="nav-item dropdown">
          <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true"><span>Tutorials & Resources</span><span class="caret"></span>
          </a>
          <div class="dropdown-menu">
            
              <a class="dropdown-item" href="/events/"><span>Events</span></a>
            
              <a class="dropdown-item" href="/"><span>---------------------</span></a>
            
              <a class="dropdown-item" href="/tutorials/r-resources-tips/"><span>- R Resources and Tips</span></a>
            
              <a class="dropdown-item" href="/"><span>--------------------</span></a>
            
              <a class="dropdown-item" href="https://mcic-osu.github.io/2020-12-microbiomics-workshop/"><span>- Metabarcoding workshop (Fall '20)</span></a>
            
              <a class="dropdown-item" href="/tutorials/2021-01_rnaseq/"><span>- RNA-seq intro meetings (Spring '21)</span></a>
            
              <a class="dropdown-item" href="https://mcic-osu.github.io/pracs-sp21/"><span>- Computing Course (Spring '21)</span></a>
            
          </div>
        </li>

        
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/support/"><span>Bioinformatics Support</span></a>
        </li>

        
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/about/"><span>About</span></a>
        </li>

        
        

        

        
        
        
          
            
          
        

        

        
        
        
        

        
          
            
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="https://github.com/biodash/biodash.github.io" target="_blank" rel="noopener"><i class='fab fa-github'></i><span></span></a>
        </li>

        
        

        

        
        
        
          
            
          
        

        

        
        
        
        

        
          
            
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/index.xml" target="_blank" rel="noopener"><i class='fas fa-rss'></i><span></span></a>
        </li>

        
        

      

        
      </ul>
    </div>

    <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">

      
      
        
      
        
      
        
      
        
      

      
      
      <li class="nav-item">
        <a class="nav-link js-search" href="#" aria-label="Search"><i class="fas fa-search" aria-hidden="true"></i></a>
      </li>
      

      
      
      <li class="nav-item dropdown theme-dropdown">
        <a href="#" class="nav-link" data-toggle="dropdown" aria-haspopup="true" aria-label="Display preferences">
          <i class="fas fa-moon" aria-hidden="true"></i>
        </a>
        <div class="dropdown-menu">
          <a href="#" class="dropdown-item js-set-theme-light">
            <span>Light</span>
          </a>
          <a href="#" class="dropdown-item js-set-theme-dark">
            <span>Dark</span>
          </a>
          <a href="#" class="dropdown-item js-set-theme-auto">
            <span>Automatic</span>
          </a>
        </div>
      </li>
      

      
      

    </ul>

  </div>
</nav>


  </div>

  <div class="page-body">
    
<div class="container-fluid docs">
    <div class="row flex-xl-nowrap">
        <div class="d-none d-xl-block col-xl-2 docs-toc">
            <ul class="nav toc-top">
                <li><a href="#" id="back_to_top" class="docs-toc-title">Contents</a></li>
            </ul>
            <nav id="TableOfContents">
  <ul>
    <li><a href="#introduction">Introduction</a></li>
    <li><a href="#what-is-tidy-data">What is tidy data?</a></li>
    <li><a href="#why-should-you-care">Why should you care?</a></li>
    <li><a href="#two-functions-for-pivoting-data">Two functions for pivoting data</a></li>
    <li><a href="#pivot_wider"><code>pivot_wider()</code></a></li>
    <li><a href="#pivot_longer"><code>pivot_longer()</code></a></li>
    <li><a href="#breakout-rooms">Breakout Rooms</a>
      <ul>
        <li><a href="#exercise-1">Exercise 1</a></li>
        <li><a href="#exercise-2">Exercise 2</a></li>
        <li><a href="#bonus-1">Bonus 1</a></li>
      </ul>
    </li>
  </ul>
</nav>
        </div>
        <main class="col-12 col-md-0 col-xl-10 py-md-3 pl-md-5 docs-content" role="main">
            

            <article class="article">

                




















  
  
    
  


<div class="article-container pt-3">
  <h1>S05E03: R4DS (2e) - Ch. 6 - Tidy Data 2</h1>

  
  <p class="page-subtitle">Today, we&rsquo;ll continue with the R4DS chapter on &ldquo;tidy&rdquo; data, refreshing ourselves on what it means for a dataframe to be in a tidy format, and how to reshape between tidy and untidy.</p>
  

  



<div class="article-metadata">

  
  
  
  
  <div>
    

  <span >
      <a href="/authors/jessica-cooperstone/">Jessica Cooperstone</a></span>
  </div>
  
  

  
  <span class="article-date">
    
    
    Feb 7, 2023
  </span>
  

  

  

  
  
  
  
  

  
  

</div>

  





</div>


<div class="article-header article-container featured-image-wrapper mt-4 mb-4" style="max-width: 720px; max-height: 405px;">
  <div style="position: relative">
    <img src="/codeclub/s05e03/featured_hu244155dfdb9933eb22bdfab6438cf02d_600238_720x0_resize_q90_lanczos.jpeg" alt="" class="featured-image">
    <span class="article-header-caption">Illustrations from the Openscapes blog Tidy Data for reproducibility, efficiency, and collaboration by Julia Lowndes and Allison Horst</span>
  </div>
</div>



                <div class="article-container">
                    <div class="article-style">
                        <hr>
<h2 id="introduction">Introduction</h2>
<p>Today we will learn about a consistent way to organize your data in R, using a system called <strong>&ldquo;tidy&rdquo; data</strong>.</p>
<p>Then we will cover the primary tool use for tidying data, <strong>pivoting</strong>. Pivoting allows you to change the shape of your data without changing any of the values. <a href="https://biodash.github.io/codeclub/s05e02/" target="_blank" rel="noopener">Last week</a> we went over <a href="https://tidyr.tidyverse.org/reference/pivot_longer.html" target="_blank" rel="noopener"><code>pivot_longer()</code></a>, today we are going to:</p>
<ul>
<li>refresh on tidy data</li>
<li>refresh on <a href="https://tidyr.tidyverse.org/reference/pivot_longer.html" target="_blank" rel="noopener"><code>pivot_longer()</code></a></li>
<li>learn <a href="https://tidyr.tidyverse.org/reference/pivot_wider.html" target="_blank" rel="noopener"><code>pivot_wider()</code></a></li>
</ul>
<p>We will again be using tools embedded within the <code>tidyverse</code> package, so we need to load it before we can use it. We do that with the <a href="https://rdrr.io/r/base/library.html" target="_blank" rel="noopener"><code>library()</code></a> function.</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span><span class='c'># you should have the tidyverse installed, but if not, do so using:</span></span>
<span><span class='c'># install.packages("tidyverse")</span></span>
<span></span>
<span><span class='c'># load the tidyverse</span></span>
<span><span class='kr'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='o'>(</span><span class='nv'><a href='https://tidyverse.tidyverse.org'>tidyverse</a></span><span class='o'>)</span></span></code></pre>
</div>
<br>
<hr>
<h2 id="what-is-tidy-data">What is tidy data?</h2>
<p>Let&rsquo;s briefly go over again the idea of tidy data.</p>
<p align="center">
<img src=img/tidy_data.jpeg width="50%" alt="Stylized text providing an overview of Tidy Data. The top reads “Tidy data is a standard way of mapping the meaning of a dataset to its structure. - Hadley Wickham.” On the left reads “In tidy data: each variable forms a column; each observation forms a row; each cell is a single measurement.” There is an example table on the lower right with columns ‘id’, ‘name’ and ‘color’ with observations for different cats, illustrating tidy data structure.">
</p>
<p>Illustrations from the <a href="https://www.openscapes.org/" target="_blank" rel="noopener">Openscapes</a> blog <a href="https://www.openscapes.org/blog/2020/10/12/tidy-data/" target="_blank" rel="noopener">Tidy Data for reproducibility, efficiency, and collaboration</a> by Julia Lowndes and Allison Horst</p>
<p>This is easier to &ldquo;see&rdquo; than to explain.👀</p>
<p>Here is an example of non-tidy data, where there is <em>data embedded in column names</em>.</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span><span class='nv'>billboard</span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'># A tibble: 317 × 79</span></span></span>
<span><span class='c'>#&gt;    artist track date.ent…¹   wk1   wk2   wk3   wk4   wk5   wk6   wk7   wk8   wk9</span></span>
<span><span class='c'>#&gt;    <span style='color: #555555; font-style: italic;'>&lt;chr&gt;</span>  <span style='color: #555555; font-style: italic;'>&lt;chr&gt;</span> <span style='color: #555555; font-style: italic;'>&lt;date&gt;</span>     <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span> <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span> <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span> <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span> <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span> <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span> <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span> <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span> <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span></span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'> 1</span> 2 Pac  Baby… 2000-02-26    87    82    72    77    87    94    99    <span style='color: #BB0000;'>NA</span>    <span style='color: #BB0000;'>NA</span></span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'> 2</span> 2Ge+h… The … 2000-09-02    91    87    92    <span style='color: #BB0000;'>NA</span>    <span style='color: #BB0000;'>NA</span>    <span style='color: #BB0000;'>NA</span>    <span style='color: #BB0000;'>NA</span>    <span style='color: #BB0000;'>NA</span>    <span style='color: #BB0000;'>NA</span></span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'> 3</span> 3 Doo… Kryp… 2000-04-08    81    70    68    67    66    57    54    53    51</span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'> 4</span> 3 Doo… Loser 2000-10-21    76    76    72    69    67    65    55    59    62</span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'> 5</span> 504 B… Wobb… 2000-04-15    57    34    25    17    17    31    36    49    53</span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'> 6</span> 98^0   Give… 2000-08-19    51    39    34    26    26    19     2     2     3</span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'> 7</span> A*Tee… Danc… 2000-07-08    97    97    96    95   100    <span style='color: #BB0000;'>NA</span>    <span style='color: #BB0000;'>NA</span>    <span style='color: #BB0000;'>NA</span>    <span style='color: #BB0000;'>NA</span></span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'> 8</span> Aaliy… I Do… 2000-01-29    84    62    51    41    38    35    35    38    38</span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'> 9</span> Aaliy… Try … 2000-03-18    59    53    38    28    21    18    16    14    12</span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'>10</span> Adams… Open… 2000-08-26    76    76    74    69    68    67    61    58    57</span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'># … with 307 more rows, 67 more variables: wk10 &lt;dbl&gt;, wk11 &lt;dbl&gt;, wk12 &lt;dbl&gt;,</span></span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'>#   wk13 &lt;dbl&gt;, wk14 &lt;dbl&gt;, wk15 &lt;dbl&gt;, wk16 &lt;dbl&gt;, wk17 &lt;dbl&gt;, wk18 &lt;dbl&gt;,</span></span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'>#   wk19 &lt;dbl&gt;, wk20 &lt;dbl&gt;, wk21 &lt;dbl&gt;, wk22 &lt;dbl&gt;, wk23 &lt;dbl&gt;, wk24 &lt;dbl&gt;,</span></span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'>#   wk25 &lt;dbl&gt;, wk26 &lt;dbl&gt;, wk27 &lt;dbl&gt;, wk28 &lt;dbl&gt;, wk29 &lt;dbl&gt;, wk30 &lt;dbl&gt;,</span></span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'>#   wk31 &lt;dbl&gt;, wk32 &lt;dbl&gt;, wk33 &lt;dbl&gt;, wk34 &lt;dbl&gt;, wk35 &lt;dbl&gt;, wk36 &lt;dbl&gt;,</span></span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'>#   wk37 &lt;dbl&gt;, wk38 &lt;dbl&gt;, wk39 &lt;dbl&gt;, wk40 &lt;dbl&gt;, wk41 &lt;dbl&gt;, wk42 &lt;dbl&gt;,</span></span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'>#   wk43 &lt;dbl&gt;, wk44 &lt;dbl&gt;, wk45 &lt;dbl&gt;, wk46 &lt;dbl&gt;, wk47 &lt;dbl&gt;, wk48 &lt;dbl&gt;, …</span></span></span></code></pre>
</div>
<p>Here is an example of the same exact data, in a tidy format, where those data that used to be column names, are now <em>values coded for a particular variable</em>.</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span><span class='nv'>billboard</span> <span class='o'>|&gt;</span> </span>
<span>  <span class='nf'><a href='https://tidyr.tidyverse.org/reference/pivot_longer.html'>pivot_longer</a></span><span class='o'>(</span></span>
<span>    cols <span class='o'>=</span> <span class='nf'><a href='https://tidyselect.r-lib.org/reference/starts_with.html'>starts_with</a></span><span class='o'>(</span><span class='s'>"wk"</span><span class='o'>)</span>, </span>
<span>    names_to <span class='o'>=</span> <span class='s'>"week"</span>, </span>
<span>    values_to <span class='o'>=</span> <span class='s'>"rank"</span></span>
<span>  <span class='o'>)</span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'># A tibble: 24,092 × 5</span></span></span>
<span><span class='c'>#&gt;    artist track                   date.entered week   rank</span></span>
<span><span class='c'>#&gt;    <span style='color: #555555; font-style: italic;'>&lt;chr&gt;</span>  <span style='color: #555555; font-style: italic;'>&lt;chr&gt;</span>                   <span style='color: #555555; font-style: italic;'>&lt;date&gt;</span>       <span style='color: #555555; font-style: italic;'>&lt;chr&gt;</span> <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span></span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'> 1</span> 2 Pac  Baby Don't Cry (Keep... 2000-02-26   wk1      87</span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'> 2</span> 2 Pac  Baby Don't Cry (Keep... 2000-02-26   wk2      82</span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'> 3</span> 2 Pac  Baby Don't Cry (Keep... 2000-02-26   wk3      72</span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'> 4</span> 2 Pac  Baby Don't Cry (Keep... 2000-02-26   wk4      77</span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'> 5</span> 2 Pac  Baby Don't Cry (Keep... 2000-02-26   wk5      87</span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'> 6</span> 2 Pac  Baby Don't Cry (Keep... 2000-02-26   wk6      94</span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'> 7</span> 2 Pac  Baby Don't Cry (Keep... 2000-02-26   wk7      99</span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'> 8</span> 2 Pac  Baby Don't Cry (Keep... 2000-02-26   wk8      <span style='color: #BB0000;'>NA</span></span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'> 9</span> 2 Pac  Baby Don't Cry (Keep... 2000-02-26   wk9      <span style='color: #BB0000;'>NA</span></span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'>10</span> 2 Pac  Baby Don't Cry (Keep... 2000-02-26   wk10     <span style='color: #BB0000;'>NA</span></span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'># … with 24,082 more rows</span></span></span></code></pre>
</div>
<br>
<h2 id="why-should-you-care">Why should you care?</h2>
<p>Let&rsquo;s go through an example where we will learn that we can&rsquo;t make the visualization that we want, because our data is not in tidy format.</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span><span class='nv'>world_bank_pop</span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'># A tibble: 1,056 × 20</span></span></span>
<span><span class='c'>#&gt;    country indic…¹ `2000` `2001` `2002` `2003`  `2004`  `2005`   `2006`   `2007`</span></span>
<span><span class='c'>#&gt;    <span style='color: #555555; font-style: italic;'>&lt;chr&gt;</span>   <span style='color: #555555; font-style: italic;'>&lt;chr&gt;</span>    <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span>  <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span>  <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span>  <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span>   <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span>   <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span>    <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span>    <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span></span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'> 1</span> ABW     SP.URB… 4.24<span style='color: #555555;'>e</span>4 4.30<span style='color: #555555;'>e</span>4 4.37<span style='color: #555555;'>e</span>4 4.42<span style='color: #555555;'>e</span>4 4.47<span style='color: #555555;'>e</span>+4 4.49<span style='color: #555555;'>e</span>+4  4.49<span style='color: #555555;'>e</span>+4  4.47<span style='color: #555555;'>e</span>+4</span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'> 2</span> ABW     SP.URB… 1.18<span style='color: #555555;'>e</span>0 1.41<span style='color: #555555;'>e</span>0 1.43<span style='color: #555555;'>e</span>0 1.31<span style='color: #555555;'>e</span>0 9.51<span style='color: #555555;'>e</span><span style='color: #BB0000;'>-1</span> 4.91<span style='color: #555555;'>e</span><span style='color: #BB0000;'>-1</span> -<span style='color: #BB0000;'>1.78</span><span style='color: #555555;'>e</span><span style='color: #BB0000;'>-2</span> -<span style='color: #BB0000;'>4.35</span><span style='color: #555555;'>e</span><span style='color: #BB0000;'>-1</span></span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'> 3</span> ABW     SP.POP… 9.09<span style='color: #555555;'>e</span>4 9.29<span style='color: #555555;'>e</span>4 9.50<span style='color: #555555;'>e</span>4 9.70<span style='color: #555555;'>e</span>4 9.87<span style='color: #555555;'>e</span>+4 1.00<span style='color: #555555;'>e</span>+5  1.01<span style='color: #555555;'>e</span>+5  1.01<span style='color: #555555;'>e</span>+5</span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'> 4</span> ABW     SP.POP… 2.06<span style='color: #555555;'>e</span>0 2.23<span style='color: #555555;'>e</span>0 2.23<span style='color: #555555;'>e</span>0 2.11<span style='color: #555555;'>e</span>0 1.76<span style='color: #555555;'>e</span>+0 1.30<span style='color: #555555;'>e</span>+0  7.98<span style='color: #555555;'>e</span><span style='color: #BB0000;'>-1</span>  3.84<span style='color: #555555;'>e</span><span style='color: #BB0000;'>-1</span></span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'> 5</span> AFG     SP.URB… 4.44<span style='color: #555555;'>e</span>6 4.65<span style='color: #555555;'>e</span>6 4.89<span style='color: #555555;'>e</span>6 5.16<span style='color: #555555;'>e</span>6 5.43<span style='color: #555555;'>e</span>+6 5.69<span style='color: #555555;'>e</span>+6  5.93<span style='color: #555555;'>e</span>+6  6.15<span style='color: #555555;'>e</span>+6</span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'> 6</span> AFG     SP.URB… 3.91<span style='color: #555555;'>e</span>0 4.66<span style='color: #555555;'>e</span>0 5.13<span style='color: #555555;'>e</span>0 5.23<span style='color: #555555;'>e</span>0 5.12<span style='color: #555555;'>e</span>+0 4.77<span style='color: #555555;'>e</span>+0  4.12<span style='color: #555555;'>e</span>+0  3.65<span style='color: #555555;'>e</span>+0</span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'> 7</span> AFG     SP.POP… 2.01<span style='color: #555555;'>e</span>7 2.10<span style='color: #555555;'>e</span>7 2.20<span style='color: #555555;'>e</span>7 2.31<span style='color: #555555;'>e</span>7 2.41<span style='color: #555555;'>e</span>+7 2.51<span style='color: #555555;'>e</span>+7  2.59<span style='color: #555555;'>e</span>+7  2.66<span style='color: #555555;'>e</span>+7</span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'> 8</span> AFG     SP.POP… 3.49<span style='color: #555555;'>e</span>0 4.25<span style='color: #555555;'>e</span>0 4.72<span style='color: #555555;'>e</span>0 4.82<span style='color: #555555;'>e</span>0 4.47<span style='color: #555555;'>e</span>+0 3.87<span style='color: #555555;'>e</span>+0  3.23<span style='color: #555555;'>e</span>+0  2.76<span style='color: #555555;'>e</span>+0</span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'> 9</span> AGO     SP.URB… 8.23<span style='color: #555555;'>e</span>6 8.71<span style='color: #555555;'>e</span>6 9.22<span style='color: #555555;'>e</span>6 9.77<span style='color: #555555;'>e</span>6 1.03<span style='color: #555555;'>e</span>+7 1.09<span style='color: #555555;'>e</span>+7  1.15<span style='color: #555555;'>e</span>+7  1.21<span style='color: #555555;'>e</span>+7</span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'>10</span> AGO     SP.URB… 5.44<span style='color: #555555;'>e</span>0 5.59<span style='color: #555555;'>e</span>0 5.70<span style='color: #555555;'>e</span>0 5.76<span style='color: #555555;'>e</span>0 5.75<span style='color: #555555;'>e</span>+0 5.69<span style='color: #555555;'>e</span>+0  4.92<span style='color: #555555;'>e</span>+0  4.89<span style='color: #555555;'>e</span>+0</span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'># … with 1,046 more rows, 10 more variables: `2008` &lt;dbl&gt;, `2009` &lt;dbl&gt;,</span></span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'>#   `2010` &lt;dbl&gt;, `2011` &lt;dbl&gt;, `2012` &lt;dbl&gt;, `2013` &lt;dbl&gt;, `2014` &lt;dbl&gt;,</span></span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'>#   `2015` &lt;dbl&gt;, `2016` &lt;dbl&gt;, `2017` &lt;dbl&gt;, and abbreviated variable name</span></span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'>#   ¹​indicator</span></span></span><span></span>
<span><span class='c'># look at world_bank_pop using glimpse</span></span>
<span><span class='nf'><a href='https://pillar.r-lib.org/reference/glimpse.html'>glimpse</a></span><span class='o'>(</span><span class='nv'>world_bank_pop</span><span class='o'>)</span></span>
<span><span class='c'>#&gt; Rows: 1,056</span></span>
<span><span class='c'>#&gt; Columns: 20</span></span>
<span><span class='c'>#&gt; $ country   <span style='color: #555555; font-style: italic;'>&lt;chr&gt;</span> "ABW", "ABW", "ABW", "ABW", "AFG", "AFG", "AFG", "AFG", "AGO…</span></span>
<span><span class='c'>#&gt; $ indicator <span style='color: #555555; font-style: italic;'>&lt;chr&gt;</span> "SP.URB.TOTL", "SP.URB.GROW", "SP.POP.TOTL", "SP.POP.GROW", …</span></span>
<span><span class='c'>#&gt; $ `2000`    <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span> 4.244400e+04, 1.182632e+00, 9.085300e+04, 2.055027e+00, 4.43…</span></span>
<span><span class='c'>#&gt; $ `2001`    <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span> 4.304800e+04, 1.413021e+00, 9.289800e+04, 2.225930e+00, 4.64…</span></span>
<span><span class='c'>#&gt; $ `2002`    <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span> 4.367000e+04, 1.434560e+00, 9.499200e+04, 2.229056e+00, 4.89…</span></span>
<span><span class='c'>#&gt; $ `2003`    <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span> 4.424600e+04, 1.310360e+00, 9.701700e+04, 2.109354e+00, 5.15…</span></span>
<span><span class='c'>#&gt; $ `2004`    <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span> 4.466900e+04, 9.514777e-01, 9.873700e+04, 1.757353e+00, 5.42…</span></span>
<span><span class='c'>#&gt; $ `2005`    <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span> 4.488900e+04, 4.913027e-01, 1.000310e+05, 1.302039e+00, 5.69…</span></span>
<span><span class='c'>#&gt; $ `2006`    <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span> 4.488100e+04, -1.782333e-02, 1.008320e+05, 7.975628e-01, 5.9…</span></span>
<span><span class='c'>#&gt; $ `2007`    <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span> 4.468600e+04, -4.354289e-01, 1.012200e+05, 3.840600e-01, 6.1…</span></span>
<span><span class='c'>#&gt; $ `2008`    <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span> 4.437500e+04, -6.984006e-01, 1.013530e+05, 1.313107e-01, 6.3…</span></span>
<span><span class='c'>#&gt; $ `2009`    <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span> 4.405200e+04, -7.305493e-01, 1.014530e+05, 9.861642e-02, 6.5…</span></span>
<span><span class='c'>#&gt; $ `2010`    <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span> 4.377800e+04, -6.239346e-01, 1.016690e+05, 2.126801e-01, 6.8…</span></span>
<span><span class='c'>#&gt; $ `2011`    <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span> 4.382200e+04, 1.004566e-01, 1.020530e+05, 3.769848e-01, 7.11…</span></span>
<span><span class='c'>#&gt; $ `2012`    <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span> 4.406400e+04, 5.507148e-01, 1.025770e+05, 5.121450e-01, 7.41…</span></span>
<span><span class='c'>#&gt; $ `2013`    <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span> 4.436000e+04, 6.695040e-01, 1.031870e+05, 5.929140e-01, 7.73…</span></span>
<span><span class='c'>#&gt; $ `2014`    <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span> 4.467400e+04, 7.053514e-01, 1.037950e+05, 5.874924e-01, 8.05…</span></span>
<span><span class='c'>#&gt; $ `2015`    <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span> 4.497900e+04, 6.804037e-01, 1.043410e+05, 5.246582e-01, 8.36…</span></span>
<span><span class='c'>#&gt; $ `2016`    <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span> 4.527500e+04, 6.559290e-01, 1.048220e+05, 4.599292e-01, 8.67…</span></span>
<span><span class='c'>#&gt; $ `2017`    <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span> 4.557200e+04, 6.538489e-01, 1.052640e+05, 4.207807e-01, 8.97…</span></span></code></pre>
</div>
<p>What if we want to make a plot to see how population has changed (y-axis) for a specific country (say, the USA) over the duration for which data is collected (x-axis)? With the data in this format, we cannot make this plot. This is because <strong>year</strong> is not a column in our dataframe. This population information is spread over all of the columns that have a year as their name.</p>
<p>We can fix this by using <a href="https://tidyr.tidyverse.org/reference/pivot_longer.html" target="_blank" rel="noopener"><code>pivot_longer()</code></a>.</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span><span class='nv'>world_bank_pop_tidy</span> <span class='o'>&lt;-</span> <span class='nv'>world_bank_pop</span> <span class='o'>|&gt;</span> </span>
<span>  <span class='nf'><a href='https://tidyr.tidyverse.org/reference/pivot_longer.html'>pivot_longer</a></span><span class='o'>(</span>cols <span class='o'>=</span> <span class='o'>!</span><span class='nf'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='o'>(</span><span class='nv'>country</span>, <span class='nv'>indicator</span><span class='o'>)</span>, <span class='c'># which columns do we want to "pivot"</span></span>
<span>               names_to <span class='o'>=</span> <span class='s'>"year"</span>, <span class='c'># where should the column names go</span></span>
<span>               values_to <span class='o'>=</span> <span class='s'>"measure"</span><span class='o'>)</span> <span class='c'># where should the values within each cell go</span></span>
<span></span>
<span><span class='c'># check how this went</span></span>
<span><span class='nf'><a href='https://pillar.r-lib.org/reference/glimpse.html'>glimpse</a></span><span class='o'>(</span><span class='nv'>world_bank_pop_tidy</span><span class='o'>)</span></span>
<span><span class='c'>#&gt; Rows: 19,008</span></span>
<span><span class='c'>#&gt; Columns: 4</span></span>
<span><span class='c'>#&gt; $ country   <span style='color: #555555; font-style: italic;'>&lt;chr&gt;</span> "ABW", "ABW", "ABW", "ABW", "ABW", "ABW", "ABW", "ABW", "ABW…</span></span>
<span><span class='c'>#&gt; $ indicator <span style='color: #555555; font-style: italic;'>&lt;chr&gt;</span> "SP.URB.TOTL", "SP.URB.TOTL", "SP.URB.TOTL", "SP.URB.TOTL", …</span></span>
<span><span class='c'>#&gt; $ year      <span style='color: #555555; font-style: italic;'>&lt;chr&gt;</span> "2000", "2001", "2002", "2003", "2004", "2005", "2006", "200…</span></span>
<span><span class='c'>#&gt; $ measure   <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span> 4.244400e+04, 4.304800e+04, 4.367000e+04, 4.424600e+04, 4.46…</span></span><span></span>
<span><span class='c'># convert year from a character to a number so we can plot it </span></span>
<span><span class='nv'>world_bank_pop_tidy</span> <span class='o'>&lt;-</span> <span class='nv'>world_bank_pop_tidy</span> <span class='o'>|&gt;</span> </span>
<span>  <span class='nf'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='o'>(</span>year <span class='o'>=</span> <span class='nf'><a href='https://rdrr.io/r/base/numeric.html'>as.numeric</a></span><span class='o'>(</span><span class='nv'>year</span><span class='o'>)</span><span class='o'>)</span></span>
<span></span>
<span><span class='c'># check again </span></span>
<span><span class='nf'><a href='https://pillar.r-lib.org/reference/glimpse.html'>glimpse</a></span><span class='o'>(</span><span class='nv'>world_bank_pop_tidy</span><span class='o'>)</span></span>
<span><span class='c'>#&gt; Rows: 19,008</span></span>
<span><span class='c'>#&gt; Columns: 4</span></span>
<span><span class='c'>#&gt; $ country   <span style='color: #555555; font-style: italic;'>&lt;chr&gt;</span> "ABW", "ABW", "ABW", "ABW", "ABW", "ABW", "ABW", "ABW", "ABW…</span></span>
<span><span class='c'>#&gt; $ indicator <span style='color: #555555; font-style: italic;'>&lt;chr&gt;</span> "SP.URB.TOTL", "SP.URB.TOTL", "SP.URB.TOTL", "SP.URB.TOTL", …</span></span>
<span><span class='c'>#&gt; $ year      <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span> 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, …</span></span>
<span><span class='c'>#&gt; $ measure   <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span> 4.244400e+04, 4.304800e+04, 4.367000e+04, 4.424600e+04, 4.46…</span></span></code></pre>
</div>
<p>Now we can make the plot we want. If you&rsquo;re not familiar with ggplot syntax you can learn more in the R4DS section called <a href="https://r4ds.hadley.nz/visualize.html" target="_blank" rel="noopener">Visualize</a> or in past code clubs on:</p>
<ul>
<li><a href="https://biodash.github.io/codeclub/s02e06_ggplot2/" target="_blank" rel="noopener">ggplot</a></li>
<li><a href="https://biodash.github.io/codeclub/s02e07_ggplot2_part2/" target="_blank" rel="noopener">ggplot some more</a></li>
<li><a href="https://datavisualizing.netlify.app/module2.html" target="_blank" rel="noopener">my data viz class</a></li>
</ul>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span><span class='c'># a minimal plot</span></span>
<span><span class='nv'>world_bank_pop_tidy</span> <span class='o'>|&gt;</span> </span>
<span>  <span class='nf'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='o'>(</span><span class='nv'>country</span> <span class='o'>==</span> <span class='s'>"USA"</span><span class='o'>)</span> <span class='o'>|&gt;</span> </span>
<span>  <span class='nf'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='o'>(</span><span class='nv'>indicator</span> <span class='o'>==</span> <span class='s'>"SP.POP.TOTL"</span><span class='o'>)</span> <span class='o'>|&gt;</span> </span>
<span>  <span class='nf'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='o'>(</span><span class='nf'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='o'>(</span>x <span class='o'>=</span> <span class='nv'>year</span>, y <span class='o'>=</span> <span class='nv'>measure</span>, color <span class='o'>=</span> <span class='nv'>country</span><span class='o'>)</span><span class='o'>)</span> <span class='o'>+</span> </span>
<span>  <span class='nf'><a href='https://ggplot2.tidyverse.org/reference/geom_path.html'>geom_line</a></span><span class='o'>(</span><span class='o'>)</span> </span>
</code></pre>
<p><img src="figs/unnamed-chunk-6-1.png" width="700px" style="display: block; margin: auto;" /></p>
<pre class='chroma'><code class='language-r' data-lang='r'><span></span>
<span><span class='c'># a more polished plot</span></span>
<span><span class='nv'>world_bank_pop_tidy</span> <span class='o'>|&gt;</span> </span>
<span>  <span class='nf'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='o'>(</span><span class='nv'>country</span> <span class='o'>==</span> <span class='s'>"USA"</span><span class='o'>)</span> <span class='o'>|&gt;</span> </span>
<span>  <span class='nf'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='o'>(</span><span class='nv'>indicator</span> <span class='o'>==</span> <span class='s'>"SP.POP.TOTL"</span><span class='o'>)</span> <span class='o'>|&gt;</span> </span>
<span>  <span class='nf'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='o'>(</span><span class='nf'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='o'>(</span>x <span class='o'>=</span> <span class='nv'>year</span>, y <span class='o'>=</span> <span class='nv'>measure</span>, color <span class='o'>=</span> <span class='nv'>country</span><span class='o'>)</span><span class='o'>)</span> <span class='o'>+</span></span>
<span>  <span class='nf'><a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span><span class='o'>(</span><span class='o'>)</span> <span class='o'>+</span></span>
<span>  <span class='nf'><a href='https://ggplot2.tidyverse.org/reference/geom_path.html'>geom_line</a></span><span class='o'>(</span><span class='o'>)</span> <span class='o'>+</span></span>
<span>  <span class='nf'><a href='https://ggplot2.tidyverse.org/reference/scale_continuous.html'>scale_y_continuous</a></span><span class='o'>(</span>limits <span class='o'>=</span> <span class='nf'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='o'>(</span><span class='m'>0</span>, <span class='m'>4e8</span><span class='o'>)</span><span class='o'>)</span> <span class='o'>+</span></span>
<span><span class='c'># ylim(c(0, 4e8)) + # also works instead of scale_y_continuous</span></span>
<span>  <span class='nf'><a href='https://ggplot2.tidyverse.org/reference/ggtheme.html'>theme_minimal</a></span><span class='o'>(</span><span class='o'>)</span> <span class='o'>+</span></span>
<span>  <span class='nf'><a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme</a></span><span class='o'>(</span>legend.position <span class='o'>=</span> <span class='s'>"none"</span><span class='o'>)</span> <span class='o'>+</span></span>
<span>  <span class='nf'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs</a></span><span class='o'>(</span>x <span class='o'>=</span> <span class='s'>"Year"</span>,</span>
<span>       y <span class='o'>=</span> <span class='s'>"Population"</span>,</span>
<span>       title <span class='o'>=</span> <span class='s'>"Total population in the United States \nfrom 2000 to 2017"</span>,</span>
<span>       caption <span class='o'>=</span> <span class='s'>"Data from the World Bank"</span><span class='o'>)</span></span>
</code></pre>
<p><img src="figs/unnamed-chunk-6-2.png" width="700px" style="display: block; margin: auto;" /></p>
</div>
<p>Often it may be easier to collect your data in wide format, but analyze it in tidy (i.e., long) format.</p>
<blockquote>
<p>This does not mean you must now collect your data in tidy format! You simply need to become comfortable with switching between formats.</p>
</blockquote>
<h2 id="two-functions-for-pivoting-data">Two functions for pivoting data</h2>
<ul>
<li>
<p><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html" target="_blank" rel="noopener"><strong><code>pivot_longer()</code></strong></a> pulls data that is embedded in column names, and reshapes your dataframe such this information is now embedded within the values. This typically makes your dataframes longer (i.e., increases the number of rows).<br>
<em>Typically</em>, we use <a href="https://tidyr.tidyverse.org/reference/pivot_longer.html" target="_blank" rel="noopener"><code>pivot_longer()</code></a> to make an untidy dataset tidy, since untidy datasets often have multiple columns for a single variable, and multiple observations in a single row.</p>
</li>
<li>
<p><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html" target="_blank" rel="noopener"><strong><code>pivot_wider()</code></strong></a> takes data that is embedded in the values of your dataframe, and puts this information in variable names. This typically makes your dataframe &ldquo;wider&rdquo; (i.e., increases the number of columns).<br>
<em>Typically</em>, <a href="https://tidyr.tidyverse.org/reference/pivot_wider.html" target="_blank" rel="noopener"><code>pivot_wider()</code></a> will make a dataset untidy, but this can still be useful for certain calculations, or if you want to use a for loop to do something iteratively across columns.</p>
</li>
</ul>
<br>
<hr>
<h2 id="pivot_wider"><code>pivot_wider()</code></h2>
<p>The opposite of <a href="https://tidyr.tidyverse.org/reference/pivot_longer.html" target="_blank" rel="noopener"><code>pivot_longer()</code></a> is <a href="https://tidyr.tidyverse.org/reference/pivot_wider.html" target="_blank" rel="noopener"><code>pivot_wider()</code></a>. We haven&rsquo;t used <a href="https://tidyr.tidyverse.org/reference/pivot_wider.html" target="_blank" rel="noopener"><code>pivot_wider()</code></a> get so let&rsquo;s try it. We are going to use the dataframe <code>population</code> which is pre-loaded with the tidyverse. This dataframe is currently in tidy format.</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span><span class='c'># what is in population?</span></span>
<span><span class='nf'><a href='https://pillar.r-lib.org/reference/glimpse.html'>glimpse</a></span><span class='o'>(</span><span class='nv'>population</span><span class='o'>)</span></span>
<span><span class='c'>#&gt; Rows: 4,060</span></span>
<span><span class='c'>#&gt; Columns: 3</span></span>
<span><span class='c'>#&gt; $ country    <span style='color: #555555; font-style: italic;'>&lt;chr&gt;</span> "Afghanistan", "Afghanistan", "Afghanistan", "Afghanistan",…</span></span>
<span><span class='c'>#&gt; $ year       <span style='color: #555555; font-style: italic;'>&lt;int&gt;</span> 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004,…</span></span>
<span><span class='c'>#&gt; $ population <span style='color: #555555; font-style: italic;'>&lt;int&gt;</span> 17586073, 18415307, 19021226, 19496836, 19987071, 20595360,…</span></span></code></pre>
</div>
<p>What if we wanted to adjust the data so that instead of having a column called <code>year</code>, the data for each year is its own column, and have the corresponding <code>population</code> within each cell ? We can do that with <a href="https://tidyr.tidyverse.org/reference/pivot_wider.html" target="_blank" rel="noopener"><code>pivot_wider()</code></a>.</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span><span class='nv'>population_wide</span> <span class='o'>&lt;-</span> <span class='nv'>population</span> <span class='o'>|&gt;</span></span>
<span>  <span class='nf'><a href='https://tidyr.tidyverse.org/reference/pivot_wider.html'>pivot_wider</a></span><span class='o'>(</span>names_from <span class='o'>=</span> <span class='s'>"year"</span>,</span>
<span>              values_from <span class='o'>=</span> <span class='s'>"population"</span><span class='o'>)</span></span>
<span></span>
<span><span class='nf'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='o'>(</span><span class='nv'>population_wide</span><span class='o'>)</span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'># A tibble: 6 × 20</span></span></span>
<span><span class='c'>#&gt;   country  `1995` `1996` `1997` `1998` `1999` `2000` `2001` `2002` `2003` `2004`</span></span>
<span><span class='c'>#&gt;   <span style='color: #555555; font-style: italic;'>&lt;chr&gt;</span>     <span style='color: #555555; font-style: italic;'>&lt;int&gt;</span>  <span style='color: #555555; font-style: italic;'>&lt;int&gt;</span>  <span style='color: #555555; font-style: italic;'>&lt;int&gt;</span>  <span style='color: #555555; font-style: italic;'>&lt;int&gt;</span>  <span style='color: #555555; font-style: italic;'>&lt;int&gt;</span>  <span style='color: #555555; font-style: italic;'>&lt;int&gt;</span>  <span style='color: #555555; font-style: italic;'>&lt;int&gt;</span>  <span style='color: #555555; font-style: italic;'>&lt;int&gt;</span>  <span style='color: #555555; font-style: italic;'>&lt;int&gt;</span>  <span style='color: #555555; font-style: italic;'>&lt;int&gt;</span></span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'>1</span> Afghani… 1.76<span style='color: #555555;'>e</span>7 1.84<span style='color: #555555;'>e</span>7 1.90<span style='color: #555555;'>e</span>7 1.95<span style='color: #555555;'>e</span>7 2.00<span style='color: #555555;'>e</span>7 2.06<span style='color: #555555;'>e</span>7 2.13<span style='color: #555555;'>e</span>7 2.22<span style='color: #555555;'>e</span>7 2.31<span style='color: #555555;'>e</span>7 2.40<span style='color: #555555;'>e</span>7</span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'>2</span> Albania  3.36<span style='color: #555555;'>e</span>6 3.34<span style='color: #555555;'>e</span>6 3.33<span style='color: #555555;'>e</span>6 3.33<span style='color: #555555;'>e</span>6 3.32<span style='color: #555555;'>e</span>6 3.30<span style='color: #555555;'>e</span>6 3.29<span style='color: #555555;'>e</span>6 3.26<span style='color: #555555;'>e</span>6 3.24<span style='color: #555555;'>e</span>6 3.22<span style='color: #555555;'>e</span>6</span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'>3</span> Algeria  2.93<span style='color: #555555;'>e</span>7 2.98<span style='color: #555555;'>e</span>7 3.03<span style='color: #555555;'>e</span>7 3.08<span style='color: #555555;'>e</span>7 3.13<span style='color: #555555;'>e</span>7 3.17<span style='color: #555555;'>e</span>7 3.22<span style='color: #555555;'>e</span>7 3.26<span style='color: #555555;'>e</span>7 3.30<span style='color: #555555;'>e</span>7 3.35<span style='color: #555555;'>e</span>7</span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'>4</span> America… 5.29<span style='color: #555555;'>e</span>4 5.39<span style='color: #555555;'>e</span>4 5.49<span style='color: #555555;'>e</span>4 5.59<span style='color: #555555;'>e</span>4 5.68<span style='color: #555555;'>e</span>4 5.75<span style='color: #555555;'>e</span>4 5.82<span style='color: #555555;'>e</span>4 5.87<span style='color: #555555;'>e</span>4 5.91<span style='color: #555555;'>e</span>4 5.93<span style='color: #555555;'>e</span>4</span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'>5</span> Andorra  6.39<span style='color: #555555;'>e</span>4 6.43<span style='color: #555555;'>e</span>4 6.41<span style='color: #555555;'>e</span>4 6.38<span style='color: #555555;'>e</span>4 6.41<span style='color: #555555;'>e</span>4 6.54<span style='color: #555555;'>e</span>4 6.8 <span style='color: #555555;'>e</span>4 7.16<span style='color: #555555;'>e</span>4 7.56<span style='color: #555555;'>e</span>4 7.91<span style='color: #555555;'>e</span>4</span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'>6</span> Angola   1.21<span style='color: #555555;'>e</span>7 1.25<span style='color: #555555;'>e</span>7 1.28<span style='color: #555555;'>e</span>7 1.31<span style='color: #555555;'>e</span>7 1.35<span style='color: #555555;'>e</span>7 1.39<span style='color: #555555;'>e</span>7 1.44<span style='color: #555555;'>e</span>7 1.49<span style='color: #555555;'>e</span>7 1.54<span style='color: #555555;'>e</span>7 1.60<span style='color: #555555;'>e</span>7</span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'># … with 9 more variables: `2005` &lt;int&gt;, `2006` &lt;int&gt;, `2007` &lt;int&gt;,</span></span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'>#   `2008` &lt;int&gt;, `2009` &lt;int&gt;, `2010` &lt;int&gt;, `2011` &lt;int&gt;, `2012` &lt;int&gt;,</span></span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'>#   `2013` &lt;int&gt;</span></span></span></code></pre>
</div>
<hr>
<h2 id="pivot_longer"><code>pivot_longer()</code></h2>
<p>Let&rsquo;s practice again using <a href="https://tidyr.tidyverse.org/reference/pivot_longer.html" target="_blank" rel="noopener"><code>pivot_longer()</code></a>. We just made a wide dataframe with <a href="https://tidyr.tidyverse.org/reference/pivot_wider.html" target="_blank" rel="noopener"><code>pivot_wider()</code></a> - can we make it long again?</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span><span class='nv'>population_long</span> <span class='o'>&lt;-</span> <span class='nv'>population_wide</span> <span class='o'>|&gt;</span></span>
<span>  <span class='nf'><a href='https://tidyr.tidyverse.org/reference/pivot_longer.html'>pivot_longer</a></span><span class='o'>(</span>cols <span class='o'>=</span> <span class='o'>!</span><span class='nv'>country</span>, <span class='c'># all columns except country</span></span>
<span>               names_to <span class='o'>=</span> <span class='s'>"year"</span>,</span>
<span>               values_to <span class='o'>=</span> <span class='s'>"population"</span><span class='o'>)</span></span>
<span></span>
<span><span class='nf'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='o'>(</span><span class='nv'>population_long</span><span class='o'>)</span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'># A tibble: 6 × 3</span></span></span>
<span><span class='c'>#&gt;   country     year  population</span></span>
<span><span class='c'>#&gt;   <span style='color: #555555; font-style: italic;'>&lt;chr&gt;</span>       <span style='color: #555555; font-style: italic;'>&lt;chr&gt;</span>      <span style='color: #555555; font-style: italic;'>&lt;int&gt;</span></span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'>1</span> Afghanistan 1995    17<span style='text-decoration: underline;'>586</span>073</span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'>2</span> Afghanistan 1996    18<span style='text-decoration: underline;'>415</span>307</span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'>3</span> Afghanistan 1997    19<span style='text-decoration: underline;'>021</span>226</span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'>4</span> Afghanistan 1998    19<span style='text-decoration: underline;'>496</span>836</span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'>5</span> Afghanistan 1999    19<span style='text-decoration: underline;'>987</span>071</span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'>6</span> Afghanistan 2000    20<span style='text-decoration: underline;'>595</span>360</span></span></code></pre>
</div>
<p>There are many different ways you can code to tell R which columns you want to pivot. I&rsquo;m showing below some other ways to code the same outcome, but you can find a more ocomprehensive list of <a href="https://tidyr.tidyverse.org/reference/tidyr_tidy_select.html" target="_blank" rel="noopener">tidy-select helpers</a> in the <code>tidyr</code> documentation page.</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span><span class='nv'>population_long</span> <span class='o'>&lt;-</span> <span class='nv'>population_wide</span> <span class='o'>|&gt;</span></span>
<span>  <span class='nf'><a href='https://tidyr.tidyverse.org/reference/pivot_longer.html'>pivot_longer</a></span><span class='o'>(</span>cols <span class='o'>=</span> <span class='nf'>where</span><span class='o'>(</span><span class='nv'>is.numeric</span><span class='o'>)</span>, <span class='c'># all numeric columns</span></span>
<span>               names_to <span class='o'>=</span> <span class='s'>"year"</span>,</span>
<span>               values_to <span class='o'>=</span> <span class='s'>"population"</span><span class='o'>)</span></span>
<span></span>
<span><span class='nf'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='o'>(</span><span class='nv'>population_long</span><span class='o'>)</span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'># A tibble: 6 × 3</span></span></span>
<span><span class='c'>#&gt;   country     year  population</span></span>
<span><span class='c'>#&gt;   <span style='color: #555555; font-style: italic;'>&lt;chr&gt;</span>       <span style='color: #555555; font-style: italic;'>&lt;chr&gt;</span>      <span style='color: #555555; font-style: italic;'>&lt;int&gt;</span></span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'>1</span> Afghanistan 1995    17<span style='text-decoration: underline;'>586</span>073</span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'>2</span> Afghanistan 1996    18<span style='text-decoration: underline;'>415</span>307</span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'>3</span> Afghanistan 1997    19<span style='text-decoration: underline;'>021</span>226</span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'>4</span> Afghanistan 1998    19<span style='text-decoration: underline;'>496</span>836</span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'>5</span> Afghanistan 1999    19<span style='text-decoration: underline;'>987</span>071</span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'>6</span> Afghanistan 2000    20<span style='text-decoration: underline;'>595</span>360</span></span></code></pre>
</div>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span><span class='nv'>population_long</span> <span class='o'>&lt;-</span> <span class='nv'>population_wide</span> <span class='o'>|&gt;</span></span>
<span>  <span class='nf'><a href='https://tidyr.tidyverse.org/reference/pivot_longer.html'>pivot_longer</a></span><span class='o'>(</span>cols <span class='o'>=</span> <span class='m'>2</span><span class='o'>:</span><span class='m'>20</span>, <span class='c'># columns 2 through 20</span></span>
<span>               names_to <span class='o'>=</span> <span class='s'>"year"</span>,</span>
<span>               values_to <span class='o'>=</span> <span class='s'>"population"</span><span class='o'>)</span></span>
<span></span>
<span><span class='nf'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='o'>(</span><span class='nv'>population_long</span><span class='o'>)</span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'># A tibble: 6 × 3</span></span></span>
<span><span class='c'>#&gt;   country     year  population</span></span>
<span><span class='c'>#&gt;   <span style='color: #555555; font-style: italic;'>&lt;chr&gt;</span>       <span style='color: #555555; font-style: italic;'>&lt;chr&gt;</span>      <span style='color: #555555; font-style: italic;'>&lt;int&gt;</span></span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'>1</span> Afghanistan 1995    17<span style='text-decoration: underline;'>586</span>073</span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'>2</span> Afghanistan 1996    18<span style='text-decoration: underline;'>415</span>307</span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'>3</span> Afghanistan 1997    19<span style='text-decoration: underline;'>021</span>226</span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'>4</span> Afghanistan 1998    19<span style='text-decoration: underline;'>496</span>836</span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'>5</span> Afghanistan 1999    19<span style='text-decoration: underline;'>987</span>071</span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'>6</span> Afghanistan 2000    20<span style='text-decoration: underline;'>595</span>360</span></span></code></pre>
</div>
<hr>
<h2 id="breakout-rooms">Breakout Rooms</h2>
<p>We are going to use some data that is a part of the <code>#TidyTuesday</code> series of data activities for tidyverse/R learning. I&rsquo;ve picked some <a href="https://github.com/rfordatascience/tidytuesday/tree/master/data/2022/2022-02-01" target="_blank" rel="noopener">data</a> that comes from the American Kennel Club and was compiled by <a href="https://github.com/kkakey/dog_traits_AKC/blob/main/README.md" target="_blank" rel="noopener">KKakey</a>.</p>
<p>First we will download data that contains popularity of dog breeds by AKC registration from 2013-2020. You can access the data through the chunk of code below.</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span><span class='nv'>breed_rank_all</span> <span class='o'>&lt;-</span> <span class='nf'>readr</span><span class='nf'>::</span><span class='nf'><a href='https://readr.tidyverse.org/reference/read_delim.html'>read_csv</a></span><span class='o'>(</span><span class='s'>'https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2022/2022-02-01/breed_rank.csv'</span><span class='o'>)</span></span></code></pre>
</div>
<div class="puzzle">
<div>
<h3 id="exercise-1">Exercise 1</h3>
<p>Convert this data from wide format to long format.</p>
<details>
<summary>
<b>Hint 1</b>(click here)
</summary>
<br>
<p>Use the function <a href="https://tidyr.tidyverse.org/reference/pivot_longer.html" target="_blank" rel="noopener"><code>pivot_longer()</code></a>. Try setting the arguments <code>cols =</code>, <code>names_to =</code> and <code>values_to =</code>.</p>
</details>
<br>
<details>
<summary>
<b>Hint 2 after you've already pivoted</b>(click here)
</summary>
<br>
<p>Note that each column is called Year Rank (e.g., 2020 Rank) and not just Year (e.g., 2020). You can fix this within <a href="https://tidyr.tidyverse.org/reference/pivot_longer.html" target="_blank" rel="noopener"><code>pivot_longer()</code></a> using <code>names_transform</code>. Try visiting this <a href="https://www.tidyverse.org/blog/2020/05/tidyr-1.1.0/" target="_blank" rel="noopener">link</a> for some help.</p>
</details>
<br>
<details>
<summary>
<b>Solution</b>(click here)
</summary>
<br>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span><span class='nf'><a href='https://pillar.r-lib.org/reference/glimpse.html'>glimpse</a></span><span class='o'>(</span><span class='nv'>breed_rank_all</span><span class='o'>)</span></span>
<span><span class='c'>#&gt; Rows: 195</span></span>
<span><span class='c'>#&gt; Columns: 11</span></span>
<span><span class='c'>#&gt; $ Breed       <span style='color: #555555; font-style: italic;'>&lt;chr&gt;</span> "Retrievers (Labrador)", "French Bulldogs", "German Shephe…</span></span>
<span><span class='c'>#&gt; $ `2013 Rank` <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span> 1, 11, 2, 3, 5, 8, 4, 9, 13, 10, 24, 20, 6, 7, 16, 14, 18,…</span></span>
<span><span class='c'>#&gt; $ `2014 Rank` <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span> 1, 9, 2, 3, 4, 7, 5, 10, 12, 11, 22, 18, 6, 8, 15, 13, 19,…</span></span>
<span><span class='c'>#&gt; $ `2015 Rank` <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span> 1, 6, 2, 3, 4, 8, 5, 9, 11, 13, 20, 17, 7, 10, 15, 12, 18,…</span></span>
<span><span class='c'>#&gt; $ `2016 Rank` <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span> 1, 6, 2, 3, 4, 7, 5, 8, 11, 13, 18, 16, 9, 10, 14, 12, 19,…</span></span>
<span><span class='c'>#&gt; $ `2017 Rank` <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span> 1, 4, 2, 3, 5, 7, 6, 8, 10, 13, 15, 17, 9, 11, 14, 12, 19,…</span></span>
<span><span class='c'>#&gt; $ `2018 Rank` <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span> 1, 4, 2, 3, 5, 7, 6, 8, 9, 12, 13, 15, 10, 11, 16, 14, 18,…</span></span>
<span><span class='c'>#&gt; $ `2019 Rank` <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span> 1, 4, 2, 3, 5, 6, 7, 8, 9, 11, 10, 13, 12, 14, 17, 15, 16,…</span></span>
<span><span class='c'>#&gt; $ `2020 Rank` <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span> 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17,…</span></span>
<span><span class='c'>#&gt; $ links       <span style='color: #555555; font-style: italic;'>&lt;chr&gt;</span> "https://www.akc.org/dog-breeds/labrador-retriever/", "htt…</span></span>
<span><span class='c'>#&gt; $ Image       <span style='color: #555555; font-style: italic;'>&lt;chr&gt;</span> "https://www.akc.org/wp-content/uploads/2017/11/Labrador-R…</span></span><span></span>
<span><span class='nv'>breed_rank_tidy</span> <span class='o'>&lt;-</span> <span class='nv'>breed_rank_all</span> <span class='o'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='nf'><a href='https://tidyr.tidyverse.org/reference/pivot_longer.html'>pivot_longer</a></span><span class='o'>(</span>cols <span class='o'>=</span> <span class='nf'><a href='https://tidyselect.r-lib.org/reference/starts_with.html'>contains</a></span><span class='o'>(</span><span class='s'>"Rank"</span><span class='o'>)</span>,</span>
<span>              names_to <span class='o'>=</span> <span class='s'>"year"</span>,</span>
<span>              values_to <span class='o'>=</span> <span class='s'>"rank"</span>,</span>
<span>              names_transform <span class='o'>=</span> <span class='nf'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='o'>(</span>year <span class='o'>=</span> <span class='nv'>parse_number</span><span class='o'>)</span><span class='o'>)</span></span>
<span></span>
<span><span class='nf'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='o'>(</span><span class='nv'>breed_rank_tidy</span><span class='o'>)</span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'># A tibble: 6 × 5</span></span></span>
<span><span class='c'>#&gt;   Breed                 links                                  Image  year  rank</span></span>
<span><span class='c'>#&gt;   <span style='color: #555555; font-style: italic;'>&lt;chr&gt;</span>                 <span style='color: #555555; font-style: italic;'>&lt;chr&gt;</span>                                  <span style='color: #555555; font-style: italic;'>&lt;chr&gt;</span> <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span> <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span></span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'>1</span> Retrievers (Labrador) https://www.akc.org/dog-breeds/labrad… http…  <span style='text-decoration: underline;'>2</span>013     1</span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'>2</span> Retrievers (Labrador) https://www.akc.org/dog-breeds/labrad… http…  <span style='text-decoration: underline;'>2</span>014     1</span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'>3</span> Retrievers (Labrador) https://www.akc.org/dog-breeds/labrad… http…  <span style='text-decoration: underline;'>2</span>015     1</span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'>4</span> Retrievers (Labrador) https://www.akc.org/dog-breeds/labrad… http…  <span style='text-decoration: underline;'>2</span>016     1</span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'>5</span> Retrievers (Labrador) https://www.akc.org/dog-breeds/labrad… http…  <span style='text-decoration: underline;'>2</span>017     1</span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'>6</span> Retrievers (Labrador) https://www.akc.org/dog-breeds/labrad… http…  <span style='text-decoration: underline;'>2</span>018     1</span></span></code></pre>
</div>
</details>
</div>
</div>
<br>
<div class="puzzle">
<div>
<h3 id="exercise-2">Exercise 2</h3>
<p>Take that new dataframe you&rsquo;ve just made using <a href="https://tidyr.tidyverse.org/reference/pivot_longer.html" target="_blank" rel="noopener"><code>pivot_longer()</code></a> and make it wide again. No, you can&rsquo;t just use the original dataframe 😀🐶</p>
<details>
<summary>
<b>Hints</b>(click here)
</summary>
<br>
<p>Hints</p>
</details>
<br>
<details>
<summary>
<b>Solution</b>(click here)
</summary>
<br>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span><span class='nv'>breed_rank_wide</span> <span class='o'>&lt;-</span> <span class='nv'>breed_rank_tidy</span> <span class='o'>|&gt;</span></span>
<span>  <span class='nf'><a href='https://tidyr.tidyverse.org/reference/pivot_wider.html'>pivot_wider</a></span><span class='o'>(</span>names_from <span class='o'>=</span> <span class='s'>"year"</span>,</span>
<span>              values_from <span class='o'>=</span> <span class='s'>"rank"</span><span class='o'>)</span></span>
<span></span>
<span><span class='nf'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='o'>(</span><span class='nv'>breed_rank_wide</span><span class='o'>)</span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'># A tibble: 6 × 11</span></span></span>
<span><span class='c'>#&gt;   Breed      links Image `2013` `2014` `2015` `2016` `2017` `2018` `2019` `2020`</span></span>
<span><span class='c'>#&gt;   <span style='color: #555555; font-style: italic;'>&lt;chr&gt;</span>      <span style='color: #555555; font-style: italic;'>&lt;chr&gt;</span> <span style='color: #555555; font-style: italic;'>&lt;chr&gt;</span>  <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span>  <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span>  <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span>  <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span>  <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span>  <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span>  <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span>  <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span></span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'>1</span> Retriever… http… http…      1      1      1      1      1      1      1      1</span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'>2</span> French Bu… http… http…     11      9      6      6      4      4      4      2</span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'>3</span> German Sh… http… http…      2      2      2      2      2      2      2      3</span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'>4</span> Retriever… http… http…      3      3      3      3      3      3      3      4</span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'>5</span> Bulldogs   http… http…      5      4      4      4      5      5      5      5</span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'>6</span> Poodles    http… http…      8      7      8      7      7      7      6      6</span></span></code></pre>
</div>
<p>Note, that R is adding all your new columns to the end of your dataframe. If you want to reorder your columns, you can do that simply with <a href="https://dplyr.tidyverse.org/reference/select.html" target="_blank" rel="noopener"><code>select()</code></a> which both picks and orders columns. Note, you need backticks around a variable name when that variable name is a number (as this is atypical syntax for R).</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span><span class='nv'>breed_rank_wide</span> <span class='o'>&lt;-</span> <span class='nv'>breed_rank_wide</span> <span class='o'>|&gt;</span></span>
<span>  <span class='nf'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='o'>(</span><span class='nv'>Breed</span>, <span class='nv'>`2013`</span><span class='o'>:</span><span class='nv'>`2020`</span>, <span class='nf'><a href='https://tidyselect.r-lib.org/reference/everything.html'>everything</a></span><span class='o'>(</span><span class='o'>)</span><span class='o'>)</span> </span>
<span></span>
<span><span class='nf'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='o'>(</span><span class='nv'>breed_rank_wide</span><span class='o'>)</span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'># A tibble: 6 × 11</span></span></span>
<span><span class='c'>#&gt;   Breed      `2013` `2014` `2015` `2016` `2017` `2018` `2019` `2020` links Image</span></span>
<span><span class='c'>#&gt;   <span style='color: #555555; font-style: italic;'>&lt;chr&gt;</span>       <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span>  <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span>  <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span>  <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span>  <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span>  <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span>  <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span>  <span style='color: #555555; font-style: italic;'>&lt;dbl&gt;</span> <span style='color: #555555; font-style: italic;'>&lt;chr&gt;</span> <span style='color: #555555; font-style: italic;'>&lt;chr&gt;</span></span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'>1</span> Retriever…      1      1      1      1      1      1      1      1 http… http…</span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'>2</span> French Bu…     11      9      6      6      4      4      4      2 http… http…</span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'>3</span> German Sh…      2      2      2      2      2      2      2      3 http… http…</span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'>4</span> Retriever…      3      3      3      3      3      3      3      4 http… http…</span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'>5</span> Bulldogs        5      4      4      4      5      5      5      5 http… http…</span></span>
<span><span class='c'>#&gt; <span style='color: #555555;'>6</span> Poodles         8      7      8      7      7      7      6      6 http… http…</span></span></code></pre>
</div>
</details>
</div>
</div>
<br>
<h3 id="bonus-1">Bonus 1</h3>
<p>Try making a plot that shows the rank popularity of your favorite dog breeds over 2013-2020.</p>
<details>
<summary>
<b>Hints</b>(click here)
</summary>
<br>
<p>Use your tidy dataframe, <a href="https://dplyr.tidyverse.org/reference/filter.html" target="_blank" rel="noopener"><code>filter()</code></a> to pick the Breeds you want to keep, and maybe a combined point and line plot.</p>
</details>
<br>
<details>
<summary>
<b>Solution</b>(click here)
</summary>
<br>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span><span class='nv'>jess_fav_breeds</span> <span class='o'>&lt;-</span> <span class='nf'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='o'>(</span><span class='s'>"French Bulldogs"</span>, <span class='s'>"Boston Terriers"</span>, <span class='s'>"Pugs"</span><span class='o'>)</span></span>
<span></span>
<span><span class='nv'>breed_rank_tidy</span> <span class='o'>|&gt;</span></span>
<span>  <span class='nf'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='o'>(</span><span class='nv'>Breed</span> <span class='o'><a href='https://rdrr.io/r/base/match.html'>%in%</a></span> <span class='nv'>jess_fav_breeds</span><span class='o'>)</span> <span class='o'>|&gt;</span></span>
<span><span class='c'># filter(Breed == c("French Bulldogs", "Boston Terriers", "Pugs")) |&gt; # also works</span></span>
<span>  <span class='nf'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='o'>(</span><span class='nf'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='o'>(</span>x <span class='o'>=</span> <span class='nv'>year</span>, y <span class='o'>=</span> <span class='nv'>rank</span>, color <span class='o'>=</span> <span class='nv'>Breed</span><span class='o'>)</span><span class='o'>)</span> <span class='o'>+</span></span>
<span>  <span class='nf'><a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span><span class='o'>(</span><span class='o'>)</span> <span class='o'>+</span> </span>
<span>  <span class='nf'><a href='https://ggplot2.tidyverse.org/reference/geom_path.html'>geom_line</a></span><span class='o'>(</span><span class='o'>)</span> <span class='o'>+</span></span>
<span>  <span class='nf'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs</a></span><span class='o'>(</span>x <span class='o'>=</span> <span class='s'>"Year"</span>, </span>
<span>       y <span class='o'>=</span> <span class='s'>"Breed "</span>,</span>
<span>       title <span class='o'>=</span> <span class='s'>"AKC Popularity of Jess's Favorite Dog Breeds"</span>,</span>
<span>       caption <span class='o'>=</span> <span class='s'>"Data from AKC/#TidyTuesday"</span><span class='o'>)</span></span>
</code></pre>
<p><img src="figs/unnamed-chunk-16-1.png" width="700px" style="display: block; margin: auto;" /></p>
</div>
</details>
</div>
</div>
<br>
<hr>
<hr>
<br>

                    </div>

                    <br>

                    






<div class="article-tags">
  
  <a class="badge badge-light" href="/tags/codeclub/">codeclub</a>
  
  <a class="badge badge-light" href="/tags/r4ds/">r4ds</a>
  
</div>



<div class="share-box" aria-hidden="true">
  <ul class="share">
    
      
      
      
        
      
      
      
      <li>
        <a href="https://twitter.com/intent/tweet?url=https://biodash.github.io/codeclub/s05e03/&amp;text=S05E03:%20R4DS%20%282e%29%20-%20Ch.%206%20-%20Tidy%20Data%202" target="_blank" rel="noopener" class="share-btn-twitter">
          <i class="fab fa-twitter"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.facebook.com/sharer.php?u=https://biodash.github.io/codeclub/s05e03/&amp;t=S05E03:%20R4DS%20%282e%29%20-%20Ch.%206%20-%20Tidy%20Data%202" target="_blank" rel="noopener" class="share-btn-facebook">
          <i class="fab fa-facebook"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="mailto:?subject=S05E03:%20R4DS%20%282e%29%20-%20Ch.%206%20-%20Tidy%20Data%202&amp;body=https://biodash.github.io/codeclub/s05e03/" target="_blank" rel="noopener" class="share-btn-email">
          <i class="fas fa-envelope"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.linkedin.com/shareArticle?url=https://biodash.github.io/codeclub/s05e03/&amp;title=S05E03:%20R4DS%20%282e%29%20-%20Ch.%206%20-%20Tidy%20Data%202" target="_blank" rel="noopener" class="share-btn-linkedin">
          <i class="fab fa-linkedin-in"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="whatsapp://send?text=S05E03:%20R4DS%20%282e%29%20-%20Ch.%206%20-%20Tidy%20Data%202%20https://biodash.github.io/codeclub/s05e03/" target="_blank" rel="noopener" class="share-btn-whatsapp">
          <i class="fab fa-whatsapp"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://service.weibo.com/share/share.php?url=https://biodash.github.io/codeclub/s05e03/&amp;title=S05E03:%20R4DS%20%282e%29%20-%20Ch.%206%20-%20Tidy%20Data%202" target="_blank" rel="noopener" class="share-btn-weibo">
          <i class="fab fa-weibo"></i>
        </a>
      </li>
    
  </ul>
</div>











  
  
    



  
  
  
  
  
  <div class="media author-card content-widget-hr">
    
      
      <a href="/authors/jessica-cooperstone/"><img class="avatar mr-3 avatar-circle" src="/authors/jessica-cooperstone/avatar_hub3c8c373219f94b7f8251ccae20f3fcb_68385_270x270_fill_q90_lanczos_center.jpg" alt="Jessica Cooperstone"></a>
    

    <div class="media-body">
      <h5 class="card-title"><a href="/authors/jessica-cooperstone/">Jessica Cooperstone</a></h5>
      <h6 class="card-subtitle">Assistant Professor at HCS</h6>
      
      <ul class="network-icon" aria-hidden="true">
  
    
    
    
      
    
    
    
    
    
    <li>
      <a href="mailto:cooperstone.1@osu.edu" >
        <i class="fas fa-envelope"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://twitter.com/CooperstoneLab" target="_blank" rel="noopener">
        <i class="fab fa-twitter"></i>
      </a>
    </li>
  
    
    
    
    
    
    
    
      
    
    <li>
      <a href="https://scholar.google.com/citations?user=d-FkQNQAAAAJ&amp;hl=en" target="_blank" rel="noopener">
        <i class="ai ai-google-scholar"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://github.com/jcooperstone" target="_blank" rel="noopener">
        <i class="fab fa-github"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://phytochemicals.osu.edu/" target="_blank" rel="noopener">
        <i class="fas fa-external-link-alt"></i>
      </a>
    </li>
  
</ul>

    </div>
  </div>


  
















                    <br>

                    <hr class="separator">

                    <div class="clearfix">
                        
                        
                        <span class="previous-link">
                            <a href="https://biodash.github.io/codeclub/s05e02/">← S05E02: R4DS (2e) - Ch. 6 - Tidy Data</a>
                        </span>
                        
                        
                        
                    </div>

                    <hr class="separator">

                </div>

            </article>

            
        </main>
    </div>
</div>

  </div>

  <div class="page-footer">
    
    
    <div class="container">
      <footer class="site-footer">
    
    <p class="powered-by">
      <a href="/license/">LICENSE: CC-BY-SA <br> <i class="fab fa-creative-commons fa-2x"></i><i class="fab fa-creative-commons-by fa-2x"></i><i class="fab fa-creative-commons-sa fa-2x"></i> </a><br>
    </p>
    
</footer>
    </div>
    
  </div>

  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

      

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/instant.page/5.1.0/instantpage.min.js" integrity="sha512-1+qUtKoh9XZW7j+6LhRMAyOrgSQKenQ4mluTR+cvxXjP1Z54RxZuzstR/H9kgPXQsVB8IW7DMDFUJpzLjvhGSQ==" crossorigin="anonymous"></script>

      
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      

      
      

      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/highlight.min.js" integrity="sha512-TDKKr+IvoqZnPzc3l35hdjpHD0m+b2EC2SrLEgKDRWpxf2rFCxemkgvJ5kfU48ip+Y+m2XVKyOCD85ybtlZDmw==" crossorigin="anonymous"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/r.min.js"></script>
        
      

    

    
    
    
      <script async defer src="https://maps.googleapis.com/maps/api/js?key="></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/gmaps.js/0.4.25/gmaps.min.js" integrity="sha256-7vjlAeb8OaTrCXZkCNun9djzuB2owUsaO72kXaFDBJs=" crossorigin="anonymous"></script>
      
    

    
    

    
    
    
      
      <script id="search-hit-fuse-template" type="text/x-template">
        <div class="search-hit" id="summary-{{key}}">
          <div class="search-hit-content">
            <div class="search-hit-name">
              <a href="{{relpermalink}}">{{title}}</a>
              <div class="article-metadata search-hit-type">{{type}}</div>
              <p class="search-hit-description">{{snippet}}</p>
            </div>
          </div>
        </div>
      </script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>
      
    

    
    

    
    
    
    

    
    <script src="/js/bootstrap.bundle.min.6aed84840afc03ab4d5750157f69c120.js"></script>

    
    
      
      
      
      
      
      
      
    

    
    
    
    
    
    
    
    
      
      
    
    
      
    
    <script src="/en/js/wowchemy.min.2f16af175a3ec51b41b36bb4934b1cf7.js"></script>

    






</body>
</html>
