<!DOCTYPE html><html lang="en-us" >

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  
  
  
    <meta name="generator" content="Wowchemy 5.0.0-beta.3 for Hugo" />
  

  

  
  

  
  
  
  
  
    
    
    
  
  

  <meta name="author" content="Jelmer Poelstra" />

  
  
  
    
  
  <meta name="description" content="In this session of Code Club, we&#39;ll consider the `apply()` family of functions, which can often be used as efficient alternatives to writing some of the loops we worked with in the previous session." />

  
  <link rel="alternate" hreflang="en-us" href="https://biodash.github.io/codeclub/13_apply/" />

  







  




  
  
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  

  
  
  
    <meta name="theme-color" content="#3f51b5" />
  

  
  
    
    <script src="/js/mathjax-config.js"></script>
  

  
  
  
  
    
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha256-FMvZuGapsJLjouA6k7Eo2lusoAX9i0ShlWFG6qt7SLc=" crossorigin="anonymous">

    
    

    
    
    
      
    
    
      
      
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/styles/github.min.css" crossorigin="anonymous" title="hl-light" media="print" onload="this.media='all'">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/styles/github.min.css" crossorigin="anonymous" title="hl-dark" media="print" onload="this.media='all'" disabled>
      
    

    
    
    

    

    
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js" integrity="" crossorigin="anonymous" async></script>
      
    
      
      

      
      

      
    
      
      

      
      

      
    
  

  
  
  
    
      
      <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap">
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap" media="print" onload="this.media='all'">
    
  

  
  
  
  
  
  <link rel="stylesheet" href="/css/wowchemy.80f9a276c6100914c616a06e45ba8d09.css" />

  




<script async src="https://www.googletagmanager.com/gtag/js?id=G-9F9CQ7P0DX"></script>
<script>
  window.dataLayer = window.dataLayer || [];

  function gtag() {
      dataLayer.push(arguments);
  }

  function trackOutboundLink(url, target) {
    gtag('event', 'click', {
         'event_category': 'outbound',
         'event_label': url,
         'transport_type': 'beacon',
         'event_callback': function () {
           if (target !== '_blank') {
             document.location = url;
           }
         }
    });
    console.debug("Outbound link clicked: " + url);
  }

  function onClickCallback(event) {
    if ((event.target.tagName !== 'A') || (event.target.host === window.location.host)) {
      return;
    }
    trackOutboundLink(event.target, event.target.getAttribute('target'));  
  }

  gtag('js', new Date());
  gtag('config', 'G-9F9CQ7P0DX', {});
  gtag('set', {'cookie_flags': 'SameSite=None;Secure'});

  
  document.addEventListener('click', onClickCallback, false);
</script>


  

  

  




  
  
  

  

  
    <link rel="manifest" href="/index.webmanifest" />
  

  <link rel="icon" type="image/png" href="/media/icon_hucc2cf774636a7e386557c89fa75ff618_191491_32x32_fill_lanczos_center_2.png" />
  <link rel="apple-touch-icon" type="image/png" href="/media/icon_hucc2cf774636a7e386557c89fa75ff618_191491_180x180_fill_lanczos_center_2.png" />

  <link rel="canonical" href="https://biodash.github.io/codeclub/13_apply/" />

  
  
  
  
  
  
  
  
    
    
  
  
  <meta property="twitter:card" content="summary" />
  
  <meta property="og:site_name" content="BioDASH" />
  <meta property="og:url" content="https://biodash.github.io/codeclub/13_apply/" />
  <meta property="og:title" content="Session 13: Applying The Apply Functions | BioDASH" />
  <meta property="og:description" content="In this session of Code Club, we&#39;ll consider the `apply()` family of functions, which can often be used as efficient alternatives to writing some of the loops we worked with in the previous session." /><meta property="og:image" content="https://biodash.github.io/media/logo_hu6407506e646a281542ecb299640680ce_37988_300x300_fit_lanczos_2.png" />
    <meta property="twitter:image" content="https://biodash.github.io/media/logo_hu6407506e646a281542ecb299640680ce_37988_300x300_fit_lanczos_2.png" /><meta property="og:locale" content="en-us" />
  
    
      <meta
        property="article:published_time"
        content="2021-03-09T00:00:00&#43;00:00"
      />
    
    <meta property="article:modified_time" content="2021-03-11T13:58:00-05:00">
  

  



  

  

  <link rel='stylesheet' href='/css/highlight-light.css' title='hl-light'>
<link rel='stylesheet' href='/css/highlight-dark.css' title='hl-dark' disabled>



  <title>Session 13: Applying The Apply Functions | BioDASH</title>
</head>


<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" class="page-wrapper   " data-wc-page-id="98b7c3b4309c191255a49396f4ee17f4" >

  
  
  
  
  
  
  
  
  <script src="/js/wowchemy-init.min.7a224883d792570fd34d30c7134eace3.js"></script>

  


<aside class="search-modal" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#" aria-label="Close"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="Search..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search" class="form-control"
        aria-label="Search...">
        
      </div>

      
      

      

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>



  <div class="page-header">
    











  


<nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
  <div class="container-xl">

    
    <div class="d-none d-lg-inline-flex">
      <a class="navbar-brand" href="/"><img src="/media/logo_hu6407506e646a281542ecb299640680ce_37988_0x70_resize_lanczos_2.png" alt="BioDASH"></a>
    </div>
    

    
    <button type="button" class="navbar-toggler" data-toggle="collapse"
            data-target="#navbar-content" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
    <span><i class="fas fa-bars"></i></span>
    </button>
    

    
    <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
      <a class="navbar-brand" href="/"><img src="/media/logo_hu6407506e646a281542ecb299640680ce_37988_0x70_resize_lanczos_2.png" alt="BioDASH"></a>
    </div>
    

    
    
    <div class="navbar-collapse main-menu-item collapse justify-content-start" id="navbar-content">

      
      <ul class="navbar-nav d-md-inline-flex">
        

        
        <li class="nav-item dropdown">
          <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true"><span>Code Club</span><span class="caret"></span>
          </a>
          <div class="dropdown-menu">
            
              <a class="dropdown-item" href="/codeclub-schedule/"><span>- <b>Schedule</b></span></a>
            
              <a class="dropdown-item" href="/codeclub-schedule/#previous-semesters"><span>- Past Sessions</span></a>
            
              <a class="dropdown-item" href="/codeclub-setup/"><span>- Computer Setup</span></a>
            
              <a class="dropdown-item" href="/"><span>------------------------</span></a>
            
              <a class="dropdown-item" href="/codeclub-suggest/"><span>- Suggest a Topic</span></a>
            
              <a class="dropdown-item" href="/"><span>-----------------------</span></a>
            
              <a class="dropdown-item" href="/codeclub-about/"><span>- <b>About Code Club & Join Us!</b></span></a>
            
          </div>
        </li>

        
        

        
        <li class="nav-item dropdown">
          <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true"><span>Tutorials & Resources</span><span class="caret"></span>
          </a>
          <div class="dropdown-menu">
            
              <a class="dropdown-item" href="/events/2023-02_aws/"><span>AWS Workshop (Feb '23)</span></a>
            
              <a class="dropdown-item" href="/"><span>---------------------</span></a>
            
              <a class="dropdown-item" href="/tutorials/r-resources-tips/"><span>- R Resources and Tips</span></a>
            
              <a class="dropdown-item" href="/"><span>--------------------</span></a>
            
              <a class="dropdown-item" href="https://mcic-osu.github.io/2020-12-microbiomics-workshop/"><span>- Metabarcoding workshop (Fall '20)</span></a>
            
              <a class="dropdown-item" href="/tutorials/2021-01_rnaseq/"><span>- RNA-seq intro meetings (Spring '21)</span></a>
            
              <a class="dropdown-item" href="https://mcic-osu.github.io/pracs-sp21/"><span>- Computing Course (Spring '21)</span></a>
            
              <a class="dropdown-item" href="https://mcic-osu.github.io/cl-workshop-22/"><span>- Command-line, shell scripting and OSC Workshop (Summer '22)</span></a>
            
          </div>
        </li>

        
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/support/"><span>Bioinformatics Support</span></a>
        </li>

        
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/about/"><span>About</span></a>
        </li>

        
        

        

        
        
        
          
            
          
        

        

        
        
        
        

        
          
            
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="https://github.com/biodash/biodash.github.io" target="_blank" rel="noopener"><i class='fab fa-github'></i><span></span></a>
        </li>

        
        

        

        
        
        
          
            
          
        

        

        
        
        
        

        
          
            
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/index.xml" target="_blank" rel="noopener"><i class='fas fa-rss'></i><span></span></a>
        </li>

        
        

      

        
      </ul>
    </div>

    <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">

      
      
        
      
        
      
        
      
        
      

      
      
      <li class="nav-item">
        <a class="nav-link js-search" href="#" aria-label="Search"><i class="fas fa-search" aria-hidden="true"></i></a>
      </li>
      

      
      
      <li class="nav-item dropdown theme-dropdown">
        <a href="#" class="nav-link" data-toggle="dropdown" aria-haspopup="true" aria-label="Display preferences">
          <i class="fas fa-moon" aria-hidden="true"></i>
        </a>
        <div class="dropdown-menu">
          <a href="#" class="dropdown-item js-set-theme-light">
            <span>Light</span>
          </a>
          <a href="#" class="dropdown-item js-set-theme-dark">
            <span>Dark</span>
          </a>
          <a href="#" class="dropdown-item js-set-theme-auto">
            <span>Automatic</span>
          </a>
        </div>
      </li>
      

      
      

    </ul>

  </div>
</nav>


  </div>

  <div class="page-body">
    
<div class="container-fluid docs">
    <div class="row flex-xl-nowrap">
        <div class="d-none d-xl-block col-xl-2 docs-toc">
            <ul class="nav toc-top">
                <li><a href="#" id="back_to_top" class="docs-toc-title">Contents</a></li>
            </ul>
            <nav id="TableOfContents">
  <ul>
    <li><a href="#session-goals">Session Goals</a></li>
    <li><a href="#intro-the-apply-functions">Intro: The <code>apply()</code> Functions</a></li>
    <li><a href="#examples">Examples</a>
      <ul>
        <li><a href="#apply"><code>apply()</code></a></li>
        <li><a href="#lapply"><code>lapply()</code></a></li>
        <li><a href="#sapply"><code>sapply()</code></a></li>
      </ul>
    </li>
    <li><a href="#breakout-rooms">Breakout Rooms</a>
      <ul>
        <li><a href="#exercise-1">Exercise 1</a></li>
        <li><a href="#exercise-2">Exercise 2</a></li>
        <li><a href="#exercise-3">Exercise 3</a></li>
        <li><a href="#exercise-4">Exercise 4</a></li>
        <li><a href="#bonus-1">Bonus 1</a></li>
        <li><a href="#bonus-2">Bonus 2</a></li>
      </ul>
    </li>
    <li><a href="#purrr-an-alternative-tidy-approach-to-apply-functions">Purrr: An Alternative (Tidy) Approach To <code>apply()</code> Functions</a></li>
  </ul>
</nav>
        </div>
        <main class="col-12 col-md-0 col-xl-10 py-md-3 pl-md-5 docs-content" role="main">
            

            <article class="article">

                












  

  
  
  
<div class="article-container pt-3">
  <h1>Session 13: Applying The Apply Functions</h1>

  
  <p class="page-subtitle">Using the <code>apply()</code> functions of base R as an alternative to loops.</p>
  

  
    



<div class="article-metadata">

  
  
  
  
  <div>
    

  <span >
      <a href="/authors/mike-sovic/">Mike Sovic</a></span>
  </div>
  
  

  
  <span class="article-date">
    
    
    Mar 11, 2021
  </span>
  

  

  

  
  
  
  
  

  
  

</div>

    





  
</div>



                <div class="article-container">
                    <div class="article-style">
                        <hr>
<h2 id="session-goals">Session Goals</h2>
<ul>
<li>List the functions in the <a href="https://rdrr.io/r/base/apply.html" target="_blank" rel="noopener"><code>apply()</code></a> family of functions from base R.</li>
<li>Describe how the <a href="https://rdrr.io/r/base/apply.html" target="_blank" rel="noopener"><code>apply()</code></a> functions relate to loops in R.</li>
<li>Identify the input and output formats associated with different <a href="https://rdrr.io/r/base/apply.html" target="_blank" rel="noopener"><code>apply()</code></a> functions.</li>
<li>Identify appropriate <a href="https://rdrr.io/r/base/apply.html" target="_blank" rel="noopener"><code>apply()</code></a> functions for different scenarios.</li>
<li>Use <a href="https://rdrr.io/r/base/apply.html" target="_blank" rel="noopener"><code>apply()</code></a> functions to explore some US state temperature data.</li>
</ul>
<hr>
<h2 id="intro-the-apply-functions">Intro: The <code>apply()</code> Functions</h2>
<p>R is sometimes referred to as a functional programming language, and the <a href="https://rdrr.io/r/base/apply.html" target="_blank" rel="noopener"><code>apply()</code></a> family of functions from base R is an example of this functional programming. Let&rsquo;s first take a look at some available functions - they include&hellip;</p>
<ul>
<li><a href="https://rdrr.io/r/base/apply.html" target="_blank" rel="noopener"><code>apply()</code></a></li>
<li><a href="https://rdrr.io/r/base/lapply.html" target="_blank" rel="noopener"><code>lapply()</code></a></li>
<li><a href="https://rdrr.io/r/base/lapply.html" target="_blank" rel="noopener"><code>sapply()</code></a></li>
<li><a href="https://rdrr.io/r/base/tapply.html" target="_blank" rel="noopener"><code>tapply()</code></a></li>
<li><a href="https://rdrr.io/r/base/mapply.html" target="_blank" rel="noopener"><code>mapply()</code></a></li>
</ul>
<p>Last week in <a href="https://biodash.github.io/codeclub/12_loops/" target="_blank" rel="noopener">session 12</a>, Jelmer introduced for loops as one method for iterating over some set of things in R. Let&rsquo;s briefly revisit one of his examples. First, we&rsquo;ll recreate his distance dataset&hellip;</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='c'>#distance data (km) for two dates</span>
<span class='nv'>dists_Mar4</span> <span class='o'>&lt;-</span> <span class='nf'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='o'>(</span><span class='m'>17</span>, <span class='m'>93</span>, <span class='m'>56</span>, <span class='m'>19</span>, <span class='m'>175</span>, <span class='m'>40</span>, <span class='m'>69</span>, <span class='m'>267</span>, <span class='m'>4</span>, <span class='m'>91</span><span class='o'>)</span>
<span class='nv'>dists_Mar5</span> <span class='o'>&lt;-</span> <span class='nf'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='o'>(</span><span class='m'>87</span>, <span class='m'>143</span>, <span class='m'>103</span>, <span class='m'>223</span>, <span class='m'>106</span>, <span class='m'>18</span>, <span class='m'>87</span>, <span class='m'>72</span>, <span class='m'>59</span>, <span class='m'>5</span><span class='o'>)</span>

<span class='nv'>dist_df</span> <span class='o'>&lt;-</span> <span class='nf'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='o'>(</span><span class='nv'>dists_Mar4</span>, <span class='nv'>dists_Mar5</span><span class='o'>)</span>

<span class='c'>#view the data frame</span>
<span class='nv'>dist_df</span>

<span class='c'>#&gt;    dists_Mar4 dists_Mar5</span>
<span class='c'>#&gt; 1          17         87</span>
<span class='c'>#&gt; 2          93        143</span>
<span class='c'>#&gt; 3          56        103</span>
<span class='c'>#&gt; 4          19        223</span>
<span class='c'>#&gt; 5         175        106</span>
<span class='c'>#&gt; 6          40         18</span>
<span class='c'>#&gt; 7          69         87</span>
<span class='c'>#&gt; 8         267         72</span>
<span class='c'>#&gt; 9           4         59</span>
<span class='c'>#&gt; 10         91          5</span>
</code></pre>
</div>
<p>As he showed, one way to get the median distance traveled for each day (column) is to iterate over each column with a for loop, applying the <a href="https://rdrr.io/r/stats/median.html" target="_blank" rel="noopener"><code>median()</code></a> function to each one&hellip;</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='c'>#create object to store the loop output</span>
<span class='nv'>column_medians</span> <span class='o'>&lt;-</span> <span class='nf'><a href='https://rdrr.io/r/base/vector.html'>vector</a></span><span class='o'>(</span>length <span class='o'>=</span> <span class='nf'><a href='https://rdrr.io/r/base/nrow.html'>ncol</a></span><span class='o'>(</span><span class='nv'>dist_df</span><span class='o'>)</span><span class='o'>)</span>

<span class='c'>#for loop to calculate median for each column</span>
<span class='kr'>for</span> <span class='o'>(</span><span class='nv'>column_number</span> <span class='kr'>in</span> <span class='m'>1</span><span class='o'>:</span><span class='nf'><a href='https://rdrr.io/r/base/nrow.html'>ncol</a></span><span class='o'>(</span><span class='nv'>dist_df</span><span class='o'>)</span><span class='o'>)</span> <span class='o'>&#123;</span>
  
  <span class='c'>## We extract one column using "dataframe_name[[column_number]]":</span>
  <span class='nv'>column_median</span> <span class='o'>&lt;-</span> <span class='nf'><a href='https://rdrr.io/r/stats/median.html'>median</a></span><span class='o'>(</span><span class='nv'>dist_df</span><span class='o'>[[</span><span class='nv'>column_number</span><span class='o'>]</span><span class='o'>]</span><span class='o'>)</span>
  
  <span class='c'>## We add the single-column median to its associated position</span>
  <span class='c'>## in the vector:</span>
  <span class='nv'>column_medians</span><span class='o'>[</span><span class='nv'>column_number</span><span class='o'>]</span> <span class='o'>&lt;-</span> <span class='nv'>column_median</span>
<span class='o'>&#125;</span>

<span class='c'>#view the result</span>
<span class='nv'>column_medians</span>

<span class='c'>#&gt; [1] 62.5 87.0</span>
</code></pre>
</div>
<p>Let&rsquo;s think of this loop as the &ldquo;programming&rdquo; part of the functional programming I mentioned earlier - we&rsquo;ve written, or programmed, some code the computer will execute for us - we&rsquo;ll get to the &ldquo;functional&rdquo; part of functional programming shortly.</p>
<p>Unless you&rsquo;re brand new to R, you&rsquo;ve probably realized by now that there are a few data structures you find yourself working with pretty frequently. These include data frames, matrices, and lists. Not only do these get used a lot, but there are also certain operations that get performed pretty frequently on each of those types of objects. For example, doing something like iterating over either the rows or columns of a data frame and applying some function to each, like we did with the median function in the data frame above, is pretty common. That means lots of people would end up independently writing for loops that would look a lot like the one in our example. This is where the &ldquo;functional&rdquo; part of &ldquo;functional programming&rdquo; starts to come in. Instead of everyone independently writing that same basic loop over and over, it can be written one time in a general form and packaged into a function that can be called instead. And this is what the <a href="https://rdrr.io/r/base/apply.html" target="_blank" rel="noopener"><code>apply()</code></a> functions do. Then, going one step further, functional programming allows us to pass individual functions as arguments to other functions, as we&rsquo;re going to see shortly. Let&rsquo;s take a look at some examples.</p>
<br>
<hr>
<h2 id="examples">Examples</h2>
<h3 id="apply"><code>apply()</code></h3>
<p>We&rsquo;ll start with the <a href="https://rdrr.io/r/base/apply.html" target="_blank" rel="noopener"><code>apply()</code></a> function, which we can use to iterativey apply some function to the margins (rows or columns) of an object that has &ldquo;row by column&rdquo;&quot; structure. There are three arguments that have to be passed to <a href="https://rdrr.io/r/base/apply.html" target="_blank" rel="noopener"><code>apply()</code></a> - the object containing the data, the margin the function will be applied to (rows are designated with &lsquo;1&rsquo;, columns with &lsquo;2&rsquo;), and the function of interest.</p>
<p>In the example above, we used a loop to apply the <a href="https://rdrr.io/r/stats/median.html" target="_blank" rel="noopener"><code>median()</code></a> function to each column of the data frame. Here, we&rsquo;ll do the same thing with <a href="https://rdrr.io/r/base/apply.html" target="_blank" rel="noopener"><code>apply()</code></a>, by passing the <a href="https://rdrr.io/r/stats/median.html" target="_blank" rel="noopener"><code>median()</code></a> function as an argument to <a href="https://rdrr.io/r/base/apply.html" target="_blank" rel="noopener"><code>apply()</code></a>&hellip;</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='nv'>apply_out</span> <span class='o'>&lt;-</span> <span class='nf'><a href='https://rdrr.io/r/base/apply.html'>apply</a></span><span class='o'>(</span><span class='nv'>dist_df</span>, <span class='m'>2</span>, <span class='nv'>median</span><span class='o'>)</span>

<span class='c'>#view the result</span>
<span class='nv'>apply_out</span>

<span class='c'>#&gt; dists_Mar4 dists_Mar5 </span>
<span class='c'>#&gt;       62.5       87.0</span>
</code></pre>
</div>
<p>Notice how much less code it required here to do the same thing we did with the for loop above!</p>
<p>Notice too that the output here is a vector (specifically, a named numeric vector). The <a href="https://rdrr.io/r/base/apply.html" target="_blank" rel="noopener"><code>apply()</code></a> function determined this was most appropriate in this case, since the output of each iteration consisted of a single value. Here&rsquo;s another scenario&hellip;</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='nv'>apply_out_quantiles</span> <span class='o'>&lt;-</span> <span class='nf'><a href='https://rdrr.io/r/base/apply.html'>apply</a></span><span class='o'>(</span><span class='nv'>dist_df</span>, 
                             <span class='m'>2</span>, 
                             <span class='nv'>quantile</span>, 
                             probs <span class='o'>=</span> <span class='nf'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='o'>(</span><span class='m'>0.25</span>, <span class='m'>0.5</span>, <span class='m'>0.75</span><span class='o'>)</span><span class='o'>)</span>

<span class='c'>#view the result</span>
<span class='nv'>apply_out_quantiles</span>

<span class='c'>#&gt;     dists_Mar4 dists_Mar5</span>
<span class='c'>#&gt; 25%      24.25      62.25</span>
<span class='c'>#&gt; 50%      62.50      87.00</span>
<span class='c'>#&gt; 75%      92.50     105.25</span>
</code></pre>
</div>
<p>This time, the function output consisted of 3 values for each iteration, or column of the data frame. In this case, the output from apply is a matrix.</p>
<p>A quick additional note about how the function above is structured. In it, we applied the <a href="https://rdrr.io/r/stats/quantile.html" target="_blank" rel="noopener"><code>quantile()</code></a> function to each column, passing the <em>probs</em> argument to it to define the specific quantiles we wanted it to return. If we were running <a href="https://rdrr.io/r/stats/quantile.html" target="_blank" rel="noopener"><code>quantile()</code></a> by itself (not in the context of <a href="https://rdrr.io/r/base/apply.html" target="_blank" rel="noopener"><code>apply()</code></a>), it might look like this&hellip;</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='nf'><a href='https://rdrr.io/r/stats/quantile.html'>quantile</a></span><span class='o'>(</span><span class='nv'>dists_Mar4</span>, probs <span class='o'>=</span> <span class='nf'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='o'>(</span><span class='m'>0.25</span>, <span class='m'>0.50</span>, <span class='m'>0.75</span><span class='o'>)</span><span class='o'>)</span>

<span class='c'>#&gt;   25%   50%   75% </span>
<span class='c'>#&gt; 24.25 62.50 92.50</span>
</code></pre>
</div>
<p>Notice the slight difference in how the <em>probs</em> argument is passed to the <a href="https://rdrr.io/r/stats/quantile.html" target="_blank" rel="noopener"><code>quantile()</code></a> function here versus inside the <a href="https://rdrr.io/r/base/apply.html" target="_blank" rel="noopener"><code>apply()</code></a> function above. Here, <em>probs</em> is inside a set of parentheses associated with the function. But inside the <a href="https://rdrr.io/r/base/apply.html" target="_blank" rel="noopener"><code>apply()</code></a> function, any arguments associated with the function get passed as a separate argument (separated from the function by a comma). If you check out the <a href="https://rdrr.io/r/base/apply.html" target="_blank" rel="noopener"><code>apply()</code></a> documentation, this is indicated with the &ldquo;&hellip;&rdquo; argument, which is described as &ldquo;optional arguments to FUN&rdquo;. You&rsquo;ll see this kind of thing show up in other functions too.</p>
<p>So, what about the other types of <a href="https://rdrr.io/r/base/apply.html" target="_blank" rel="noopener"><code>apply()</code></a> functions? Well, the different types are designed for different types of input. For example&hellip;</p>
<h3 id="lapply"><code>lapply()</code></h3>
<p>Remember that <a href="https://rdrr.io/r/base/apply.html" target="_blank" rel="noopener"><code>apply()</code></a> requires you to define whether you&rsquo;ll apply the function in a row-wise or column-wise manner. But lists aren&rsquo;t set up as rows and columns. So, if we want to iterate over the elements of a list, <a href="https://rdrr.io/r/base/apply.html" target="_blank" rel="noopener"><code>apply()</code></a> won&rsquo;t work. An alternative is <a href="https://rdrr.io/r/base/lapply.html" target="_blank" rel="noopener"><code>lapply()</code></a>.</p>
<p>In the next example, we&rsquo;ll add some new distance data in for two additional dates. The number of observations are different this time though, so the data can&rsquo;t be combined in a data frame (you might remember that a data frame is a special kind of list where each of the list elements are the same length). Since we have different lengths here, we&rsquo;ll store the data as a list&hellip;</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='c'>#create a list that includes the new distance data</span>

<span class='nv'>dists_Mar11</span> <span class='o'>&lt;-</span> <span class='nf'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='o'>(</span><span class='m'>45</span>, <span class='m'>34</span>, <span class='m'>100</span>, <span class='m'>40</span>, <span class='m'>29</span>, <span class='m'>88</span>, <span class='m'>84</span>, <span class='m'>102</span><span class='o'>)</span>
<span class='nv'>dists_Mar12</span> <span class='o'>&lt;-</span> <span class='nf'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='o'>(</span><span class='m'>90</span>, <span class='m'>50</span>, <span class='m'>19</span>, <span class='m'>123</span>, <span class='m'>77</span>, <span class='m'>13</span>, <span class='m'>70</span><span class='o'>)</span>

<span class='nv'>dist_ls</span> <span class='o'>&lt;-</span> <span class='nf'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='o'>(</span><span class='nv'>dists_Mar4</span>, <span class='nv'>dists_Mar5</span>, <span class='nv'>dists_Mar11</span>, <span class='nv'>dists_Mar12</span><span class='o'>)</span>

<span class='c'>#view the list</span>
<span class='nv'>dist_ls</span>

<span class='c'>#&gt; [[1]]</span>
<span class='c'>#&gt;  [1]  17  93  56  19 175  40  69 267   4  91</span>
<span class='c'>#&gt; </span>
<span class='c'>#&gt; [[2]]</span>
<span class='c'>#&gt;  [1]  87 143 103 223 106  18  87  72  59   5</span>
<span class='c'>#&gt; </span>
<span class='c'>#&gt; [[3]]</span>
<span class='c'>#&gt; [1]  45  34 100  40  29  88  84 102</span>
<span class='c'>#&gt; </span>
<span class='c'>#&gt; [[4]]</span>
<span class='c'>#&gt; [1]  90  50  19 123  77  13  70</span>
</code></pre>
</div>
<p>Now we&rsquo;ll apply the <a href="https://rdrr.io/r/stats/median.html" target="_blank" rel="noopener"><code>median()</code></a> function to each element of the list. Again, we could write a for loop to iterate over each list element, but <a href="https://rdrr.io/r/base/lapply.html" target="_blank" rel="noopener"><code>lapply()</code></a> will do the same thing with much less code to write&hellip;</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='nv'>lapply_out</span> <span class='o'>&lt;-</span> <span class='nf'><a href='https://rdrr.io/r/base/lapply.html'>lapply</a></span><span class='o'>(</span><span class='nv'>dist_ls</span>, <span class='nv'>median</span><span class='o'>)</span>

<span class='c'>#view the output</span>
<span class='nv'>lapply_out</span>

<span class='c'>#&gt; [[1]]</span>
<span class='c'>#&gt; [1] 62.5</span>
<span class='c'>#&gt; </span>
<span class='c'>#&gt; [[2]]</span>
<span class='c'>#&gt; [1] 87</span>
<span class='c'>#&gt; </span>
<span class='c'>#&gt; [[3]]</span>
<span class='c'>#&gt; [1] 64.5</span>
<span class='c'>#&gt; </span>
<span class='c'>#&gt; [[4]]</span>
<span class='c'>#&gt; [1] 70</span>
</code></pre>
</div>
<p>This time, the output is a list - <a href="https://rdrr.io/r/base/lapply.html" target="_blank" rel="noopener"><code>lapply()</code></a> always gives output in list format. But in this specific case, the output could just as easily (and maybe more simply) be stored as a vector of four values - one for each list element. <a href="https://rdrr.io/r/base/lapply.html" target="_blank" rel="noopener"><code>sapply()</code></a> is an alternative to <a href="https://rdrr.io/r/base/lapply.html" target="_blank" rel="noopener"><code>lapply()</code></a> that, like <a href="https://rdrr.io/r/base/lapply.html" target="_blank" rel="noopener"><code>lapply()</code></a> still works on list input, but that attempts to simplify the output where possible&hellip;</p>
<h3 id="sapply"><code>sapply()</code></h3>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='nv'>sapply_out</span> <span class='o'>&lt;-</span> <span class='nf'><a href='https://rdrr.io/r/base/lapply.html'>sapply</a></span><span class='o'>(</span><span class='nv'>dist_ls</span>, <span class='nv'>median</span><span class='o'>)</span>

<span class='c'>#view the output</span>
<span class='nv'>sapply_out</span>

<span class='c'>#&gt; [1] 62.5 87.0 64.5 70.0</span>
</code></pre>
</div>
<p>Those three: <a href="https://rdrr.io/r/base/apply.html" target="_blank" rel="noopener"><code>apply()</code></a>, <a href="https://rdrr.io/r/base/lapply.html" target="_blank" rel="noopener"><code>lapply()</code></a>, and <a href="https://rdrr.io/r/base/lapply.html" target="_blank" rel="noopener"><code>sapply()</code></a> are the apply functions you&rsquo;ll likely encounter most frequently, but there are others that apply in more specific cases - we&rsquo;ll take a look at at least one more later in the Bonus section.</p>
<br>
<h2 id="breakout-rooms">Breakout Rooms</h2>
<p>We&rsquo;ll work with a new temperature dataset for the Breakout Room Exercises. I&rsquo;ve filtered and cleaned these data from the original dataset that&rsquo;s available from <a href="ftp://ftp.ncdc.noaa.gov/pub/data/cirs/climdiv/">climate.gov</a> They consist of maximum average temperature values for three states - Colorado, Ohio, and Virginia, with years in rows and months in columns. You can download the data with this code&hellip;</p>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='kr'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='o'>(</span><span class='nv'><a href='http://tidyverse.tidyverse.org'>tidyverse</a></span><span class='o'>)</span>

<span class='nv'>temp_url</span> <span class='o'>&lt;-</span> <span class='s'>'https://raw.githubusercontent.com/biodash/biodash.github.io/master/assets/data/temperature/co_oh_va_max_temp.txt'</span>
<span class='nv'>temp_file</span> <span class='o'>&lt;-</span> <span class='s'>'state_max_temps.tsv'</span>
<span class='nf'><a href='https://rdrr.io/r/utils/download.file.html'>download.file</a></span><span class='o'>(</span>url <span class='o'>=</span> <span class='nv'>temp_url</span>, destfile <span class='o'>=</span> <span class='nv'>temp_file</span><span class='o'>)</span>
</code></pre>
</div>
<h3 id="exercise-1">Exercise 1</h3>
<div class="alert puzzle">
<div>
<p>First let&rsquo;s load the dataset and assign it to an object named &lsquo;maxtemps&rsquo;. Then preview the dataset and determine its dimensions (number of rows and columns). As the &lsquo;.tsv&rsquo; extension on the file suggests, this is a tab delimited file.</p>
<details>
<summary>
Hints (click here)
</summary>
<p><br> Use <code>read_tsv()</code> to load the dataset. The functions <a href="https://rdrr.io/r/utils/head.html" target="_blank" rel="noopener"><code>head()</code></a> and <code>glimpse()</code> are a couple good options for previewing the data. If you don&rsquo;t get the dimensions from the function you preview the data with, the <a href="https://rdrr.io/r/base/dim.html" target="_blank" rel="noopener"><code>dim()</code></a> function will provide this info. <br></p>
</details>
<details>
<summary>
Solution (click here)
</summary>
<br>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='nv'>maxtemps</span> <span class='o'>&lt;-</span> <span class='nf'>read_tsv</span><span class='o'>(</span><span class='s'>"state_max_temps.tsv"</span><span class='o'>)</span>

<span class='c'>#&gt; Parsed with column specification:</span>
<span class='c'>#&gt; cols(</span>
<span class='c'>#&gt;   STATE = <span style='color: #BB0000;'>col_character()</span><span>,</span></span>
<span class='c'>#&gt;   YEAR = <span style='color: #00BB00;'>col_double()</span><span>,</span></span>
<span class='c'>#&gt;   JAN = <span style='color: #00BB00;'>col_double()</span><span>,</span></span>
<span class='c'>#&gt;   FEB = <span style='color: #00BB00;'>col_double()</span><span>,</span></span>
<span class='c'>#&gt;   MAR = <span style='color: #00BB00;'>col_double()</span><span>,</span></span>
<span class='c'>#&gt;   APR = <span style='color: #00BB00;'>col_double()</span><span>,</span></span>
<span class='c'>#&gt;   MAY = <span style='color: #00BB00;'>col_double()</span><span>,</span></span>
<span class='c'>#&gt;   JUN = <span style='color: #00BB00;'>col_double()</span><span>,</span></span>
<span class='c'>#&gt;   JUL = <span style='color: #00BB00;'>col_double()</span><span>,</span></span>
<span class='c'>#&gt;   AUG = <span style='color: #00BB00;'>col_double()</span><span>,</span></span>
<span class='c'>#&gt;   SEP = <span style='color: #00BB00;'>col_double()</span><span>,</span></span>
<span class='c'>#&gt;   OCT = <span style='color: #00BB00;'>col_double()</span><span>,</span></span>
<span class='c'>#&gt;   NOV = <span style='color: #00BB00;'>col_double()</span><span>,</span></span>
<span class='c'>#&gt;   DEC = <span style='color: #00BB00;'>col_double()</span></span>
<span class='c'>#&gt; )</span>

<span class='nf'>glimpse</span><span class='o'>(</span><span class='nv'>maxtemps</span><span class='o'>)</span>

<span class='c'>#&gt; Rows: 378</span>
<span class='c'>#&gt; Columns: 14</span>
<span class='c'>#&gt; $ STATE <span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span> "CO", "CO", "CO", "CO", "CO", "CO", "CO", "CO", "CO", "CO", "CO…</span></span>
<span class='c'>#&gt; $ YEAR  <span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> 1895, 1896, 1897, 1898, 1899, 1900, 1901, 1902, 1903, 1904, 190…</span></span>
<span class='c'>#&gt; $ JAN   <span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> 33.6, 41.2, 34.2, 32.6, 34.0, 40.8, 39.4, 38.4, 37.5, 36.6, 33.…</span></span>
<span class='c'>#&gt; $ FEB   <span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> 33.3, 41.3, 36.8, 43.4, 29.4, 39.1, 37.9, 43.2, 28.3, 47.3, 33.…</span></span>
<span class='c'>#&gt; $ MAR   <span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> 46.1, 44.8, 42.8, 43.5, 43.7, 51.9, 46.0, 44.3, 44.1, 51.4, 48.…</span></span>
<span class='c'>#&gt; $ APR   <span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> 60.8, 58.3, 55.8, 59.0, 58.7, 52.4, 55.5, 59.0, 55.6, 58.3, 53.…</span></span>
<span class='c'>#&gt; $ MAY   <span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> 66.5, 68.0, 70.5, 61.8, 66.5, 68.1, 67.6, 68.7, 63.8, 65.5, 61.…</span></span>
<span class='c'>#&gt; $ JUN   <span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> 74.0, 80.2, 77.4, 76.6, 77.2, 80.1, 76.8, 78.8, 69.8, 71.7, 77.…</span></span>
<span class='c'>#&gt; $ JUL   <span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> 77.7, 80.9, 82.0, 81.9, 80.2, 82.9, 86.7, 80.3, 80.9, 79.0, 79.…</span></span>
<span class='c'>#&gt; $ AUG   <span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> 80.0, 81.2, 79.6, 82.0, 79.8, 81.9, 80.7, 80.8, 80.3, 77.8, 81.…</span></span>
<span class='c'>#&gt; $ SEP   <span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> 75.7, 70.1, 75.2, 72.2, 74.9, 70.2, 72.7, 72.3, 70.0, 72.2, 73.…</span></span>
<span class='c'>#&gt; $ OCT   <span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> 60.3, 59.2, 59.8, 57.7, 58.0, 62.9, 63.1, 61.8, 62.4, 60.2, 57.…</span></span>
<span class='c'>#&gt; $ NOV   <span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> 42.3, 42.8, 48.5, 43.0, 50.5, 49.3, 52.9, 46.7, 49.7, 53.0, 48.…</span></span>
<span class='c'>#&gt; $ DEC   <span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> 33.9, 43.1, 33.4, 30.9, 35.0, 41.5, 38.6, 36.4, 41.8, 39.8, 35.…</span></span>

<span class='nf'><a href='https://rdrr.io/r/base/dim.html'>dim</a></span><span class='o'>(</span><span class='nv'>maxtemps</span><span class='o'>)</span>

<span class='c'>#&gt; [1] 378  14</span>
</code></pre>
</div>
</details>
</div>
</div>
<hr>
<h3 id="exercise-2">Exercise 2</h3>
<div class="alert puzzle">
<div>
<p>The dataset is currently in tibble form. This is the default object type created by the <code>read_tsv()</code> command from <em>readr</em> (common in tidy workflows). The apply functions are not associated with the tidyverse, and it turns out they sometimes don&rsquo;t work well with tibbles. So, before we go any further, let&rsquo;s convert the tibble to a data frame.</p>
<details>
<summary>
Hints (click here)
</summary>
<br>
<p>Use the <a href="https://rdrr.io/r/base/as.data.frame.html" target="_blank" rel="noopener"><code>as.data.frame()</code></a> function to convert the tibble to a data frame.</p>
<br>
</details>
<details>
<summary>
Solution (click here)
</summary>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='nv'>maxtemps</span> <span class='o'>&lt;-</span> <span class='nf'><a href='https://rdrr.io/r/base/as.data.frame.html'>as.data.frame</a></span><span class='o'>(</span><span class='nv'>maxtemps</span><span class='o'>)</span>
<span class='nf'><a href='https://rdrr.io/r/base/class.html'>class</a></span><span class='o'>(</span><span class='nv'>maxtemps</span><span class='o'>)</span>

<span class='c'>#&gt; [1] "data.frame"</span>
</code></pre>
</div>
</details>
</div>
</div>
<hr>
<h3 id="exercise-3">Exercise 3</h3>
<div class="alert puzzle">
<div>
<p>Calculate the average temperature for each month across the whole dataset (using the data for all three states together).</p>
<details>
<summary>
Hints (click here)
</summary>
<p><br> Choose an appropriate function from the <a href="https://rdrr.io/r/base/apply.html" target="_blank" rel="noopener"><code>apply()</code></a> family of functions and use the <a href="https://rdrr.io/r/base/mean.html" target="_blank" rel="noopener"><code>mean()</code></a> function to calculate the mean value for each column of temperatures in the dataset (cols 3 through 14). Remember that when you&rsquo;re designating the margin to apply the function to, &lsquo;1&rsquo; means rows and &lsquo;2&rsquo; means columns. <br></p>
</details>
<details>
<summary>
Solution (click here)
</summary>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='nv'>mean_monthly</span> <span class='o'>&lt;-</span> <span class='nf'><a href='https://rdrr.io/r/base/apply.html'>apply</a></span><span class='o'>(</span><span class='nv'>maxtemps</span><span class='o'>[</span>,<span class='m'>3</span><span class='o'>:</span><span class='m'>14</span><span class='o'>]</span>, <span class='m'>2</span>, <span class='nv'>mean</span><span class='o'>)</span>

<span class='c'>#OR</span>

<span class='nv'>mean_monthly</span> <span class='o'>&lt;-</span> <span class='nf'><a href='https://rdrr.io/r/base/lapply.html'>sapply</a></span><span class='o'>(</span><span class='nv'>maxtemps</span><span class='o'>[</span>,<span class='m'>3</span><span class='o'>:</span><span class='m'>14</span><span class='o'>]</span>, <span class='nv'>mean</span><span class='o'>)</span>

<span class='c'>#Remember that a data frame is just a special case of a list (one that's structured in rows and columns), so either `apply()` or `sapply()` will work here</span>

<span class='c'>#view results</span>
<span class='nv'>mean_monthly</span>

<span class='c'>#&gt;      JAN      FEB      MAR      APR      MAY      JUN      JUL      AUG </span>
<span class='c'>#&gt; 38.89206 41.93598 50.73148 61.35608 71.26111 79.95503 84.17460 82.23571 </span>
<span class='c'>#&gt;      SEP      OCT      NOV      DEC </span>
<span class='c'>#&gt; 75.92857 64.56296 51.49921 41.11508</span>
</code></pre>
</div>
</details>
</div>
</div>
<hr>
<h3 id="exercise-4">Exercise 4</h3>
<div class="alert puzzle">
<div>
<p>Now let&rsquo;s get the average annual (max) temperatures for Ohio for all the years available in the dataset (1895-2020) and view the temperatures for the first 5 years of the dataset (1895-1899). Since it&rsquo;s not really obvious what each of these values correspond to, try converting this vector to a named vector with the years serving as the names.</p>
<details>
<summary>
Hints (click here)
</summary>
<p><br> Use the same <a href="https://rdrr.io/r/base/apply.html" target="_blank" rel="noopener"><code>apply()</code></a> and <a href="https://rdrr.io/r/base/mean.html" target="_blank" rel="noopener"><code>mean()</code></a> functions as above, but this time, filter the dataset for just the &ldquo;OH&rdquo; entries, and also apply the function by rows. Remember that a two-dimensional object like a data frame or matrix is indexed with the form [rows, columns]. Alternatively, you can use tidy notation (i.e. filter, select). Then index the resulting vector with the square bracket notation <a href="https://biodash.github.io/codeclub/09_subsetting/" target="_blank" rel="noopener">(Session 9)</a> to get the first five items. The <a href="https://rdrr.io/r/base/names.html" target="_blank" rel="noopener"><code>names()</code></a> function will allow you to add names to the vector elements.<br></p>
</details>
<details>
<summary>
Solution (click here)
</summary>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='c'>#base R indexing...</span>
<span class='nv'>mean_annual_oh</span> <span class='o'>&lt;-</span> <span class='nf'><a href='https://rdrr.io/r/base/apply.html'>apply</a></span><span class='o'>(</span><span class='nv'>maxtemps</span><span class='o'>[</span><span class='nv'>maxtemps</span><span class='o'>$</span><span class='nv'>STATE</span> <span class='o'>==</span> <span class='s'>"OH"</span>, <span class='m'>3</span><span class='o'>:</span><span class='m'>14</span><span class='o'>]</span>, <span class='m'>1</span>, <span class='nv'>mean</span><span class='o'>)</span>

<span class='c'>#OR </span>

<span class='c'>#a more tidy approach (actually a hybrid approach here - the apply function is still base R)...</span>
<span class='nv'>mean_annual_oh</span> <span class='o'>&lt;-</span> <span class='nv'>maxtemps</span> <span class='o'>%&gt;%</span> 
                  <span class='nf'><a href='https://rdrr.io/r/stats/filter.html'>filter</a></span><span class='o'>(</span><span class='nv'>STATE</span> <span class='o'>==</span> <span class='s'>"OH"</span><span class='o'>)</span> <span class='o'>%&gt;%</span> 
                  <span class='nf'>select</span><span class='o'>(</span><span class='nv'>JAN</span><span class='o'>:</span><span class='nv'>DEC</span><span class='o'>)</span> <span class='o'>%&gt;%</span> 
                  <span class='nf'><a href='https://rdrr.io/r/base/apply.html'>apply</a></span><span class='o'>(</span><span class='m'>1</span>, <span class='nv'>mean</span><span class='o'>)</span>

<span class='c'>#view first 5 items</span>
<span class='nv'>mean_annual_oh</span><span class='o'>[</span><span class='m'>1</span><span class='o'>:</span><span class='m'>5</span><span class='o'>]</span>

<span class='c'>#&gt; [1] 60.23333 60.74167 61.20833 61.42500 61.59167</span>


<span class='c'>#add names to the vector</span>
<span class='nf'><a href='https://rdrr.io/r/base/names.html'>names</a></span><span class='o'>(</span><span class='nv'>mean_annual_oh</span><span class='o'>)</span> <span class='o'>&lt;-</span> <span class='m'>1895</span><span class='o'>:</span><span class='m'>2020</span>

<span class='c'>#view first 5 items</span>
<span class='nv'>mean_annual_oh</span><span class='o'>[</span><span class='m'>1</span><span class='o'>:</span><span class='m'>5</span><span class='o'>]</span>

<span class='c'>#&gt;     1895     1896     1897     1898     1899 </span>
<span class='c'>#&gt; 60.23333 60.74167 61.20833 61.42500 61.59167</span>
</code></pre>
</div>
</details>
</div>
</div>
<hr>
<h3 id="bonus-1">Bonus 1</h3>
<div class="alert puzzle">
<div>
<p>What if we wanted to compare the mean max July temperatures for each of the three states? Use an appropriate <a href="https://rdrr.io/r/base/apply.html" target="_blank" rel="noopener"><code>apply()</code></a> function to calculate the mean values for July separately for CO, OH, and VA.</p>
<details>
<summary>
Hints (click here)
</summary>
<p><br> <a href="https://rdrr.io/r/base/tapply.html" target="_blank" rel="noopener"><code>tapply()</code></a> allows you to apply a function to subsets of a vector that are defined by a set of grouping variables (factors). Check the help page for <a href="https://rdrr.io/r/base/tapply.html" target="_blank" rel="noopener"><code>tapply()</code></a> and use the &ldquo;STATE&rdquo; column as the grouping factor. <br></p>
</details>
<details>
<summary>
Solution (click here)
</summary>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='nf'><a href='https://rdrr.io/r/base/tapply.html'>tapply</a></span><span class='o'>(</span><span class='nv'>maxtemps</span><span class='o'>[</span>,<span class='s'>"JUL"</span><span class='o'>]</span>, <span class='nv'>maxtemps</span><span class='o'>$</span><span class='nv'>STATE</span>, <span class='nv'>mean</span><span class='o'>)</span>

<span class='c'>#&gt;       CO       OH       VA </span>
<span class='c'>#&gt; 82.25238 84.53810 85.73333</span>
</code></pre>
</div>
</details>
</div>
</div>
<hr>
<h3 id="bonus-2">Bonus 2</h3>
<div class="alert puzzle">
<div>
<p>Now, instead of focusing on just July, let&rsquo;s try to get the average max temperatures for each month for each of the three states separately.</p>
<details>
<summary>
Hint 1 (click here)
</summary>
<p><br> The <a href="https://rdrr.io/r/base/tapply.html" target="_blank" rel="noopener"><code>tapply()</code></a> function we used in Exercise 4 only works when the input is a single vector. Look toward the end of the <a href="https://rdrr.io/r/base/tapply.html" target="_blank" rel="noopener"><code>tapply()</code></a> documentation for a suggested related function that might apply here. <br></p>
</details>
<details>
<summary>
Hint 2 (click here)
</summary>
<p><br> Give the <a href="https://rdrr.io/r/stats/aggregate.html" target="_blank" rel="noopener"><code>aggregate()</code></a> function a try. Notice that the grouping variable (the &ldquo;by&rdquo; argument in the function) has to be provided in the form of a list. <br></p>
</details>
<details>
<summary>
Solution (click here)
</summary>
<div class="highlight">
<pre class='chroma'><code class='language-r' data-lang='r'><span class='nf'><a href='https://rdrr.io/r/stats/aggregate.html'>aggregate</a></span><span class='o'>(</span><span class='nv'>maxtemps</span><span class='o'>[</span>,<span class='m'>3</span><span class='o'>:</span><span class='m'>14</span><span class='o'>]</span>, by <span class='o'>=</span> <span class='nf'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='o'>(</span><span class='nv'>maxtemps</span><span class='o'>$</span><span class='nv'>STATE</span><span class='o'>)</span>, <span class='nv'>mean</span><span class='o'>)</span>

<span class='c'>#&gt;   Group.1      JAN      FEB      MAR      APR      MAY      JUN      JUL</span>
<span class='c'>#&gt; 1      CO 36.85238 40.45952 47.44444 56.49762 66.00952 76.75238 82.25238</span>
<span class='c'>#&gt; 2      OH 35.15476 37.99444 48.45238 61.05714 72.28571 80.70000 84.53810</span>
<span class='c'>#&gt; 3      VA 44.66905 47.35397 56.29762 66.51349 75.48810 82.41270 85.73333</span>
<span class='c'>#&gt;        AUG      SEP      OCT      NOV      DEC</span>
<span class='c'>#&gt; 1 79.99286 72.51508 60.87381 47.09365 37.73333</span>
<span class='c'>#&gt; 2 82.60952 76.72619 64.47778 50.32698 38.54365</span>
<span class='c'>#&gt; 3 84.10476 78.54444 68.33730 57.07698 47.06825</span>
</code></pre>
</div>
</details>
</div>
</div>
<hr>
<h2 id="purrr-an-alternative-tidy-approach-to-apply-functions">Purrr: An Alternative (Tidy) Approach To <code>apply()</code> Functions</h2>
<p>In the second exercise, we converted back from a tibble to a data frame, as the <a href="https://rdrr.io/r/base/apply.html" target="_blank" rel="noopener"><code>apply()</code></a> functions we&rsquo;ve worked with here are part of base R, and some aren&rsquo;t compatible with tibbles. It&rsquo;s worth mentioning that there are <em>tidy</em> alternatives to the apply functions - they&rsquo;re part of the <em>purrr</em> package, which might be the topic of a future code club session. We decided to go with <a href="https://rdrr.io/r/base/apply.html" target="_blank" rel="noopener"><code>apply()</code></a> in this session since there were a couple requests for it, and it still does get used enough that you&rsquo;re likely to at least run across it, even if you don&rsquo;t use it yourself. For now though, if you want more details on <em>purrr</em> you can find them <a href="https://purrr.tidyverse.org/" target="_blank" rel="noopener">here</a>.</p>
<hr>

                    </div>

                    <br>

                    








<div class="share-box" aria-hidden="true">
  <ul class="share">
    
      
      
      
        
      
      
      
      <li>
        <a href="https://twitter.com/intent/tweet?url=https://biodash.github.io/codeclub/13_apply/&amp;text=Session%2013:%20Applying%20The%20Apply%20Functions" target="_blank" rel="noopener" class="share-btn-twitter">
          <i class="fab fa-twitter"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.facebook.com/sharer.php?u=https://biodash.github.io/codeclub/13_apply/&amp;t=Session%2013:%20Applying%20The%20Apply%20Functions" target="_blank" rel="noopener" class="share-btn-facebook">
          <i class="fab fa-facebook"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="mailto:?subject=Session%2013:%20Applying%20The%20Apply%20Functions&amp;body=https://biodash.github.io/codeclub/13_apply/" target="_blank" rel="noopener" class="share-btn-email">
          <i class="fas fa-envelope"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.linkedin.com/shareArticle?url=https://biodash.github.io/codeclub/13_apply/&amp;title=Session%2013:%20Applying%20The%20Apply%20Functions" target="_blank" rel="noopener" class="share-btn-linkedin">
          <i class="fab fa-linkedin-in"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="whatsapp://send?text=Session%2013:%20Applying%20The%20Apply%20Functions%20https://biodash.github.io/codeclub/13_apply/" target="_blank" rel="noopener" class="share-btn-whatsapp">
          <i class="fab fa-whatsapp"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://service.weibo.com/share/share.php?url=https://biodash.github.io/codeclub/13_apply/&amp;title=Session%2013:%20Applying%20The%20Apply%20Functions" target="_blank" rel="noopener" class="share-btn-weibo">
          <i class="fab fa-weibo"></i>
        </a>
      </li>
    
  </ul>
</div>











  
  
    



  
  
  
  
  
  <div class="media author-card content-widget-hr">
    
      
      <a href="/authors/mike-sovic/"><img class="avatar mr-3 avatar-circle" src="/authors/mike-sovic/avatar_hu1ab2c0735ccc2e414b344a1bc08b8162_24652_270x270_fill_q90_lanczos_center.jpg" alt="Mike Sovic"></a>
    

    <div class="media-body">
      <h5 class="card-title"><a href="/authors/mike-sovic/">Mike Sovic</a></h5>
      <h6 class="card-subtitle">Bioinformatician at CAPS</h6>
      
      <ul class="network-icon" aria-hidden="true">
  
    
    
    
      
    
    
    
    
    
    <li>
      <a href="mailto:sovic.1@osu.edu" >
        <i class="fas fa-envelope"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://github.com/mikesovic" target="_blank" rel="noopener">
        <i class="fab fa-github"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://www.youtube.com/channel/UC2dB6jDTbqzlTM6edzfBSGQ" target="_blank" rel="noopener">
        <i class="fab fa-youtube"></i>
      </a>
    </li>
  
</ul>

    </div>
  </div>


  
















                    <br>

                    <hr class="separator">

                    <div class="clearfix">
                        
                        
                        <span class="previous-link">
                            <a href="https://biodash.github.io/codeclub/12_loops/">← Session 12: Vectorization and loops in R</a>
                        </span>
                        
                        
                        
                        
                        <span class="next-link">
                            <a href="https://biodash.github.io/codeclub/14_functions/">Session 14: Writing your own Functions →</a>
                        </span>
                        
                        
                    </div>

                    <hr class="separator">

                </div>

            </article>

            
        </main>
    </div>
</div>

  </div>

  <div class="page-footer">
    
    
    <div class="container">
      <footer class="site-footer">
    
    <p class="powered-by">
      <a href="/license/">LICENSE: CC-BY-SA <br> <i class="fab fa-creative-commons fa-2x"></i><i class="fab fa-creative-commons-by fa-2x"></i><i class="fab fa-creative-commons-sa fa-2x"></i> </a><br>
    </p>
    
</footer>
    </div>
    
  </div>

  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

      

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/instant.page/5.1.0/instantpage.min.js" integrity="sha512-1+qUtKoh9XZW7j+6LhRMAyOrgSQKenQ4mluTR+cvxXjP1Z54RxZuzstR/H9kgPXQsVB8IW7DMDFUJpzLjvhGSQ==" crossorigin="anonymous"></script>

      
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      

      
      

      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/highlight.min.js" integrity="sha512-TDKKr+IvoqZnPzc3l35hdjpHD0m+b2EC2SrLEgKDRWpxf2rFCxemkgvJ5kfU48ip+Y+m2XVKyOCD85ybtlZDmw==" crossorigin="anonymous"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/r.min.js"></script>
        
      

    

    
    
    
      <script async defer src="https://maps.googleapis.com/maps/api/js?key="></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/gmaps.js/0.4.25/gmaps.min.js" integrity="sha256-7vjlAeb8OaTrCXZkCNun9djzuB2owUsaO72kXaFDBJs=" crossorigin="anonymous"></script>
      
    

    
    

    
    
    
      
      <script id="search-hit-fuse-template" type="text/x-template">
        <div class="search-hit" id="summary-{{key}}">
          <div class="search-hit-content">
            <div class="search-hit-name">
              <a href="{{relpermalink}}">{{title}}</a>
              <div class="article-metadata search-hit-type">{{type}}</div>
              <p class="search-hit-description">{{snippet}}</p>
            </div>
          </div>
        </div>
      </script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>
      
    

    
    

    
    
    
    

    
    <script src="/js/bootstrap.bundle.min.6aed84840afc03ab4d5750157f69c120.js"></script>

    
    
      
      
      
      
      
      
      
    

    
    
    
    
    
    
    
    
      
      
    
    
      
    
    <script src="/en/js/wowchemy.min.2f16af175a3ec51b41b36bb4934b1cf7.js"></script>

    






</body>
</html>
